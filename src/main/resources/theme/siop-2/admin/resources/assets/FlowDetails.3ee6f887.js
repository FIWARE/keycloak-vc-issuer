import{_ as bn,j as m,p as tt,q as fe,ad as rt,a5 as pg,br as Ld,s as gg,h as U,r as x,ab as Ja,u as Be,az as Wt,aZ as wn,P as qd,aw as we,F as ae,aA as es,a3 as lr,aC as mg,aD as vg,aX as ut,am as yg,aG as bg,ao as _t,bs as wg,bt as ts,bu as xg,bv as _g,bw as Eg,bx as Sg,l as Cg,by as Ng,ax as Mg,b2 as Ig,L as Gs,aR as kg}from"./index.7cbfb18a.js";import{V as Rg}from"./ViewHeader.083cd951.js";import{P as Tg,L as Ag}from"./ListEmptyState.fef0510e.js";import{u as Lg,m as qg}from"./useLocaleSort.b8a659bb.js";import{D as Pd,a as $d,b as Dd,c as Od,d as zt,e as Pg}from"./DataListItemRow.df3ed5f3.js";import{C as $g}from"./Card.37028a42.js";import{C as Dg}from"./CardBody.4fff68f7.js";import{S as Ia,b as ka,a as Ra}from"./Select.fbe867d5.js";import{u as dr,C as Us,F as Fd}from"./index.esm.1e7ace95.js";import{D as Og}from"./DynamicComponents.7f569784.js";import{H as Et,T as Fg,e as zg,a as Bg,b as Hg,c as Rr}from"./HelpItem.719382e8.js";import{K as Xn}from"./KeycloakTextInput.9afb01cd.js";import{T as zd}from"./trash-icon.f61a79f3.js";import{M as xn,a as _n}from"./Modal.11970fe7.js";import{F as En,a as St,A as Vg}from"./FormGroup.60c77f60.js";import{a as Bd}from"./plus-icon.f70ae4c8.js";import{K as Gg}from"./KeycloakTextArea.d98120cb.js";import{u as Ta}from"./useToggle.461e82f2.js";import{P as Ug,r as qt,a as Hd,b as Vd,c as Yg,d as Kg,e as Sn,f as Xg,_ as Gd,g as Wg,h as Ud,i as Zg,j as Yd,k as jg,l as Qg}from"./KeycloakDataTable.ae870e97.js";import{D as Jg}from"./DataListControl.e70b25ea.js";import{s as Tr}from"./data-list.f7ff2ea7.js";import{T as em,a as tm}from"./Text.28ece842.js";import{N as fr,O as Cn,P as Kd,Q as Xd,f as ns,S as nm,x as hr,U as rs,V as Wd,W as is,u as Zd,X as rm,Y as im,Z as om,h as xe,v as os,$ as Nn,a0 as jd,n as Mn,a1 as In,s as Qd,_ as am,a2 as as,a3 as Jd,a4 as sm,k as cm,w as ef,a5 as um,a6 as tf,a7 as ss,a8 as lm,a9 as nf,r as dm,aa as cs,ab as fm,ac as hm,ad as pm,o as gm,ae as mm,af as vm}from"./Td.1e0c90e7.js";import{D as ym}from"./DrawerHead.cf8f1647.js";import{u as Ys}from"./ConfirmDialog.4dc691c5.js";import{B as bm,D as wm}from"./AuthenticationSection.563c0235.js";import{N as xm}from"./NameDescription.99baa3a5.js";import{T as Ks}from"./Trans.a8d0351e.js";import{R as _m}from"./Radio.7ee3497e.js";import{F as Xs,a as Ws}from"./FlexItem.ae9c1d3c.js";import"./TableToolbar.51ae2a5f.js";import"./EmptyStateSecondaryActions.511adeb0.js";import"./EmptyStateBody.1533f3a6.js";import"./plus-circle-icon.aa8a939a.js";import"./grip-vertical-icon.7e109111.js";import"./check.51c67984.js";import"./star-icon.a6efdd26.js";import"./ClientSelect.2d31aa2e.js";import"./FileUpload.c211f5c1.js";import"./CodeEditor.5b99e2f5.js";import"./copy-icon.dbf95270.js";import"./GroupPickerDialog.174f65c8.js";import"./ActionListItem.65cb5d9a.js";import"./minus-circle-icon.c093f419.js";import"./MultiLineInput.091fd21a.js";import"./PasswordInput.aa539188.js";import"./AddRoleMappingModal.c8e6830c.js";import"./resource.2cd5a37e.js";import"./joinPath.69b856b1.js";import"./filter-icon.a9b0a5f3.js";import"./Checkbox.7d63c785.js";import"./DraggableTable.e88c69bd.js";import"./FormAccess.3a7ea209.js";import"./GridItem.63e5e367.js";import"./NumberInput.619d2bbb.js";import"./TimeSelector.3864b0c1.js";import"./question-circle-icon.7590ca7d.js";import"./Tabs.fae3d04f.js";import"./MenuList.22670a64.js";import"./RoutableTabs.58e36a71.js";const rf=e=>{var{className:t="",isExpanded:n=!1,"aria-controls":r="","aria-label":i="Details",rowid:o="",id:a,buttonProps:s}=e,c=bn(e,["className","isExpanded","aria-controls","aria-label","rowid","id","buttonProps"]);return m("div",{...Object.assign({className:tt(Tr.dataListItemControl,t)},c),children:m("div",{className:tt(Tr.dataListToggle),children:m(fe,{...Object.assign({id:a,variant:rt.plain,"aria-controls":r!==""&&r,"aria-label":i,"aria-labelledby":i!=="Details"?null:`${o} ${a}`,"aria-expanded":n},s),children:m("div",{className:tt(Tr.dataListToggleIcon),children:m(pg,{})})})})})};rf.displayName="DataListToggle";const of=e=>{var{className:t="",children:n}=e,r=bn(e,["className","children"]);return m("div",{...Object.assign({className:tt(Ld.drawerActions,t)},r),children:n})};of.displayName="DrawerActions";const af=e=>{var{className:t="",onClose:n=()=>{},"aria-label":r="Close drawer panel"}=e,i=bn(e,["className","onClose","aria-label"]);return m("div",{...Object.assign({className:tt(Ld.drawerClose,t)},i),children:m(fe,{variant:"plain",onClick:n,"aria-label":r,children:m(gg,{})})})};af.displayName="DrawerCloseButton";const Mt={modifiers:{compact:"pf-m-compact",selected:"pf-m-selected",disabled:"pf-m-disabled"},themeDark:"pf-theme-dark",toggleGroup:"pf-c-toggle-group",toggleGroupButton:"pf-c-toggle-group__button",toggleGroupIcon:"pf-c-toggle-group__icon",toggleGroupItem:"pf-c-toggle-group__item",toggleGroupText:"pf-c-toggle-group__text"};var Wn;(function(e){e.icon="icon",e.text="text"})(Wn||(Wn={}));const Aa=({variant:e,children:t})=>m("span",{className:tt(e==="icon"&&Mt.toggleGroupIcon,e==="text"&&Mt.toggleGroupText),children:t});Aa.displayName="ToggleGroupItemElement";const Zn=e=>{var{text:t,icon:n,className:r,isDisabled:i=!1,isSelected:o=!1,"aria-label":a="",onChange:s=()=>{},buttonId:c=""}=e,l=bn(e,["text","icon","className","isDisabled","isSelected","aria-label","onChange","buttonId"]);const u=d=>{s(!o,d)};return!a&&n&&!t&&console.warn("An accessible aria-label is required when using the toggle group item icon variant."),m("div",{...Object.assign({className:tt(Mt.toggleGroupItem,r)},l),children:U("button",{...Object.assign({type:"button",className:tt(Mt.toggleGroupButton,o&&Mt.modifiers.selected),"aria-pressed":o,onClick:u},a&&{"aria-label":a},i&&{disabled:!0},c&&{id:c}),children:[n?m(Aa,{variant:Wn.icon,children:n}):null,t?m(Aa,{variant:Wn.text,children:t}):null]})})};Zn.displayName="ToggleGroupItem";const sf=e=>{var{className:t,children:n,isCompact:r=!1,areAllGroupsDisabled:i=!1,"aria-label":o}=e,a=bn(e,["className","children","isCompact","areAllGroupsDisabled","aria-label"]);const s=x.exports.Children.map(n,c=>c.type.name!==Zn.name?c:x.exports.cloneElement(c,i?{isDisabled:!0}:{}));return m("div",{...Object.assign({className:tt(Mt.toggleGroup,r&&Mt.modifiers.compact,t),role:"group","aria-label":o},a),children:s})};sf.displayName="ToggleGroup";const Em={name:"CogIcon",height:512,width:512,svgPath:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z",yOffset:0,xOffset:0},Sm=Ja(Em),Cm={name:"DomainIcon",height:1024,width:1024,svgPath:"M544,511.9 C561.476067,511.948945 575.664266,525.962873 575.994253,543.371439 L576,543.9 L576,991.9 C575.951055,1009.37607 561.937127,1023.56427 544.528561,1023.89425 L544,1023.9 L352,1023.9 C334.523933,1023.85105 320.335734,1009.83713 320.005747,992.428561 L320,991.9 L320,543.9 C320.048945,526.423933 334.062873,512.235734 351.471439,511.905747 L352,511.9 L544,511.9 Z M704,576 L704,960 L640,960 L640,576 L704,576 Z M512,896 L384,896 L384,960 L512,960 L512,896 Z M960,513.1 L960,513.2 C960,665.4 884.1,799.9 768,880.9 L768,880.9 L768,799.4 C773.3,794.6 778.4,789.8 783.5,784.7 C855.624209,712.728348 896.108133,614.991161 896,513.1 L896,513.1 L960,513.1 Z M149.8,385 C100.714385,524.561202 135.973879,679.905126 240.5,784.6 C245.5,789.7 250.7,794.6 256,799.3 L256,799.3 L256,880.8 C139.9,799.8 63.9999013,665.3 63.9999013,513.1 C63.9712238,469.725105 70.236499,426.575548 82.6,385 L82.6,385 Z M512.1,704 L384,704 L384,832 L512.1,832 L512.1,704 Z M512,576 L448,576 L448,640 L512,640 L512,576 Z M864,-1.13686838e-13 C881.496381,-1.13686838e-13 895.713128,14.0417829 895.995713,31.4708215 L896,32 L896,406 C896,423.496381 881.958217,437.713128 864.529179,437.995713 L864,438 L608,438 C590.503619,438 576.286872,423.958217 576.004287,406.529179 L576,406 L576,32 C576,14.5036191 590.041783,0.286872383 607.470821,0.00428708574 L608,-1.13686838e-13 L864,-1.13686838e-13 Z M1024,64 L1024,384 L960,384 L960,64 L1024,64 Z M832,256 L640,256 L640,352 L832,352 L832,256 Z M224,-5.68434189e-14 C241.476067,0.0489452394 255.664266,14.0628726 255.994253,31.4714395 L256,32 L256,288 C255.951055,305.476067 241.937127,319.664266 224.528561,319.994253 L224,320 L32,320 C14.5239331,319.951055 0.335734448,305.937127 0.00574685353,288.528561 L0,288 L0,32 C0.0489452394,14.5239331 14.0628726,0.335734448 31.4714395,0.00574685353 L32,-5.68434189e-14 L224,-5.68434189e-14 Z M192,192 L64,192 L64,256 L192,256 L192,192 Z M512,65 L512,129 C460.642759,128.90985 409.795141,139.181409 362.5,159.2 C347.917219,165.399771 333.724426,172.47947 320,180.4 L320,180.4 L320,108.2 C380.012207,79.7623165 445.590913,65.0071076 512,65 L512,65 Z M832,64 L736,64 L736,160 L832,160 L832,64 Z M192,64 L128,64 L128,128 L192,128 L192,64 Z",yOffset:0,xOffset:0},Nm=Ja(Cm),Mm={name:"TableIcon",height:512,width:512,svgPath:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z",yOffset:0,xOffset:0},Im=Ja(Mm),Zs=({list:e,setValue:t})=>m(qd,{variant:"light",className:"pf-u-py-lg",children:m(En,{isHorizontal:!0,children:e?.map(n=>m(_m,{id:n.id,name:"provider",label:n.displayName,"data-testid":n.id,description:n.description,onChange:()=>{t(n)}},n.id))})}),us=({name:e,type:t,onSelect:n})=>{const{t:r}=Be("authentication"),{adminClient:i}=Wt(),[o,a]=x.exports.useState(),[s,c]=x.exports.useState(),[l,u]=x.exports.useState(10),[d,f]=x.exports.useState(0),[h,p]=x.exports.useState(""),g=Lg();wn(async()=>{switch(t){case"client":return i.authenticationManagement.getClientAuthenticatorProviders();case"form":return i.authenticationManagement.getFormActionProviders();case"condition":return(await i.authenticationManagement.getAuthenticatorProviders()).filter(Qa);case"basic":default:return(await i.authenticationManagement.getAuthenticatorProviders()).filter(_=>!Qa(_))}},v=>c(v),[]);const y=x.exports.useMemo(()=>g(s??[],qg("displayName")).filter(v=>v.displayName?.includes(h)||v.description?.includes(h)).slice(d,d+l+1),[s,h,d,l]);return U(xn,{variant:_n.medium,isOpen:!0,title:r("addStepTo",{name:e}),onClose:()=>n(),actions:[m(fe,{id:"modal-add","data-testid":"modal-add",onClick:()=>n(o),children:r("common:add")},"add"),m(fe,{"data-testid":"cancel",id:"modal-cancel",variant:rt.link,onClick:()=>{n()},children:r("common:cancel")},"cancel")],children:[s&&s.length>l&&m(Tg,{count:y.length||0,first:d,max:l,onNextClick:f,onPreviousClick:f,onPerPageSelect:(v,_)=>{f(v),u(_)},inputGroupName:"search",inputGroupPlaceholder:r("common:search"),inputGroupOnEnter:p,children:m(Zs,{list:y,setValue:a})}),s&&s.length<=l&&m(Zs,{list:s,setValue:a})]})},js=["basic-flow","form-flow"],ls=({name:e,onConfirm:t,onCancel:n})=>{const{t:r}=Be("authentication"),{register:i,control:o,setValue:a,handleSubmit:s,formState:{errors:c}}=dr(),[l,u]=x.exports.useState(!1),[d,f]=x.exports.useState(!1),[h,p]=x.exports.useState(),{adminClient:g}=Wt();return wn(()=>g.authenticationManagement.getFormProviders(),p,[]),x.exports.useEffect(()=>{h?.length===1&&a("provider",h[0].id)},[h]),m(xn,{variant:_n.medium,title:r("addStepTo",{name:e}),onClose:n,actions:[m(fe,{"data-testid":"modal-add",type:"submit",form:"sub-flow-form",children:r("common:add")},"add"),m(fe,{"data-testid":"cancel",variant:rt.link,onClick:n,children:r("common:cancel")},"cancel")],isOpen:!0,children:U(En,{id:"sub-flow-form",onSubmit:s(t),isHorizontal:!0,children:[m(St,{label:r("common:name"),fieldId:"name",helperTextInvalid:r("common:required"),validated:c.name?we.error:we.default,labelIcon:m(Et,{helpText:"authentication-help:name",fieldLabelId:"name"}),isRequired:!0,children:m(Xn,{id:"name","data-testid":"name",validated:c.name?we.error:we.default,...i("name",{required:!0})})}),m(St,{label:r("common:description"),fieldId:"description",labelIcon:m(Et,{helpText:"authentication-help:description",fieldLabelId:"description"}),children:m(Xn,{id:"description","data-testid":"description",...i("description")})}),m(St,{label:r("flowType"),fieldId:"flowType",labelIcon:m(Et,{helpText:"authentication-help:flowType",fieldLabelId:"authentication:flowType"}),children:m(Us,{name:"type",defaultValue:js[0],control:o,render:({field:y})=>m(Ia,{menuAppendTo:"parent",toggleId:"flowType",onToggle:u,onSelect:(v,_)=>{y.onChange(_.toString()),u(!1)},selections:r(`flow-type.${y.value}`),variant:ka.single,isOpen:l,children:js.map(v=>m(Ra,{value:v,selected:v===y.value,children:r(`flow-type.${v}`)},v))})})}),h&&h.length>1&&m(St,{label:r("flowType"),labelIcon:m(Et,{helpText:"authentication-help:flowType",fieldLabelId:"authentication:flowType"}),fieldId:"flowType",children:m(Us,{name:"provider",defaultValue:"",control:o,render:({field:y})=>m(Ia,{menuAppendTo:"parent",toggleId:"provider",onToggle:f,onSelect:(v,_)=>{y.onChange(_.toString()),f(!1)},selections:y.value,variant:ka.single,isOpen:d,children:h.map(v=>m(Ra,{value:v.id,selected:v.displayName===y.value,children:v.displayName},v.id))})})})]})})};const km=["addExecution","addSubFlow"],Rm=({flow:e,onAddExecution:t,onAddFlow:n})=>{const{t:r}=Be("authentication"),[i,o]=x.exports.useState();return U(ae,{children:[i==="addExecution"&&m(us,{name:e.alias,type:e.providerId==="client-flow"?"client":"basic",onSelect:a=>{a&&t(a),o(void 0)}}),i==="addSubFlow"&&m(ls,{name:e.alias,onCancel:()=>o(void 0),onConfirm:a=>{n(a),o(void 0)}}),m(Ag,{message:r("emptyExecution"),instructions:r("emptyExecutionInstructions")}),m("div",{className:"keycloak__empty-execution-state__block",children:km.map(a=>U(Xs,{className:"keycloak__empty-execution-state__help",children:[U(Ws,{flex:{default:"flex_1"},children:[m(Fg,{headingLevel:"h3",size:zg.md,children:r(`${a}Title`)}),m("p",{children:r(`authentication-help:${a}`)})]}),m(Xs,{alignSelf:{default:"alignSelfCenter"},children:m(Ws,{children:m(fe,{"data-testid":a,variant:"tertiary",onClick:()=>o(a),children:r(a)})})})]},a))})]})};const Tm=()=>{const{t:e}=Be("authentication");return m(Pd,{"aria-labelledby":"headerName",id:"header",children:U($d,{children:[m(Dd,{className:"keycloak__authentication__header-drag-button","aria-label":e("common:disabled")}),m(Od,{className:"keycloak__authentication__header",dataListCells:[m(zt,{id:"headerName",children:e("steps")},"step"),m(zt,{children:e("requirement")},"requirement"),m(zt,{},"config")]})]})})};const Am=({id:e,title:t})=>m($g,{"data-testid":t,className:"keycloak__authentication__title",isFlat:!0,children:m(Dg,{"data-id":e,id:`title-id-${e}`,children:t})}),Lm=({flow:e,onChange:t})=>{const{t:n}=Be("authentication"),[r,i]=x.exports.useState(!1),o=e.requirementChoices.map((a,s)=>m(Ra,{value:a,children:n(`requirements.${a}`)},s));return U(ae,{children:[e.requirementChoices&&e.requirementChoices.length>1&&m(Ia,{className:"keycloak__authentication__requirement-dropdown",variant:ka.single,onToggle:i,onSelect:(a,s)=>{e.requirement=s.toString(),t(e),i(!1)},selections:[e.requirement],isOpen:r,children:o}),(!e.requirementChoices||e.requirementChoices.length<=1)&&m(ae,{children:n(`requirements.${e.requirement}`)})]})},qm=({execution:e})=>{const{t}=Be("authentication"),{adminClient:n}=Wt(),{addAlert:r,addError:i}=es(),[o,a]=x.exports.useState(!1),[s,c]=x.exports.useState(),[l,u]=x.exports.useState(),d=dr(),{register:f,setValue:h,handleSubmit:p,formState:{errors:g}}=d,y=_=>{mg(_||{},h)};wn(async()=>{const _=await n.authenticationManagement.getConfigDescription({providerId:e.providerId});let N;return e.authenticationConfig&&(N=await n.authenticationManagement.getConfig({id:e.authenticationConfig})),{configDescription:_,config:N}},({configDescription:_,config:N})=>{u(_),c(N)},[]),x.exports.useEffect(()=>{s&&y(s)},[s]);const v=async _=>{const N=vg(_);try{if(s){const E={id:s.id,alias:s.alias,config:N.config};await n.authenticationManagement.updateConfig(E),c({...E})}else{const E={id:e.id,alias:N.alias,config:N.config},{id:C}=await n.authenticationManagement.createConfig(E);c({...E.config,id:C,alias:E.alias})}r(t("configSaveSuccess"),ut.success),a(!1)}catch(E){i("authentication:configSaveError",E)}};return U(ae,{children:[m(lr,{content:t("common:settings"),children:m(fe,{variant:"plain","aria-label":t("common:settings"),onClick:()=>a(!0),children:m(Sm,{})})}),l&&m(xn,{variant:_n.small,isOpen:o,title:t("executionConfig",{name:l.name}),onClose:()=>a(!1),children:U(En,{id:"execution-config-form",onSubmit:p(v),children:[m(St,{label:t("alias"),fieldId:"alias",helperTextInvalid:t("common:required"),validated:g.alias?we.error:we.default,isRequired:!0,labelIcon:m(Et,{helpText:"authentication-help:alias",fieldLabelId:"authentication:alias"}),children:m(Xn,{isReadOnly:!!s,id:"alias","data-testid":"alias",validated:g.alias?we.error:we.default,...f("alias",{required:!0})})}),m(Fd,{...d,children:m(Og,{properties:l.properties||[]})}),U(Vg,{children:[m(fe,{"data-testid":"save",variant:"primary",type:"submit",children:t("common:save")}),m(fe,{"data-testid":"cancel",variant:rt.link,onClick:()=>{a(!1)},children:t("common:cancel")}),s&&U(fe,{className:"pf-u-ml-4xl","data-testid":"clear",variant:rt.link,onClick:async()=>{await n.authenticationManagement.delConfig({id:s.id}),c(void 0),a(!1)},children:[t("common:clear")," ",m(zd,{})]})]})]})})]})},Pm=({execution:e,onAddExecution:t,onAddFlow:n})=>{const{t:r}=Be("authentication"),{adminClient:i}=Wt(),[o,a]=x.exports.useState(!1),[s,c]=x.exports.useState(),[l,u]=x.exports.useState();return wn(()=>i.authenticationManagement.getFlow({flowId:e.flowId}),({providerId:d})=>u(d),[]),m(lr,{content:r("common:add"),children:U(ae,{children:[m(yg,{isPlain:!0,position:"right","data-testid":`${e.displayName}-edit-dropdown`,isOpen:o,toggle:m(bg,{onToggle:a,"aria-label":r("common:add"),children:m(Bd,{})}),dropdownItems:[m(_t,{onClick:()=>c(l==="form-flow"?"form":"basic"),children:r("addStep")},"addStep"),m(_t,{onClick:()=>c("condition"),children:r("addCondition")},"addCondition"),m(_t,{onClick:()=>c("subFlow"),children:r("addSubFlow")},"addSubFlow")],onSelect:()=>a(!1)}),s&&s!=="subFlow"&&m(us,{name:e.displayName,type:s,onSelect:d=>{d&&t(e,d),c(void 0)}}),s==="subFlow"&&m(ls,{name:e.displayName,onCancel:()=>c(void 0),onConfirm:d=>{n(e,d),c(void 0)}})]})})},$m=({execution:e,onRowChange:t})=>{const{t:n}=Be("authentication"),{register:r,reset:i,handleSubmit:o,formState:{errors:a,isValid:s}}=dr({mode:"onChange",defaultValues:e}),[c,l]=Ta();x.exports.useEffect(()=>i(e),[e]);const u=d=>{t({...e,...d}),l()};return U(ae,{children:[m(lr,{content:n("common:edit"),children:m(fe,{variant:"plain","data-testid":`${e.id}-edit`,"aria-label":n("common:edit"),onClick:l,children:m(Ug,{})})}),c&&m(xn,{title:n("editFlow"),onClose:l,variant:_n.small,actions:[m(fe,{"data-testid":"confirm",type:"submit",form:"edit-flow-form",isDisabled:!s,children:n("edit")},"confirm"),m(fe,{"data-testid":"cancel",variant:rt.link,onClick:l,children:n("common:cancel")},"cancel")],isOpen:!0,children:U(En,{id:"edit-flow-form",onSubmit:o(u),isHorizontal:!0,children:[m(St,{label:n("common:name"),fieldId:"name",helperTextInvalid:n("common:required"),validated:a.displayName?we.error:we.default,labelIcon:m(Et,{helpText:"authentication-help:name",fieldLabelId:"name"}),isRequired:!0,children:m(Xn,{id:"name","data-testid":"displayName",validated:a.displayName?we.error:we.default,...r("displayName",{required:!0}),isRequired:!0})}),m(St,{label:n("common:description"),fieldId:"kc-description",labelIcon:m(Et,{helpText:"authentication-help:description",fieldLabelId:"description"}),validated:a.description?we.error:we.default,helperTextInvalid:a.description?.message,children:m(Gg,{id:"kc-description","data-testid":"description",validated:a.description?we.error:we.default,...r("description",{maxLength:{value:255,message:n("common:maxLength",{length:255})}})})})]})})]})};const cf=({builtIn:e,execution:t,onRowClick:n,onRowChange:r,onAddExecution:i,onAddFlow:o,onDelete:a})=>{const{t:s}=Be("authentication"),c=!!t.executionList?.length;return U(ae,{children:[m(Pd,{className:"keycloak__authentication__flow-item",id:t.id,isExpanded:!t.isCollapsed,"aria-labelledby":`title-id-${t.id}`,children:U($d,{className:"keycloak__authentication__flow-row","aria-level":t.level+1,role:"heading","aria-labelledby":t.id,children:[m(Jg,{children:m(Dd,{"aria-label":s("common-help:dragHelp")})}),c&&m(rf,{onClick:()=>n(t),isExpanded:!t.isCollapsed,id:`toggle1-${t.id}`,"aria-controls":t.executionList[0].id}),m(Od,{dataListCells:[U(zt,{children:[!t.authenticationFlow&&m(Am,{id:t.id,title:t.displayName},t.id),t.authenticationFlow&&U(ae,{children:[t.displayName," ",m("br",{})," ",m(em,{component:tm.small,children:t.description})]})]},`${t.id}-name`),m(zt,{children:m(Lm,{flow:t,onChange:r})},`${t.id}-requirement`),U(zt,{children:[t.configurable&&m(qm,{execution:t}),t.authenticationFlow&&!e&&U(ae,{children:[m(Pm,{execution:t,onAddExecution:i,onAddFlow:o}),m($m,{execution:t,onRowChange:r})]}),!e&&m(lr,{content:s("common:delete"),children:m(fe,{variant:"plain","data-testid":`${t.displayName}-delete`,"aria-label":s("common:delete"),onClick:()=>a(t),children:m(zd,{})})})]},`${t.id}-config`)]})]})}),!t.isCollapsed&&c&&t.executionList?.map(l=>m(cf,{builtIn:e,execution:l,onRowClick:n,onRowChange:r,onAddExecution:i,onAddFlow:o,onDelete:a},l.id))]})};class uf{oldIndex;newIndex;constructor(t,n){this.oldIndex=t,this.newIndex=n}}class Qs extends uf{parent;constructor(t,n,r){super(t,n),this.parent=r}}class ds{list;expandableList;constructor(t){this.list=t;const n={executionList:[],isCollapsed:!1};this.transformToExpandableList(0,-1,n),this.expandableList=n.executionList}transformToExpandableList(t,n,r){for(let i=t;i<this.list.length;i++){const o=this.list[i],a=o.level||0;if(a<=n)return i-1;const s=this.list[i+1]?.level||0;if(a<s){const l={...o,executionList:[],isCollapsed:!1};i=this.transformToExpandableList(i+1,a,l),r.executionList?.push(l)}else r.executionList?.push(o)}return this.list.length}order(t){let n=[];for(const r of t||this.expandableList)n.push(r),r.executionList&&!r.isCollapsed&&(n=n.concat(this.order(r.executionList)));return n}findExecution(t,n){let r=(n||this.expandableList).find(i=>i.id===t);if(!r){for(const i of n||this.expandableList)if(i.executionList&&(r=this.findExecution(t,i.executionList),r))return r}return r}getParentNodes(t){for(let n=0;n<this.list.length;n++){const r=this.list[n];if(n+1<this.list.length&&this.list[n+1].level>r.level&&r.level+1===t)return r}}getChange(t,n){const r=this.order(),i=n.findIndex(s=>s===t.id),o=r[r.findIndex(s=>s.id===t.id)],a=r[i];if(a.level!==o.level){if(a.level>0){const s=this.getParentNodes(a.level);return new Qs(s?.executionList?.length||0,a.index,s)}return new Qs(this.expandableList.length,a.index)}return new uf(o.index,a.index)}clone(){const t=new ds([]);return t.list=this.list,t.expandableList=this.expandableList,t}}function _e(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=_e(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const Js=e=>{let t;const n=new Set,r=(c,l)=>{const u=typeof c=="function"?c(t):c;if(!Object.is(u,t)){const d=t;t=l??typeof u!="object"?u:Object.assign({},t,u),n.forEach(f=>f(t,d))}},i=()=>t,s={setState:r,getState:i,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The destroy method will be unsupported in the future version. You should use unsubscribe function returned by subscribe. Everything will be garbage collected if store is garbage collected."),n.clear()}};return t=e(r,i,s),s},Dm=e=>e?Js(e):Js;var lf={exports:{}},df={},ff={exports:{}},hf={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ut=x.exports;function Om(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fm=typeof Object.is=="function"?Object.is:Om,zm=Ut.useState,Bm=Ut.useEffect,Hm=Ut.useLayoutEffect,Vm=Ut.useDebugValue;function Gm(e,t){var n=t(),r=zm({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Hm(function(){i.value=n,i.getSnapshot=t,Ar(i)&&o({inst:i})},[e,n,t]),Bm(function(){return Ar(i)&&o({inst:i}),e(function(){Ar(i)&&o({inst:i})})},[e]),Vm(n),n}function Ar(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fm(e,n)}catch{return!0}}function Um(e,t){return t()}var Ym=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Um:Gm;hf.useSyncExternalStore=Ut.useSyncExternalStore!==void 0?Ut.useSyncExternalStore:Ym;(function(e){e.exports=hf})(ff);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pr=x.exports,Km=ff.exports;function Xm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wm=typeof Object.is=="function"?Object.is:Xm,Zm=Km.useSyncExternalStore,jm=pr.useRef,Qm=pr.useEffect,Jm=pr.useMemo,ev=pr.useDebugValue;df.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=jm(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=Jm(function(){function c(h){if(!l){if(l=!0,u=h,h=r(h),i!==void 0&&a.hasValue){var p=a.value;if(i(p,h))return d=p}return d=h}if(p=d,Wm(u,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(u=h,d=g)}var l=!1,u,d,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,i]);var s=Zm(e,o[0],o[1]);return Qm(function(){a.hasValue=!0,a.value=s},[s]),ev(s),s};(function(e){e.exports=df})(lf);const tv=wg(lf.exports),{useSyncExternalStoreWithSelector:nv}=tv;function rv(e,t=e.getState,n){const r=nv(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return x.exports.useDebugValue(r),r}function Ee(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var iv={value:()=>{}};function gr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Gn(n)}function Gn(e){this._=e}function ov(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Gn.prototype=gr.prototype={constructor:Gn,on:function(e,t){var n=this._,r=ov(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=av(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=ec(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ec(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function av(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ec(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=iv,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var La="http://www.w3.org/1999/xhtml";const tc={svg:"http://www.w3.org/2000/svg",xhtml:La,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),tc.hasOwnProperty(t)?{space:tc[t],local:e}:e}function sv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===La&&t.documentElement.namespaceURI===La?t.createElement(e):t.createElementNS(n,e)}}function cv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pf(e){var t=mr(e);return(t.local?cv:sv)(t)}function uv(){}function fs(e){return e==null?uv:function(){return this.querySelector(e)}}function lv(e){typeof e!="function"&&(e=fs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=o[u])&&(l=e.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new ke(r,this._parents)}function dv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fv(){return[]}function gf(e){return e==null?fv:function(){return this.querySelectorAll(e)}}function hv(e){return function(){return dv(e.apply(this,arguments))}}function pv(e){typeof e=="function"?e=hv(e):e=gf(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(e.call(c,c.__data__,l,a)),i.push(c));return new ke(r,i)}function mf(e){return function(){return this.matches(e)}}function vf(e){return function(t){return t.matches(e)}}var gv=Array.prototype.find;function mv(e){return function(){return gv.call(this.children,e)}}function vv(){return this.firstElementChild}function yv(e){return this.select(e==null?vv:mv(typeof e=="function"?e:vf(e)))}var bv=Array.prototype.filter;function wv(){return Array.from(this.children)}function xv(e){return function(){return bv.call(this.children,e)}}function _v(e){return this.selectAll(e==null?wv:xv(typeof e=="function"?e:vf(e)))}function Ev(e){typeof e!="function"&&(e=mf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&s.push(c);return new ke(r,this._parents)}function yf(e){return new Array(e.length)}function Sv(){return new ke(this._enter||this._groups.map(yf),this._parents)}function jn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jn.prototype={constructor:jn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Cv(e){return function(){return e}}function Nv(e,t,n,r,i,o){for(var a=0,s,c=t.length,l=o.length;a<l;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new jn(e,o[a]);for(;a<c;++a)(s=t[a])&&(i[a]=s)}function Mv(e,t,n,r,i,o,a){var s,c,l=new Map,u=t.length,d=o.length,f=new Array(u),h;for(s=0;s<u;++s)(c=t[s])&&(f[s]=h=a.call(c,c.__data__,s,t)+"",l.has(h)?i[s]=c:l.set(h,c));for(s=0;s<d;++s)h=a.call(e,o[s],s,o)+"",(c=l.get(h))?(r[s]=c,c.__data__=o[s],l.delete(h)):n[s]=new jn(e,o[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(i[s]=c)}function Iv(e){return e.__data__}function kv(e,t){if(!arguments.length)return Array.from(this,Iv);var n=t?Mv:Nv,r=this._parents,i=this._groups;typeof e!="function"&&(e=Cv(e));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],d=i[l],f=d.length,h=Rv(e.call(u,u&&u.__data__,l,r)),p=h.length,g=s[l]=new Array(p),y=a[l]=new Array(p),v=c[l]=new Array(f);n(u,d,g,y,v,h,t);for(var _=0,N=0,E,C;_<p;++_)if(E=g[_]){for(_>=N&&(N=_+1);!(C=y[N])&&++N<p;);E._next=C||null}}return a=new ke(a,r),a._enter=s,a._exit=c,a}function Rv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Tv(){return new ke(this._exit||this._groups.map(yf),this._parents)}function Av(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Lv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=new Array(d),h,p=0;p<d;++p)(h=l[p]||u[p])&&(f[p]=h);for(;c<i;++c)s[c]=n[c];return new ke(s,this._parents)}function qv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Pv(e){e||(e=$v);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(t)}return new ke(i,this._parents).order()}function $v(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Dv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ov(){return Array.from(this)}function Fv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function zv(){let e=0;for(const t of this)++e;return e}function Bv(){return!this.node()}function Hv(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function Vv(e){return function(){this.removeAttribute(e)}}function Gv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uv(e,t){return function(){this.setAttribute(e,t)}}function Yv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Kv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Xv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Wv(e,t){var n=mr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Gv:Vv:typeof t=="function"?n.local?Xv:Kv:n.local?Yv:Uv)(n,t))}function bf(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zv(e){return function(){this.style.removeProperty(e)}}function jv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Qv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Jv(e,t,n){return arguments.length>1?this.each((t==null?Zv:typeof t=="function"?Qv:jv)(e,t,n??"")):Yt(this.node(),e)}function Yt(e,t){return e.style.getPropertyValue(t)||bf(e).getComputedStyle(e,null).getPropertyValue(t)}function e0(e){return function(){delete this[e]}}function t0(e,t){return function(){this[e]=t}}function n0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function r0(e,t){return arguments.length>1?this.each((t==null?e0:typeof t=="function"?n0:t0)(e,t)):this.node()[e]}function wf(e){return e.trim().split(/^|\s+/)}function hs(e){return e.classList||new xf(e)}function xf(e){this._node=e,this._names=wf(e.getAttribute("class")||"")}xf.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _f(e,t){for(var n=hs(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ef(e,t){for(var n=hs(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function i0(e){return function(){_f(this,e)}}function o0(e){return function(){Ef(this,e)}}function a0(e,t){return function(){(t.apply(this,arguments)?_f:Ef)(this,e)}}function s0(e,t){var n=wf(e+"");if(arguments.length<2){for(var r=hs(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?a0:t?i0:o0)(n,t))}function c0(){this.textContent=""}function u0(e){return function(){this.textContent=e}}function l0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function d0(e){return arguments.length?this.each(e==null?c0:(typeof e=="function"?l0:u0)(e)):this.node().textContent}function f0(){this.innerHTML=""}function h0(e){return function(){this.innerHTML=e}}function p0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function g0(e){return arguments.length?this.each(e==null?f0:(typeof e=="function"?p0:h0)(e)):this.node().innerHTML}function m0(){this.nextSibling&&this.parentNode.appendChild(this)}function v0(){return this.each(m0)}function y0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function b0(){return this.each(y0)}function w0(e){var t=typeof e=="function"?e:pf(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function x0(){return null}function _0(e,t){var n=typeof e=="function"?e:pf(e),r=t==null?x0:typeof t=="function"?t:fs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function E0(){var e=this.parentNode;e&&e.removeChild(this)}function S0(){return this.each(E0)}function C0(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function N0(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function M0(e){return this.select(e?N0:C0)}function I0(e){return arguments.length?this.property("__data__",e):this.node().__data__}function k0(e){return function(t){e.call(this,t,this.__data__)}}function R0(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function T0(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function A0(e,t,n){return function(){var r=this.__on,i,o=k0(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function L0(e,t,n){var r=R0(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?A0:T0,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function Sf(e,t,n){var r=bf(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function q0(e,t){return function(){return Sf(this,e,t)}}function P0(e,t){return function(){return Sf(this,e,t.apply(this,arguments))}}function $0(e,t){return this.each((typeof t=="function"?P0:q0)(e,t))}function*D0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Cf=[null];function ke(e,t){this._groups=e,this._parents=t}function kn(){return new ke([[document.documentElement]],Cf)}function O0(){return this}ke.prototype=kn.prototype={constructor:ke,select:lv,selectAll:pv,selectChild:yv,selectChildren:_v,filter:Ev,data:kv,enter:Sv,exit:Tv,join:Av,merge:Lv,selection:O0,order:qv,sort:Pv,call:Dv,nodes:Ov,node:Fv,size:zv,empty:Bv,each:Hv,attr:Wv,style:Jv,property:r0,classed:s0,text:d0,html:g0,raise:v0,lower:b0,append:w0,insert:_0,remove:S0,clone:M0,datum:I0,on:L0,dispatch:$0,[Symbol.iterator]:D0};function Le(e){return typeof e=="string"?new ke([[document.querySelector(e)]],[document.documentElement]):new ke([[e]],Cf)}function F0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Oe(e,t){if(e=F0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const z0={passive:!1},fn={capture:!0,passive:!1};function Lr(e){e.stopImmediatePropagation()}function Bt(e){e.preventDefault(),e.stopImmediatePropagation()}function Nf(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",Bt,fn);"onselectstart"in t?n.on("selectstart.drag",Bt,fn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Mf(e,t){var n=e.document.documentElement,r=Le(e).on("dragstart.drag",null);t&&(r.on("click.drag",Bt,fn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ln=e=>()=>e;function qa(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}qa.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function B0(e){return!e.ctrlKey&&!e.button}function H0(){return this.parentNode}function V0(e,t){return t??{x:e.x,y:e.y}}function G0(){return navigator.maxTouchPoints||"ontouchstart"in this}function U0(){var e=B0,t=H0,n=V0,r=G0,i={},o=gr("start","drag","end"),a=0,s,c,l,u,d=0;function f(E){E.on("mousedown.drag",h).filter(r).on("touchstart.drag",y).on("touchmove.drag",v,z0).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(E,C){if(!(u||!e.call(this,E,C))){var M=N(this,t.call(this,E,C),E,C,"mouse");!M||(Le(E.view).on("mousemove.drag",p,fn).on("mouseup.drag",g,fn),Nf(E.view),Lr(E),l=!1,s=E.clientX,c=E.clientY,M("start",E))}}function p(E){if(Bt(E),!l){var C=E.clientX-s,M=E.clientY-c;l=C*C+M*M>d}i.mouse("drag",E)}function g(E){Le(E.view).on("mousemove.drag mouseup.drag",null),Mf(E.view,l),Bt(E),i.mouse("end",E)}function y(E,C){if(!!e.call(this,E,C)){var M=E.changedTouches,T=t.call(this,E,C),$=M.length,P,z;for(P=0;P<$;++P)(z=N(this,T,E,C,M[P].identifier,M[P]))&&(Lr(E),z("start",E,M[P]))}}function v(E){var C=E.changedTouches,M=C.length,T,$;for(T=0;T<M;++T)($=i[C[T].identifier])&&(Bt(E),$("drag",E,C[T]))}function _(E){var C=E.changedTouches,M=C.length,T,$;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),T=0;T<M;++T)($=i[C[T].identifier])&&(Lr(E),$("end",E,C[T]))}function N(E,C,M,T,$,P){var z=o.copy(),D=Oe(P||M,C),A,B,b;if((b=n.call(E,new qa("beforestart",{sourceEvent:M,target:f,identifier:$,active:a,x:D[0],y:D[1],dx:0,dy:0,dispatch:z}),T))!=null)return A=b.x-D[0]||0,B=b.y-D[1]||0,function k(S,w,I){var R=D,q;switch(S){case"start":i[$]=k,q=a++;break;case"end":delete i[$],--a;case"drag":D=Oe(I||w,C),q=a;break}z.call(S,E,new qa(S,{sourceEvent:w,subject:b,target:f,identifier:$,active:q,x:D[0]+A,y:D[1]+B,dx:D[0]-R[0],dy:D[1]-R[1],dispatch:z}),T)}}return f.filter=function(E){return arguments.length?(e=typeof E=="function"?E:Ln(!!E),f):e},f.container=function(E){return arguments.length?(t=typeof E=="function"?E:Ln(E),f):t},f.subject=function(E){return arguments.length?(n=typeof E=="function"?E:Ln(E),f):n},f.touchable=function(E){return arguments.length?(r=typeof E=="function"?E:Ln(!!E),f):r},f.on=function(){var E=o.on.apply(o,arguments);return E===o?f:E},f.clickDistance=function(E){return arguments.length?(d=(E=+E)*E,f):Math.sqrt(d)},f}function ps(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function If(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Rn(){}var hn=.7,Qn=1/hn,Ht="\\s*([+-]?\\d+)\\s*",pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y0=/^#([0-9a-f]{3,8})$/,K0=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),X0=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),W0=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${pn}\\)$`),Z0=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${pn}\\)$`),j0=new RegExp(`^hsl\\(${pn},${Ye},${Ye}\\)$`),Q0=new RegExp(`^hsla\\(${pn},${Ye},${Ye},${pn}\\)$`),nc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ps(Rn,gn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rc,formatHex:rc,formatHex8:J0,formatHsl:ey,formatRgb:ic,toString:ic});function rc(){return this.rgb().formatHex()}function J0(){return this.rgb().formatHex8()}function ey(){return kf(this).formatHsl()}function ic(){return this.rgb().formatRgb()}function gn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Y0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?oc(t):n===3?new Ce(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=K0.exec(e))?new Ce(t[1],t[2],t[3],1):(t=X0.exec(e))?new Ce(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=W0.exec(e))?qn(t[1],t[2],t[3],t[4]):(t=Z0.exec(e))?qn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=j0.exec(e))?cc(t[1],t[2]/100,t[3]/100,1):(t=Q0.exec(e))?cc(t[1],t[2]/100,t[3]/100,t[4]):nc.hasOwnProperty(e)?oc(nc[e]):e==="transparent"?new Ce(NaN,NaN,NaN,0):null}function oc(e){return new Ce(e>>16&255,e>>8&255,e&255,1)}function qn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ce(e,t,n,r)}function ty(e){return e instanceof Rn||(e=gn(e)),e?(e=e.rgb(),new Ce(e.r,e.g,e.b,e.opacity)):new Ce}function Pa(e,t,n,r){return arguments.length===1?ty(e):new Ce(e,t,n,r??1)}function Ce(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ps(Ce,Pa,If(Rn,{brighter(e){return e=e==null?Qn:Math.pow(Qn,e),new Ce(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hn:Math.pow(hn,e),new Ce(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ce(It(this.r),It(this.g),It(this.b),Jn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ac,formatHex:ac,formatHex8:ny,formatRgb:sc,toString:sc}));function ac(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function ny(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function sc(){const e=Jn(this.opacity);return`${e===1?"rgb(":"rgba("}${It(this.r)}, ${It(this.g)}, ${It(this.b)}${e===1?")":`, ${e})`}`}function Jn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function It(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ct(e){return e=It(e),(e<16?"0":"")+e.toString(16)}function cc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fe(e,t,n,r)}function kf(e){if(e instanceof Fe)return new Fe(e.h,e.s,e.l,e.opacity);if(e instanceof Rn||(e=gn(e)),!e)return new Fe;if(e instanceof Fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new Fe(a,s,c,e.opacity)}function ry(e,t,n,r){return arguments.length===1?kf(e):new Fe(e,t,n,r??1)}function Fe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ps(Fe,ry,If(Rn,{brighter(e){return e=e==null?Qn:Math.pow(Qn,e),new Fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hn:Math.pow(hn,e),new Fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ce(qr(e>=240?e-240:e+120,i,r),qr(e,i,r),qr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Fe(uc(this.h),Pn(this.s),Pn(this.l),Jn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jn(this.opacity);return`${e===1?"hsl(":"hsla("}${uc(this.h)}, ${Pn(this.s)*100}%, ${Pn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uc(e){return e=(e||0)%360,e<0?e+360:e}function Pn(e){return Math.max(0,Math.min(1,e||0))}function qr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Rf=e=>()=>e;function iy(e,t){return function(n){return e+n*t}}function oy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ay(e){return(e=+e)==1?Tf:function(t,n){return n-t?oy(t,n,e):Rf(isNaN(t)?n:t)}}function Tf(e,t){var n=t-e;return n?iy(e,n):Rf(isNaN(e)?t:e)}const lc=function e(t){var n=ay(t);function r(i,o){var a=n((i=Pa(i)).r,(o=Pa(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=Tf(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function lt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var $a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pr=new RegExp($a.source,"g");function sy(e){return function(){return e}}function cy(e){return function(t){return e(t)+""}}function uy(e,t){var n=$a.lastIndex=Pr.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=$a.exec(e))&&(i=Pr.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:lt(r,i)})),n=Pr.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?cy(c[0].x):sy(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)s[(d=c[u]).i]=d.x(l);return s.join("")})}var dc=180/Math.PI,Da={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Af(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*dc,skewX:Math.atan(c)*dc,scaleX:a,scaleY:s}}var $n;function ly(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Da:Af(t.a,t.b,t.c,t.d,t.e,t.f)}function dy(e){return e==null||($n||($n=document.createElementNS("http://www.w3.org/2000/svg","g")),$n.setAttribute("transform",e),!(e=$n.transform.baseVal.consolidate()))?Da:(e=e.matrix,Af(e.a,e.b,e.c,e.d,e.e,e.f))}function Lf(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,d,f,h,p){if(l!==d||u!==f){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:lt(l,d)},{i:g-2,x:lt(u,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:lt(l,u)})):u&&d.push(i(d)+"rotate("+u+r)}function s(l,u,d,f){l!==u?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:lt(l,u)}):u&&d.push(i(d)+"skewX("+u+r)}function c(l,u,d,f,h,p){if(l!==d||u!==f){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:lt(l,d)},{i:g-2,x:lt(u,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,d,f),a(l.rotate,u.rotate,d,f),s(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(h){for(var p=-1,g=f.length,y;++p<g;)d[(y=f[p]).i]=y.x(h);return d.join("")}}}var fy=Lf(ly,"px, ","px)","deg)"),hy=Lf(dy,", ",")",")"),py=1e-12;function fc(e){return((e=Math.exp(e))+1/e)/2}function gy(e){return((e=Math.exp(e))-1/e)/2}function my(e){return((e=Math.exp(2*e))-1)/(e+1)}const vy=function e(t,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],d=a[1],f=a[2],h=u-s,p=d-c,g=h*h+p*p,y,v;if(g<py)v=Math.log(f/l)/t,y=function(T){return[s+T*h,c+T*p,l*Math.exp(t*T*v)]};else{var _=Math.sqrt(g),N=(f*f-l*l+r*g)/(2*l*n*_),E=(f*f-l*l-r*g)/(2*f*n*_),C=Math.log(Math.sqrt(N*N+1)-N),M=Math.log(Math.sqrt(E*E+1)-E);v=(M-C)/t,y=function(T){var $=T*v,P=fc(C),z=l/(n*_)*(P*my(t*$+C)-gy(C));return[s+z*h,c+z*p,l*P/fc(t*$+C)]}}return y.duration=v*1e3*t/Math.SQRT2,y}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},i}(Math.SQRT2,2,4);var Kt=0,an=0,Jt=0,qf=1e3,er,sn,tr=0,At=0,vr=0,mn=typeof performance=="object"&&performance.now?performance:Date,Pf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gs(){return At||(Pf(yy),At=mn.now()+vr)}function yy(){At=0}function nr(){this._call=this._time=this._next=null}nr.prototype=$f.prototype={constructor:nr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?gs():+n)+(t==null?0:+t),!this._next&&sn!==this&&(sn?sn._next=this:er=this,sn=this),this._call=e,this._time=n,Oa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oa())}};function $f(e,t,n){var r=new nr;return r.restart(e,t,n),r}function by(){gs(),++Kt;for(var e=er,t;e;)(t=At-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Kt}function hc(){At=(tr=mn.now())+vr,Kt=an=0;try{by()}finally{Kt=0,xy(),At=0}}function wy(){var e=mn.now(),t=e-tr;t>qf&&(vr-=t,tr=e)}function xy(){for(var e,t=er,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:er=n);sn=e,Oa(r)}function Oa(e){if(!Kt){an&&(an=clearTimeout(an));var t=e-At;t>24?(e<1/0&&(an=setTimeout(hc,e-mn.now()-vr)),Jt&&(Jt=clearInterval(Jt))):(Jt||(tr=mn.now(),Jt=setInterval(wy,qf)),Kt=1,Pf(hc))}}function pc(e,t,n){var r=new nr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var _y=gr("start","end","cancel","interrupt"),Ey=[],Df=0,gc=1,Fa=2,Un=3,mc=4,za=5,Yn=6;function yr(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Sy(e,n,{name:t,index:r,group:i,on:_y,tween:Ey,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Df})}function ms(e,t){var n=He(e,t);if(n.state>Df)throw new Error("too late; already scheduled");return n}function Ke(e,t){var n=He(e,t);if(n.state>Un)throw new Error("too late; already running");return n}function He(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Sy(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=$f(o,0,n.time);function o(l){n.state=gc,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,d,f,h;if(n.state!==gc)return c();for(u in r)if(h=r[u],h.name===n.name){if(h.state===Un)return pc(a);h.state===mc?(h.state=Yn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=Yn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(pc(function(){n.state===Un&&(n.state=mc,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Fa,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Fa){for(n.state=Un,i=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=za,1),d=-1,f=i.length;++d<f;)i[d].call(e,u);n.state===za&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Yn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Kn(e,t){var n=e.__transition,r,i,o=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Fa&&r.state<za,r.state=Yn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function Cy(e){return this.each(function(){Kn(this,e)})}function Ny(e,t){var n,r;return function(){var i=Ke(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function My(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ke(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function Iy(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=He(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?Ny:My)(n,e,t))}function vs(e,t,n){var r=e._id;return e.each(function(){var i=Ke(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return He(i,r).value[t]}}function Of(e,t){var n;return(typeof t=="number"?lt:t instanceof gn?lc:(n=gn(t))?(t=n,lc):uy)(e,t)}function ky(e){return function(){this.removeAttribute(e)}}function Ry(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ty(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function Ay(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function Ly(e,t,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s)))}}function qy(e,t,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s)))}}function Py(e,t){var n=mr(e),r=n==="transform"?hy:Of;return this.attrTween(e,typeof t=="function"?(n.local?qy:Ly)(n,r,vs(this,"attr."+e,t)):t==null?(n.local?Ry:ky)(n):(n.local?Ay:Ty)(n,r,t))}function $y(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Dy(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Oy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Dy(e,o)),n}return i._value=t,i}function Fy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&$y(e,o)),n}return i._value=t,i}function zy(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=mr(e);return this.tween(n,(r.local?Oy:Fy)(r,t))}function By(e,t){return function(){ms(this,e).delay=+t.apply(this,arguments)}}function Hy(e,t){return t=+t,function(){ms(this,e).delay=t}}function Vy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?By:Hy)(t,e)):He(this.node(),t).delay}function Gy(e,t){return function(){Ke(this,e).duration=+t.apply(this,arguments)}}function Uy(e,t){return t=+t,function(){Ke(this,e).duration=t}}function Yy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Gy:Uy)(t,e)):He(this.node(),t).duration}function Ky(e,t){if(typeof t!="function")throw new Error;return function(){Ke(this,e).ease=t}}function Xy(e){var t=this._id;return arguments.length?this.each(Ky(t,e)):He(this.node(),t).ease}function Wy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ke(this,e).ease=n}}function Zy(e){if(typeof e!="function")throw new Error;return this.each(Wy(this._id,e))}function jy(e){typeof e!="function"&&(e=mf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&s.push(c);return new it(r,this._parents,this._name,this._id)}function Qy(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=t[s],l=n[s],u=c.length,d=a[s]=new Array(u),f,h=0;h<u;++h)(f=c[h]||l[h])&&(d[h]=f);for(;s<r;++s)a[s]=t[s];return new it(a,this._parents,this._name,this._id)}function Jy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function eb(e,t,n){var r,i,o=Jy(t)?ms:Ke;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function tb(e,t){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(e):this.each(eb(n,e,t))}function nb(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function rb(){return this.on("end.remove",nb(this._id))}function ib(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fs(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,yr(l[f],t,n,f,l,He(u,n)));return new it(o,this._parents,t,n)}function ob(e){var t=this._name,n=this._id;typeof e!="function"&&(e=gf(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),h,p=He(u,n),g=0,y=f.length;g<y;++g)(h=f[g])&&yr(h,t,n,g,f,p);o.push(f),a.push(u)}return new it(o,a,t,n)}var ab=kn.prototype.constructor;function sb(){return new ab(this._groups,this._parents)}function cb(e,t){var n,r,i;return function(){var o=Yt(this,e),a=(this.style.removeProperty(e),Yt(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function Ff(e){return function(){this.style.removeProperty(e)}}function ub(e,t,n){var r,i=n+"",o;return function(){var a=Yt(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function lb(e,t,n){var r,i,o;return function(){var a=Yt(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Yt(this,e))),a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s))}}function db(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var c=Ke(this,e),l=c.on,u=c.value[o]==null?s||(s=Ff(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),c.on=r}}function fb(e,t,n){var r=(e+="")=="transform"?fy:Of;return t==null?this.styleTween(e,cb(e,r)).on("end.style."+e,Ff(e)):typeof t=="function"?this.styleTween(e,lb(e,r,vs(this,"style."+e,t))).each(db(this._id,e)):this.styleTween(e,ub(e,r,t),n).on("end.style."+e,null)}function hb(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function pb(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&hb(e,a,n)),r}return o._value=t,o}function gb(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,pb(e,t,n??""))}function mb(e){return function(){this.textContent=e}}function vb(e){return function(){var t=e(this);this.textContent=t??""}}function yb(e){return this.tween("text",typeof e=="function"?vb(vs(this,"text",e)):mb(e==null?"":e+""))}function bb(e){return function(t){this.textContent=e.call(this,t)}}function wb(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&bb(i)),t}return r._value=e,r}function xb(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,wb(e))}function _b(){for(var e=this._name,t=this._id,n=zf(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=He(c,t);yr(c,e,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new it(r,this._parents,e,n)}function Eb(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var l=Ke(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),i===0&&o()})}var Sb=0;function it(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zf(){return++Sb}var Ze=kn.prototype;it.prototype={constructor:it,select:ib,selectAll:ob,selectChild:Ze.selectChild,selectChildren:Ze.selectChildren,filter:jy,merge:Qy,selection:sb,transition:_b,call:Ze.call,nodes:Ze.nodes,node:Ze.node,size:Ze.size,empty:Ze.empty,each:Ze.each,on:tb,attr:Py,attrTween:zy,style:fb,styleTween:gb,text:yb,textTween:xb,remove:rb,tween:Iy,delay:Vy,duration:Yy,ease:Xy,easeVarying:Zy,end:Eb,[Symbol.iterator]:Ze[Symbol.iterator]};function Cb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Nb={time:null,delay:0,duration:250,ease:Cb};function Mb(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ib(e){var t,n;e instanceof it?(t=e._id,e=e._name):(t=zf(),(n=Nb).time=gs(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&yr(c,e,t,l,a,n||Mb(c,t));return new it(r,this._parents,e,t)}kn.prototype.interrupt=Cy;kn.prototype.transition=Ib;const Dn=e=>()=>e;function kb(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Qe(e,t,n){this.k=e,this.x=t,this.y=n}Qe.prototype={constructor:Qe,scale:function(e){return e===1?this:new Qe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Qe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var nt=new Qe(1,0,0);Qe.prototype;function $r(e){e.stopImmediatePropagation()}function en(e){e.preventDefault(),e.stopImmediatePropagation()}function Rb(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Tb(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function vc(){return this.__zoom||nt}function Ab(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Lb(){return navigator.maxTouchPoints||"ontouchstart"in this}function qb(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Bf(){var e=Rb,t=Tb,n=qb,r=Ab,i=Lb,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=vy,l=gr("start","zoom","end"),u,d,f,h=500,p=150,g=0,y=10;function v(b){b.property("__zoom",vc).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",D).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(b,k,S,w){var I=b.selection?b.selection():b;I.property("__zoom",vc),b!==I?C(b,k,S,w):I.interrupt().each(function(){M(this,arguments).event(w).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},v.scaleBy=function(b,k,S,w){v.scaleTo(b,function(){var I=this.__zoom.k,R=typeof k=="function"?k.apply(this,arguments):k;return I*R},S,w)},v.scaleTo=function(b,k,S,w){v.transform(b,function(){var I=t.apply(this,arguments),R=this.__zoom,q=S==null?E(I):typeof S=="function"?S.apply(this,arguments):S,F=R.invert(q),H=typeof k=="function"?k.apply(this,arguments):k;return n(N(_(R,H),q,F),I,a)},S,w)},v.translateBy=function(b,k,S,w){v.transform(b,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),a)},null,w)},v.translateTo=function(b,k,S,w,I){v.transform(b,function(){var R=t.apply(this,arguments),q=this.__zoom,F=w==null?E(R):typeof w=="function"?w.apply(this,arguments):w;return n(nt.translate(F[0],F[1]).scale(q.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof S=="function"?-S.apply(this,arguments):-S),R,a)},w,I)};function _(b,k){return k=Math.max(o[0],Math.min(o[1],k)),k===b.k?b:new Qe(k,b.x,b.y)}function N(b,k,S){var w=k[0]-S[0]*b.k,I=k[1]-S[1]*b.k;return w===b.x&&I===b.y?b:new Qe(b.k,w,I)}function E(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function C(b,k,S,w){b.on("start.zoom",function(){M(this,arguments).event(w).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(w).end()}).tween("zoom",function(){var I=this,R=arguments,q=M(I,R).event(w),F=t.apply(I,R),H=S==null?E(F):typeof S=="function"?S.apply(I,R):S,X=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),Y=I.__zoom,ee=typeof k=="function"?k.apply(I,R):k,ie=c(Y.invert(H).concat(X/Y.k),ee.invert(H).concat(X/ee.k));return function(K){if(K===1)K=ee;else{var Q=ie(K),V=X/Q[2];K=new Qe(V,H[0]-Q[0]*V,H[1]-Q[1]*V)}q.zoom(null,K)}})}function M(b,k,S){return!S&&b.__zooming||new T(b,k)}function T(b,k){this.that=b,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,k),this.taps=0}T.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,k){return this.mouse&&b!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var k=Le(this.that).datum();l.call(b,this.that,new kb(b,{sourceEvent:this.sourceEvent,target:v,type:b,transform:this.that.__zoom,dispatch:l}),k)}};function $(b,...k){if(!e.apply(this,arguments))return;var S=M(this,k).event(b),w=this.__zoom,I=Math.max(o[0],Math.min(o[1],w.k*Math.pow(2,r.apply(this,arguments)))),R=Oe(b);if(S.wheel)(S.mouse[0][0]!==R[0]||S.mouse[0][1]!==R[1])&&(S.mouse[1]=w.invert(S.mouse[0]=R)),clearTimeout(S.wheel);else{if(w.k===I)return;S.mouse=[R,w.invert(R)],Kn(this),S.start()}en(b),S.wheel=setTimeout(q,p),S.zoom("mouse",n(N(_(w,I),S.mouse[0],S.mouse[1]),S.extent,a));function q(){S.wheel=null,S.end()}}function P(b,...k){if(f||!e.apply(this,arguments))return;var S=b.currentTarget,w=M(this,k,!0).event(b),I=Le(b.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",X,!0),R=Oe(b,S),q=b.clientX,F=b.clientY;Nf(b.view),$r(b),w.mouse=[R,this.__zoom.invert(R)],Kn(this),w.start();function H(Y){if(en(Y),!w.moved){var ee=Y.clientX-q,ie=Y.clientY-F;w.moved=ee*ee+ie*ie>g}w.event(Y).zoom("mouse",n(N(w.that.__zoom,w.mouse[0]=Oe(Y,S),w.mouse[1]),w.extent,a))}function X(Y){I.on("mousemove.zoom mouseup.zoom",null),Mf(Y.view,w.moved),en(Y),w.event(Y).end()}}function z(b,...k){if(!!e.apply(this,arguments)){var S=this.__zoom,w=Oe(b.changedTouches?b.changedTouches[0]:b,this),I=S.invert(w),R=S.k*(b.shiftKey?.5:2),q=n(N(_(S,R),w,I),t.apply(this,k),a);en(b),s>0?Le(this).transition().duration(s).call(C,q,w,b):Le(this).call(v.transform,q,w,b)}}function D(b,...k){if(!!e.apply(this,arguments)){var S=b.touches,w=S.length,I=M(this,k,b.changedTouches.length===w).event(b),R,q,F,H;for($r(b),q=0;q<w;++q)F=S[q],H=Oe(F,this),H=[H,this.__zoom.invert(H),F.identifier],I.touch0?!I.touch1&&I.touch0[2]!==H[2]&&(I.touch1=H,I.taps=0):(I.touch0=H,R=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),R&&(I.taps<2&&(d=H[0],u=setTimeout(function(){u=null},h)),Kn(this),I.start())}}function A(b,...k){if(!!this.__zooming){var S=M(this,k).event(b),w=b.changedTouches,I=w.length,R,q,F,H;for(en(b),R=0;R<I;++R)q=w[R],F=Oe(q,this),S.touch0&&S.touch0[2]===q.identifier?S.touch0[0]=F:S.touch1&&S.touch1[2]===q.identifier&&(S.touch1[0]=F);if(q=S.that.__zoom,S.touch1){var X=S.touch0[0],Y=S.touch0[1],ee=S.touch1[0],ie=S.touch1[1],K=(K=ee[0]-X[0])*K+(K=ee[1]-X[1])*K,Q=(Q=ie[0]-Y[0])*Q+(Q=ie[1]-Y[1])*Q;q=_(q,Math.sqrt(K/Q)),F=[(X[0]+ee[0])/2,(X[1]+ee[1])/2],H=[(Y[0]+ie[0])/2,(Y[1]+ie[1])/2]}else if(S.touch0)F=S.touch0[0],H=S.touch0[1];else return;S.zoom("touch",n(N(q,F,H),S.extent,a))}}function B(b,...k){if(!!this.__zooming){var S=M(this,k).event(b),w=b.changedTouches,I=w.length,R,q;for($r(b),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),R=0;R<I;++R)q=w[R],S.touch0&&S.touch0[2]===q.identifier?delete S.touch0:S.touch1&&S.touch1[2]===q.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(q=Oe(q,this),Math.hypot(d[0]-q[0],d[1]-q[1])<y)){var F=Le(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return v.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:Dn(+b),v):r},v.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Dn(!!b),v):e},v.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:Dn(!!b),v):i},v.extent=function(b){return arguments.length?(t=typeof b=="function"?b:Dn([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),v):t},v.scaleExtent=function(b){return arguments.length?(o[0]=+b[0],o[1]=+b[1],v):[o[0],o[1]]},v.translateExtent=function(b){return arguments.length?(a[0][0]=+b[0][0],a[1][0]=+b[1][0],a[0][1]=+b[0][1],a[1][1]=+b[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(b){return arguments.length?(n=b,v):n},v.duration=function(b){return arguments.length?(s=+b,v):s},v.interpolate=function(b){return arguments.length?(c=b,v):c},v.on=function(){var b=l.on.apply(l,arguments);return b===l?v:b},v.clickDistance=function(b){return arguments.length?(g=(b=+b)*b,v):Math.sqrt(g)},v.tapDistance=function(b){return arguments.length?(y=+b,v):y},v}const br=x.exports.createContext(null),Pb=br.Provider,mt={"001":()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001","002":()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.","003":e=>`Node type "${e}" not found. Using fallback type "default".`,"004":()=>"The React Flow parent container needs a width and a height to render the graph.","005":()=>"Only child nodes can use a parent extent.","006":()=>"Can't create edge. An edge needs a source and a target.","007":e=>`The old edge with id=${e} does not exist.`,"009":e=>`Marker type "${e}" doesn't exist.`,"008":(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,"010":()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.","011":e=>`Edge type "${e}" not found. Using fallback type "default".`},Hf=mt["001"]();function ue(e,t){const n=x.exports.useContext(br);if(n===null)throw new Error(Hf);return rv(n,e,t)}const pe=()=>{const e=x.exports.useContext(br);if(e===null)throw new Error(Hf);return x.exports.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},$b=e=>e.userSelectionActive?"none":"all";function ys({position:e,children:t,className:n,style:r,...i}){const o=ue($b),a=`${e}`.split("-");return m("div",{className:_e(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},...i,children:t})}function Db({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:m(ys,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Ob=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u})=>{const d=x.exports.useRef(null),[f,h]=x.exports.useState({x:0,y:0,width:0,height:0}),p=_e(["react-flow__edge-textwrapper",l]);return x.exports.useEffect(()=>{if(d.current){const g=d.current.getBBox();h({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:U("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...u,children:[i&&m("rect",{width:f.width+2*a[0],x:-a[0],y:-a[1],height:f.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:s,ry:s}),m("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r,children:n}),c]})};var Fb=x.exports.memo(Ob);const bs=e=>({width:e.offsetWidth,height:e.offsetHeight}),Xt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ws=(e={x:0,y:0},t)=>({x:Xt(e.x,t[0][0],t[1][0]),y:Xt(e.y,t[0][1],t[1][1])}),yc=(e,t,n)=>e<t?Xt(Math.abs(e-t),1,50)/50:e>n?-Xt(Math.abs(e-n),1,50)/50:0,Vf=(e,t)=>{const n=yc(e.x,35,t.width-35)*20,r=yc(e.y,35,t.height-35)*20;return[n,r]},Gf=e=>e.getRootNode?.()||window?.document,Uf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),rr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Yf=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),bc=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),zb=(e,t)=>Yf(Uf(rr(e),rr(t))),Ba=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Bb=e=>qe(e.width)&&qe(e.height)&&qe(e.x)&&qe(e.y),qe=e=>!isNaN(e)&&isFinite(e),he=Symbol.for("internals"),Kf=["Enter"," ","Escape"],Hb=(e,t)=>{},Vb=e=>"nativeEvent"in e;function Ha(e){const n=(Vb(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return e.ctrlKey||e.metaKey||e.shiftKey?!1:["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Xf=e=>"clientX"in e,kt=(e,t)=>{const n=Xf(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},Tn=({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:c,style:l,markerEnd:u,markerStart:d,interactionWidth:f=20})=>U(ae,{children:[m("path",{style:l,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:d}),f&&m("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),r&&qe(t)&&qe(n)?m(Fb,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:c}):null]});Tn.displayName="BaseEdge";const Gb=(e,t)=>typeof t<"u"&&t?`url(#${t})`:typeof e<"u"?`url(#react-flow__${e})`:"none";function tn(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function Wf({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[o,s,i,a]}function Zf({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){const c=e*.125+i*.375+a*.375+n*.125,l=t*.125+o*.375+s*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}var Lt;(function(e){e.Strict="strict",e.Loose="loose"})(Lt||(Lt={}));var Vt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Vt||(Vt={}));var vn;(function(e){e.Partial="partial",e.Full="full"})(vn||(vn={}));var ft;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ft||(ft={}));var ir;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ir||(ir={}));var O;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(O||(O={}));function wc({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===O.Left||e===O.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function jf({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:r,targetY:i,targetPosition:o=O.Top}){const[a,s]=wc({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=wc({pos:o,x1:r,y1:i,x2:e,y2:t}),[u,d,f,h]=Zf({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${a},${s} ${c},${l} ${r},${i}`,u,d,f,h]}const xs=x.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=O.Bottom,targetPosition:o=O.Top,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})=>{const[y,v,_]=jf({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return m(Tn,{path:y,labelX:v,labelY:_,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})});xs.displayName="SimpleBezierEdge";const xc={[O.Left]:{x:-1,y:0},[O.Right]:{x:1,y:0},[O.Top]:{x:0,y:-1},[O.Bottom]:{x:0,y:1}},Ub=({source:e,sourcePosition:t=O.Bottom,target:n})=>t===O.Left||t===O.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},_c=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Yb({source:e,sourcePosition:t=O.Bottom,target:n,targetPosition:r=O.Top,center:i,offset:o}){const a=xc[t],s=xc[r],c={x:e.x+a.x*o,y:e.y+a.y*o},l={x:n.x+s.x*o,y:n.y+s.y*o},u=Ub({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",f=u[d];let h=[],p,g;const[y,v,_,N]=Wf({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]===-1){p=i.x||y,g=i.y||v;const C=[{x:p,y:c.y},{x:p,y:l.y}],M=[{x:c.x,y:g},{x:l.x,y:g}];a[d]===f?h=d==="x"?C:M:h=d==="x"?M:C}else{const C=[{x:c.x,y:l.y}],M=[{x:l.x,y:c.y}];if(d==="x"?h=a.x===f?M:C:h=a.y===f?C:M,t!==r){const T=d==="x"?"y":"x",$=a[d]===s[T],P=c[T]>l[T],z=c[T]<l[T];(a[d]===1&&(!$&&P||$&&z)||a[d]!==1&&(!$&&z||$&&P))&&(h=d==="x"?C:M)}p=h[0].x,g=h[0].y}return[[e,c,...h,l,n],p,g,_,N]}function Kb(e,t,n,r){const i=Math.min(_c(e,t)/2,_c(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+i*l},${a}Q ${o},${a} ${o},${a+i*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${a+i*c}Q ${o},${a} ${o+i*s},${a}`}function Va({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:r,targetY:i,targetPosition:o=O.Top,borderRadius:a=5,centerX:s,centerY:c,offset:l=20}){const[u,d,f,h,p]=Yb({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:s,y:c},offset:l});return[u.reduce((y,v,_)=>{let N="";return _>0&&_<u.length-1?N=Kb(u[_-1],v,u[_+1],a):N=`${_===0?"M":"L"}${v.x} ${v.y}`,y+=N,y},""),d,f,h,p]}const wr=x.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:d=O.Bottom,targetPosition:f=O.Top,markerEnd:h,markerStart:p,pathOptions:g,interactionWidth:y})=>{const[v,_,N]=Va({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:g?.borderRadius,offset:g?.offset});return m(Tn,{path:v,labelX:_,labelY:N,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:h,markerStart:p,interactionWidth:y})});wr.displayName="SmoothStepEdge";const _s=x.exports.memo(e=>m(wr,{...e,pathOptions:x.exports.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));_s.displayName="StepEdge";function Xb({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,a,s]=Wf({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,s]}const Es=x.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[p,g,y]=Xb({sourceX:e,sourceY:t,targetX:n,targetY:r});return m(Tn,{path:p,labelX:g,labelY:y,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:h})});Es.displayName="StraightEdge";function On(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ec({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case O.Left:return[t-On(t-r,o),n];case O.Right:return[t+On(r-t,o),n];case O.Top:return[t,n-On(n-i,o)];case O.Bottom:return[t,n+On(i-n,o)]}}function Ss({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:r,targetY:i,targetPosition:o=O.Top,curvature:a=.25}){const[s,c]=Ec({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[l,u]=Ec({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[d,f,h,p]=Zf({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${i}`,d,f,h,p]}const or=x.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=O.Bottom,targetPosition:o=O.Top,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,pathOptions:g,interactionWidth:y})=>{const[v,_,N]=Ss({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:g?.curvature});return m(Tn,{path:v,labelX:_,labelY:N,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:y})});or.displayName="BezierEdge";const Cs=x.exports.createContext(null),Wb=Cs.Provider;Cs.Consumer;const Zb=()=>x.exports.useContext(Cs),jb=e=>"id"in e&&"source"in e&&"target"in e,Qb=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Ga=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Jb=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ew=(e,t)=>{if(!e.source||!e.target)return t;let n;return jb(e)?n={...e}:n={...e,id:Qb(e)},Jb(n,t)?t:t.concat(n)},Qf=({x:e,y:t},[n,r,i],o,[a,s])=>{const c={x:(e-n)/i,y:(t-r)/i};return o?{x:a*Math.round(c.x/a),y:s*Math.round(c.y/s)}:c},tw=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Rt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Ns=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:o,y:a}=Rt(i,t).positionAbsolute;return Uf(r,rr({x:o,y:a,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Yf(n)},Jf=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1,s=[0,0])=>{const c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(u=>{const{width:d,height:f,selectable:h=!0,hidden:p=!1}=u;if(a&&!h||p)return!1;const{positionAbsolute:g}=Rt(u,s),y={x:g.x,y:g.y,width:d||0,height:f||0},v=Ba(c,y),_=typeof d>"u"||typeof f>"u"||d===null||f===null,N=o&&v>0,E=(d||0)*(f||0);(_||N||v>=E||u.dragging)&&l.push(u)}),l},eh=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},th=(e,t,n,r,i,o=.1)=>{const a=t/(e.width*(1+o)),s=n/(e.height*(1+o)),c=Math.min(a,s),l=Xt(c,r,i),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,h=n/2-d*l;return[f,h,l]},xt=(e,t=0)=>e.transition().duration(t);function Sc(e,t,n,r){return(t[n]||[]).reduce((i,o)=>(`${e.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),i),[])}function nw(e,t,n){let r=null,i=1/0;return n.forEach(o=>{const a=Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2));a<=t&&a<i&&(i=a,r=o)}),r}function Ua(e,t,n,r,i,o,a){const s=i==="target",c=a.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),l={handleDomNode:c,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null}};if(c){const u=e.type==="target",d=e.type==="source",f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p={source:s?e.nodeId:n,sourceHandle:s?e.id:r,target:s?n:e.nodeId,targetHandle:s?r:e.id};l.connection=p,(t===Lt.Strict?s&&d||!s&&u:f!==n||h!==r)&&(l.isValid=o(p))}return l}function rw({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,o)=>{if(o[he]){const{handleBounds:a}=o[he];let s=[],c=[];a&&(s=Sc(o,a,"source",`${t}-${n}-${r}`),c=Sc(o,a,"target",`${t}-${n}-${r}`)),i.push(...s,...c)}return i},[])}function iw(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Dr(e){e?.classList.remove("react-flow__handle-valid"),e?.classList.remove("react-flow__handle-connecting")}function nh({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:a,isValidConnection:s,edgeUpdaterType:c,onEdgeUpdateEnd:l}){const u=Gf(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:p,onConnectStart:g,onConnectEnd:y,panBy:v,getNodes:_,cancelConnection:N}=o();let E=0,C;const{x:M,y:T}=kt(e),$=u?.elementFromPoint(M,T),P=iw(c,$),z=f?.getBoundingClientRect();if(!z||!P)return;let D,A=kt(e,z),B=!1;const b=rw({nodes:_(),nodeId:n,handleId:t,handleType:P}),k=()=>{if(!h)return;const[I,R]=Vf(A,z);v({x:I,y:R}),E=requestAnimationFrame(k)};a({connectionPosition:A,connectionNodeId:n,connectionHandleId:t,connectionHandleType:P}),g?.(e,{nodeId:n,handleId:t,handleType:P});function S(I){const{transform:R}=o();if(A=kt(I,z),C=nw(Qf(A,R,!1,[1,1]),p,b),B||(k(),B=!0),a({connectionPosition:C?tw({x:C.x,y:C.y},R):A}),!C)return Dr(D);const{connection:q,handleDomNode:F,isValid:H}=Ua(C,d,n,t,i?"target":"source",s,u);q.source!==q.target&&F&&(Dr(D),D=F,F.classList.add("react-flow__handle-connecting"),F.classList.toggle("react-flow__handle-valid",H))}function w(I){if(cancelAnimationFrame(E),B=!1,C){const{connection:R,isValid:q}=Ua(C,d,n,t,i?"target":"source",s,u);q&&r?.(R)}y?.(I),c&&l?.(I),Dr(D),N(),u.removeEventListener("mousemove",S),u.removeEventListener("mouseup",w),u.removeEventListener("touchmove",S),u.removeEventListener("touchend",w)}u.addEventListener("mousemove",S),u.addEventListener("mouseup",w),u.addEventListener("touchmove",S),u.addEventListener("touchend",w)}const ow=()=>!0,aw=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),rh=x.exports.forwardRef(({type:e="source",position:t=O.Top,isValidConnection:n=ow,isConnectable:r=!0,id:i,onConnect:o,children:a,className:s,onMouseDown:c,onTouchStart:l,...u},d)=>{const f=pe(),h=Zb();if(!h)return f.getState().onError?.("010",mt["010"]()),null;const{connectionStartHandle:p,connectOnClick:g,noPanClassName:y}=ue(aw,Ee),v=i||null,_=e==="target",N=M=>{const{defaultEdgeOptions:T,onConnect:$,hasDefaultEdges:P}=f.getState(),z={...T,...M};if(P){const{edges:D}=f.getState();f.setState({edges:ew(z,D)})}$?.(z),o?.(z)},E=M=>{const T=Xf(M);(T&&M.button===0||!T)&&nh({event:M,handleId:v,nodeId:h,onConnect:N,isTarget:_,getState:f.getState,setState:f.setState,isValidConnection:n}),T?c?.(M):l?.(M)},C=M=>{const{onClickConnectStart:T,onClickConnectEnd:$,connectionMode:P}=f.getState();if(!p){T?.(M,{nodeId:h,handleId:v,handleType:e}),f.setState({connectionStartHandle:{nodeId:h,type:e,handleId:v}});return}const z=Gf(M.target),{connection:D,isValid:A}=Ua({nodeId:h,id:v,type:e},P,p.nodeId,p.handleId||null,p.type,n,z);A&&N(D),$?.(M),f.setState({connectionStartHandle:null})};return m("div",{"data-handleid":v,"data-nodeid":h,"data-handlepos":t,"data-id":`${h}-${v}-${e}`,className:_e(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",y,s,{source:!_,target:_,connectable:r,connecting:p?.nodeId===h&&p?.handleId===v&&p?.type===e}]),onMouseDown:E,onTouchStart:E,onClick:g?C:void 0,ref:d,...u,children:a})});rh.displayName="Handle";var vt=x.exports.memo(rh);const ih=({data:e,isConnectable:t,targetPosition:n=O.Top,sourcePosition:r=O.Bottom})=>U(ae,{children:[m(vt,{type:"target",position:n,isConnectable:t}),e?.label,m(vt,{type:"source",position:r,isConnectable:t})]});ih.displayName="DefaultNode";var Ya=x.exports.memo(ih);const oh=({data:e,isConnectable:t,sourcePosition:n=O.Bottom})=>U(ae,{children:[e?.label,m(vt,{type:"source",position:n,isConnectable:t})]});oh.displayName="InputNode";var ah=x.exports.memo(oh);const sh=({data:e,isConnectable:t,targetPosition:n=O.Top})=>U(ae,{children:[m(vt,{type:"target",position:n,isConnectable:t}),e?.label]});sh.displayName="OutputNode";var ch=x.exports.memo(sh);const Ms=()=>null;Ms.displayName="GroupNode";const sw=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Fn=e=>e.id;function cw(e,t){return Ee(e.selectedNodes.map(Fn),t.selectedNodes.map(Fn))&&Ee(e.selectedEdges.map(Fn),t.selectedEdges.map(Fn))}const uh=x.exports.memo(({onSelectionChange:e})=>{const t=pe(),{selectedNodes:n,selectedEdges:r}=ue(sw,cw);return x.exports.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChange?.(i)},[n,r,e]),null});uh.displayName="SelectionListener";const uw=e=>!!e.onSelectionChange;function lw({onSelectionChange:e}){const t=ue(uw);return e||t?m(uh,{onSelectionChange:e}):null}const dw=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function $t(e,t){x.exports.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ne(e,t,n){x.exports.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const fw=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:a,onClickConnectStart:s,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:d,edgesFocusable:f,elevateNodesOnSelect:h,minZoom:p,maxZoom:g,nodeExtent:y,onNodesChange:v,onEdgesChange:_,elementsSelectable:N,connectionMode:E,snapGrid:C,snapToGrid:M,translateExtent:T,connectOnClick:$,defaultEdgeOptions:P,fitView:z,fitViewOptions:D,onNodesDelete:A,onEdgesDelete:B,onNodeDrag:b,onNodeDragStart:k,onNodeDragStop:S,onSelectionDrag:w,onSelectionDragStart:I,onSelectionDragStop:R,noPanClassName:q,nodeOrigin:F,rfId:H,autoPanOnConnect:X,autoPanOnNodeDrag:Y,onError:ee,connectionRadius:ie})=>{const{setNodes:K,setEdges:Q,setDefaultNodesAndEdges:V,setMinZoom:G,setMaxZoom:j,setTranslateExtent:oe,setNodeExtent:te,reset:le}=ue(dw,Ee),L=pe();return x.exports.useEffect(()=>{const se=r?.map(Z=>({...Z,...P}));return V(n,se),()=>{le()}},[]),ne("defaultEdgeOptions",P,L.setState),ne("connectionMode",E,L.setState),ne("onConnect",i,L.setState),ne("onConnectStart",o,L.setState),ne("onConnectEnd",a,L.setState),ne("onClickConnectStart",s,L.setState),ne("onClickConnectEnd",c,L.setState),ne("nodesDraggable",l,L.setState),ne("nodesConnectable",u,L.setState),ne("nodesFocusable",d,L.setState),ne("edgesFocusable",f,L.setState),ne("elementsSelectable",N,L.setState),ne("elevateNodesOnSelect",h,L.setState),ne("snapToGrid",M,L.setState),ne("snapGrid",C,L.setState),ne("onNodesChange",v,L.setState),ne("onEdgesChange",_,L.setState),ne("connectOnClick",$,L.setState),ne("fitViewOnInit",z,L.setState),ne("fitViewOnInitOptions",D,L.setState),ne("onNodesDelete",A,L.setState),ne("onEdgesDelete",B,L.setState),ne("onNodeDrag",b,L.setState),ne("onNodeDragStart",k,L.setState),ne("onNodeDragStop",S,L.setState),ne("onSelectionDrag",w,L.setState),ne("onSelectionDragStart",I,L.setState),ne("onSelectionDragStop",R,L.setState),ne("noPanClassName",q,L.setState),ne("nodeOrigin",F,L.setState),ne("rfId",H,L.setState),ne("autoPanOnConnect",X,L.setState),ne("autoPanOnNodeDrag",Y,L.setState),ne("onError",ee,L.setState),ne("connectionRadius",ie,L.setState),$t(e,K),$t(t,Q),$t(p,G),$t(g,j),$t(T,oe),$t(y,te),null},Cc={display:"none"},hw={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},lh="react-flow__node-desc",dh="react-flow__edge-desc",pw="react-flow__aria-live",gw=e=>e.ariaLiveMessage;function mw({rfId:e}){const t=ue(gw);return m("div",{id:`${pw}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:hw,children:t})}function vw({rfId:e,disableKeyboardA11y:t}){return U(ae,{children:[U("div",{id:`${lh}-${e}`,style:Cc,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),m("div",{id:`${dh}-${e}`,style:Cc,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&m(mw,{rfId:e})]})}const yw=(e,t,n)=>n===O.Left?e-t:n===O.Right?e+t:e,bw=(e,t,n)=>n===O.Top?e-t:n===O.Bottom?e+t:e,Nc="react-flow__edgeupdater",Mc=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:a,type:s})=>m("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:a,className:_e([Nc,`${Nc}-${s}`]),cx:yw(t,r,e),cy:bw(n,r,e),r,stroke:"transparent",fill:"transparent"});var Dt=e=>{const t=({id:n,className:r,type:i,data:o,onClick:a,onEdgeDoubleClick:s,selected:c,animated:l,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:y,source:v,target:_,sourceX:N,sourceY:E,targetX:C,targetY:M,sourcePosition:T,targetPosition:$,elementsSelectable:P,hidden:z,sourceHandleId:D,targetHandleId:A,onContextMenu:B,onMouseEnter:b,onMouseMove:k,onMouseLeave:S,edgeUpdaterRadius:w,onEdgeUpdate:I,onEdgeUpdateStart:R,onEdgeUpdateEnd:q,markerEnd:F,markerStart:H,rfId:X,ariaLabel:Y,isFocusable:ee,pathOptions:ie,interactionWidth:K})=>{const Q=x.exports.useRef(null),[V,G]=x.exports.useState(!1),[j,oe]=x.exports.useState(!1),te=pe(),le=x.exports.useMemo(()=>`url(#${Ga(H,X)})`,[H,X]),L=x.exports.useMemo(()=>`url(#${Ga(F,X)})`,[F,X]);if(z)return null;const se=ve=>{const{edges:Ae,addSelectedEdges:Ge}=te.getState();if(P&&(te.setState({nodesSelectionActive:!1}),Ge([n])),a){const ye=Ae.find(be=>be.id===n);a(ve,ye)}},Z=tn(n,te.getState,s),me=tn(n,te.getState,B),Se=tn(n,te.getState,b),Xe=tn(n,te.getState,k),Re=tn(n,te.getState,S),ge=(ve,Ae)=>{const Ge=Ae?_:v,ye=(Ae?A:D)||null,be=Ae?"target":"source",jt=()=>!0,Mr=Ae,Qt=te.getState().edges.find(bt=>bt.id===n);oe(!0),R?.(ve,Qt,be);const Ir=bt=>{oe(!1),q?.(bt,Qt,be)};nh({event:ve,handleId:ye,nodeId:Ge,onConnect:bt=>I?.(Qt,bt),isTarget:Mr,getState:te.getState,setState:te.setState,isValidConnection:jt,edgeUpdaterType:be,onEdgeUpdateEnd:Ir})},de=ve=>ge(ve,!0),Me=ve=>ge(ve,!1),$e=()=>G(!0),De=()=>G(!1),st=!P&&!a,Te=typeof I<"u",We=ve=>{if(Kf.includes(ve.key)&&P){const{unselectNodesAndEdges:Ae,addSelectedEdges:Ge,edges:ye}=te.getState();ve.key==="Escape"?(Q.current?.blur(),Ae({edges:[ye.find(jt=>jt.id===n)]})):Ge([n])}};return U("g",{className:_e(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:l,inactive:st,updating:V}]),onClick:se,onDoubleClick:Z,onContextMenu:me,onMouseEnter:Se,onMouseMove:Xe,onMouseLeave:Re,onKeyDown:ee?We:void 0,tabIndex:ee?0:void 0,role:ee?"button":void 0,"data-testid":`rf__edge-${n}`,"aria-label":Y===null?void 0:Y||`Edge from ${v} to ${_}`,"aria-describedby":ee?`${dh}-${X}`:void 0,ref:Q,children:[!j&&m(e,{id:n,source:v,target:_,selected:c,animated:l,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,data:o,style:y,sourceX:N,sourceY:E,targetX:C,targetY:M,sourcePosition:T,targetPosition:$,sourceHandleId:D,targetHandleId:A,markerStart:le,markerEnd:L,pathOptions:ie,interactionWidth:K}),Te&&U(ae,{children:[m(Mc,{position:T,centerX:N,centerY:E,radius:w,onMouseDown:de,onMouseEnter:$e,onMouseOut:De,type:"source"}),m(Mc,{position:$,centerX:C,centerY:M,radius:w,onMouseDown:Me,onMouseEnter:$e,onMouseOut:De,type:"target"})]})]})};return t.displayName="EdgeWrapper",x.exports.memo(t)};function ww(e){const t={default:Dt(e.default||or),straight:Dt(e.bezier||Es),step:Dt(e.step||_s),smoothstep:Dt(e.step||wr),simplebezier:Dt(e.simplebezier||xs)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=Dt(e[o]||or),i),n);return{...t,...r}}function Ic(e,t,n=null){const r=(n?.x||0)+t.x,i=(n?.y||0)+t.y,o=n?.width||t.width,a=n?.height||t.height;switch(e){case O.Top:return{x:r+o/2,y:i};case O.Right:return{x:r+o,y:i+a/2};case O.Bottom:return{x:r+o/2,y:i+a};case O.Left:return{x:r,y:i+a/2}}}function kc(e,t){return e?t?e.find(n=>n.id===t):e.length===1?e[0]:null:null}const xw=(e,t,n,r,i,o)=>{const a=Ic(n,e,t),s=Ic(o,r,i);return{sourceX:a.x,sourceY:a.y,targetX:s.x,targetY:s.y}};function _w({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:a,height:s,transform:c}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const u=rr({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:a/c[2],height:s/c[2]}),d=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),f=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(d*f)>0}function Rc(e){const t=e?.[he]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}function fh(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:fh(n,t):!1}function Tc(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Ew(e,t,n){return Array.from(e.values()).filter(r=>(r.selected||r.id===n)&&(!r.parentNode||!fh(r,e))).map(r=>({id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-(r.positionAbsolute?.x??0),y:t.y-(r.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}))}function hh(e,t,n,r,i=[0,0],o){let a=e.extent||r;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const l=n.get(e.parentNode),{x:u,y:d}=Rt(l,i).positionAbsolute;a=l&&qe(u)&&qe(d)&&qe(l.width)&&qe(l.height)?[[u+e.width*i[0],d+e.height*i[1]],[u+l.width-e.width+e.width*i[0],d+l.height-e.height+e.height*i[1]]]:a}else o?.("005",mt["005"]()),a=r;else if(e.extent&&e.parentNode){const l=n.get(e.parentNode),{x:u,y:d}=Rt(l,i).positionAbsolute;a=[[e.extent[0][0]+u,e.extent[0][1]+d],[e.extent[1][0]+u,e.extent[1][1]+d]]}let s={x:0,y:0};if(e.parentNode){const l=n.get(e.parentNode);s=Rt(l,i).positionAbsolute}const c=a?ws(t,a):t;return{position:{x:c.x-s.x,y:c.y-s.y},positionAbsolute:c}}function Or({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Ac=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),a=t.getBoundingClientRect(),s={x:a.width*r[0],y:a.height*r[1]};return o.map(c=>{const l=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(l.left-a.left-s.x)/n,y:(l.top-a.top-s.y)/n,...bs(c)}})};function nn(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);n(r,{...i})}}function Ka({id:e,store:t,unselect:n=!1}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:a}=t.getState(),s=a.get(e);t.setState({nodesSelectionActive:!1}),s.selected?(n||s.selected&&o)&&i({nodes:[s]}):r([e])}function Sw(){const e=pe();return x.exports.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,c={x:(a-r[0])/r[2],y:(s-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:o?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function Fr(e){return(t,n,r)=>e?.(t,r)}function ph({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:a}){const s=pe(),[c,l]=x.exports.useState(!1),u=x.exports.useRef([]),d=x.exports.useRef({x:null,y:null}),f=x.exports.useRef(0),h=x.exports.useRef(null),p=x.exports.useRef({x:0,y:0}),g=x.exports.useRef(null),y=x.exports.useRef(!1),v=Sw();return x.exports.useEffect(()=>{if(e?.current){const _=Le(e.current),N=({x:C,y:M})=>{const{nodeInternals:T,onNodeDrag:$,onSelectionDrag:P,updateNodePositions:z,nodeExtent:D,snapGrid:A,snapToGrid:B,nodeOrigin:b,onError:k}=s.getState();d.current={x:C,y:M};let S=!1;if(u.current=u.current.map(I=>{const R={x:C-I.distance.x,y:M-I.distance.y};B&&(R.x=A[0]*Math.round(R.x/A[0]),R.y=A[1]*Math.round(R.y/A[1]));const q=hh(I,R,T,D,b,k);return S=S||I.position.x!==q.position.x||I.position.y!==q.position.y,I.position=q.position,I.positionAbsolute=q.positionAbsolute,I}),!S)return;z(u.current,!0,!0),l(!0);const w=i?$:Fr(P);if(w&&g.current){const[I,R]=Or({nodeId:i,dragItems:u.current,nodeInternals:T});w(g.current,I,R)}},E=()=>{if(!h.current)return;const[C,M]=Vf(p.current,h.current);if(C!==0||M!==0){const{transform:T,panBy:$}=s.getState();d.current.x=(d.current.x??0)-C/T[2],d.current.y=(d.current.y??0)-M/T[2],N(d.current),$({x:C,y:M})}f.current=requestAnimationFrame(E)};if(t)_.on(".drag",null);else{const C=U0().on("start",M=>{const{nodeInternals:T,multiSelectionActive:$,unselectNodesAndEdges:P,onNodeDragStart:z,onSelectionDragStart:D,domNode:A}=s.getState(),B=i?z:Fr(D);!a&&!$&&i&&(T.get(i)?.selected||P()),i&&o&&a&&Ka({id:i,store:s});const b=v(M);if(d.current=b,u.current=Ew(T,b,i),B&&u.current){const[k,S]=Or({nodeId:i,dragItems:u.current,nodeInternals:T});B(M.sourceEvent,k,S)}h.current=A?.getBoundingClientRect()||null,p.current=kt(M.sourceEvent,h.current)}).on("drag",M=>{const T=v(M),{autoPanOnNodeDrag:$}=s.getState();!y.current&&$&&(y.current=!0,E()),(d.current.x!==T.xSnapped||d.current.y!==T.ySnapped)&&u.current&&(g.current=M.sourceEvent,p.current=kt(M.sourceEvent,h.current),N(T))}).on("end",M=>{if(l(!1),y.current=!1,cancelAnimationFrame(f.current),u.current){const{updateNodePositions:T,nodeInternals:$,onNodeDragStop:P,onSelectionDragStop:z}=s.getState(),D=i?P:Fr(z);if(T(u.current,!1,!1),D){const[A,B]=Or({nodeId:i,dragItems:u.current,nodeInternals:$});D(M.sourceEvent,A,B)}}}).filter(M=>{const T=M.target;return!M.button&&(!n||!Tc(T,`.${n}`,e))&&(!r||Tc(T,r,e))});return _.call(C),()=>{_.on(".drag",null)}}}},[e,t,n,r,o,s,i,a,v]),c}function gh(){const e=pe();return x.exports.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:a,snapToGrid:s,snapGrid:c,onError:l}=e.getState(),u=a().filter(v=>v.selected),d=s?c[0]:5,f=s?c[1]:5,h=n.isShiftPressed?4:1,p=n.x*d*h,g=n.y*f*h,y=u.map(v=>{if(v.positionAbsolute){const _={x:v.positionAbsolute.x+p,y:v.positionAbsolute.y+g};s&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:N,position:E}=hh(v,_,r,i,void 0,l);v.position=E,v.positionAbsolute=N}return v});o(y,!0,!1)},[])}const Gt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var rn=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:a,xPosOrigin:s,yPosOrigin:c,selected:l,onClick:u,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:p,onDoubleClick:g,style:y,className:v,isDraggable:_,isSelectable:N,isConnectable:E,isFocusable:C,selectNodesOnDrag:M,sourcePosition:T,targetPosition:$,hidden:P,resizeObserver:z,dragHandle:D,zIndex:A,isParent:B,noDragClassName:b,noPanClassName:k,initialized:S,disableKeyboardA11y:w,ariaLabel:I,rfId:R})=>{const q=pe(),F=x.exports.useRef(null),H=x.exports.useRef(T),X=x.exports.useRef($),Y=x.exports.useRef(r),ee=N||_||u||d||f||h,ie=gh(),K=nn(n,q.getState,d),Q=nn(n,q.getState,f),V=nn(n,q.getState,h),G=nn(n,q.getState,p),j=nn(n,q.getState,g),oe=L=>{if(N&&(!M||!_)&&Ka({id:n,store:q}),u){const se=q.getState().nodeInternals.get(n);u(L,{...se})}},te=L=>{if(!Ha(L))if(Kf.includes(L.key)&&N){const se=L.key==="Escape";se&&F.current?.blur(),Ka({id:n,store:q,unselect:se})}else!w&&_&&l&&Object.prototype.hasOwnProperty.call(Gt,L.key)&&(q.setState({ariaLiveMessage:`Moved selected node ${L.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~a}`}),ie({x:Gt[L.key].x,y:Gt[L.key].y,isShiftPressed:L.shiftKey}))};x.exports.useEffect(()=>{if(F.current&&!P){const L=F.current;return z?.observe(L),()=>z?.unobserve(L)}},[P]),x.exports.useEffect(()=>{const L=Y.current!==r,se=H.current!==T,Z=X.current!==$;F.current&&(L||se||Z)&&(L&&(Y.current=r),se&&(H.current=T),Z&&(X.current=$),q.getState().updateNodeDimensions([{id:n,nodeElement:F.current,forceUpdate:!0}]))},[n,r,T,$]);const le=ph({nodeRef:F,disabled:P||!_,noDragClassName:b,handleSelector:D,nodeId:n,isSelectable:N,selectNodesOnDrag:M});return P?null:m("div",{className:_e(["react-flow__node",`react-flow__node-${r}`,{[k]:_},v,{selected:l,selectable:N,parent:B,dragging:le}]),ref:F,style:{zIndex:A,transform:`translate(${s}px,${c}px)`,pointerEvents:ee?"all":"none",visibility:S?"visible":"hidden",...y},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:K,onMouseMove:Q,onMouseLeave:V,onContextMenu:G,onClick:oe,onDoubleClick:j,onKeyDown:C?te:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":w?void 0:`${lh}-${R}`,"aria-label":I,children:m(Wb,{value:n,children:m(e,{id:n,data:i,type:r,xPos:o,yPos:a,selected:l,isConnectable:E,sourcePosition:T,targetPosition:$,dragging:le,dragHandle:D,zIndex:A})})})};return t.displayName="NodeWrapper",x.exports.memo(t)};function Cw(e){const t={input:rn(e.input||ah),default:rn(e.default||Ya),output:rn(e.output||ch),group:rn(e.group||Ms)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=rn(e[o]||Ya),i),n);return{...t,...r}}const Nw=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Mw=typeof document<"u"?document:null;var yn=(e=null,t={target:Mw})=>{const[n,r]=x.exports.useState(!1),i=x.exports.useRef(new Set([])),[o,a]=x.exports.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.split("+")),l=c.reduce((u,d)=>u.concat(...d),[]);return[c,l]}return[[],[]]},[e]);return x.exports.useEffect(()=>{if(e!==null){const s=u=>{if(Ha(u))return!1;const d=qc(u.code,a);i.current.add(u[d]),Lc(o,i.current,!1)&&(u.preventDefault(),r(!0))},c=u=>{if(Ha(u))return!1;const d=qc(u.code,a);Lc(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(u[d])},l=()=>{i.current.clear(),r(!1)};return t?.target?.addEventListener("keydown",s),t?.target?.addEventListener("keyup",c),window.addEventListener("blur",l),()=>{t?.target?.removeEventListener("keydown",s),t?.target?.removeEventListener("keyup",c),window.removeEventListener("blur",l)}}},[e,r]),n};function Lc(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function qc(e,t){return t.includes(e)?"code":"key"}function mh(e,t,n,r){if(!e.parentNode)return n;const i=t.get(e.parentNode),o=Rt(i,r);return mh(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(i[he]?.z??0)>(n.z??0)?i[he]?.z??0:n.z??0},r)}function vh(e,t,n){e.forEach(r=>{if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n?.[r.id]){const{x:i,y:o,z:a}=mh(r,e,{...r.position,z:r[he]?.z??0},t);r.positionAbsolute={x:i,y:o},r[he].z=a,n?.[r.id]&&(r[he].isParent=!0)}})}function zr(e,t,n,r){const i=new Map,o={},a=r?1e3:0;return e.forEach(s=>{const c=(qe(s.zIndex)?s.zIndex:0)+(s.selected?a:0),l=t.get(s.id),u={width:l?.width,height:l?.height,...s,positionAbsolute:{x:s.position.x,y:s.position.y}};s.parentNode&&(u.parentNode=s.parentNode,o[s.parentNode]=!0),Object.defineProperty(u,he,{enumerable:!1,value:{handleBounds:l?.[he]?.handleBounds,z:c}}),i.set(s.id,u)}),vh(i,n,o),i}function yh(e,t={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:a,d3Zoom:s,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:d}=e();if((t.initial&&!l&&u||!t.initial)&&s&&c){const f=n().filter(p=>t.includeHiddenNodes?p.width&&p.height:!p.hidden),h=f.every(p=>p.width&&p.height);if(f.length>0&&h){const p=Ns(f,d),[g,y,v]=th(p,r,i,t.minZoom??o,t.maxZoom??a,t.padding??.1),_=nt.translate(g,y).scale(v);return typeof t.duration=="number"&&t.duration>0?s.transform(xt(c,t.duration),_):s.transform(c,_),!0}}return!1}function Iw(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[he]:r[he],selected:n.selected})}),new Map(t)}function kw(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function zn({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:a,onEdgesChange:s,hasDefaultNodes:c,hasDefaultEdges:l}=n();e?.length&&(c&&r({nodeInternals:Iw(e,i)}),a?.(e)),t?.length&&(l&&r({edges:kw(t,o)}),s?.(t))}const wt=()=>{},Rw={zoomIn:wt,zoomOut:wt,zoomTo:wt,getZoom:()=>1,setViewport:wt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:wt,setCenter:wt,fitBounds:wt,project:e=>e,viewportInitialized:!1},Tw=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Aw=()=>{const e=pe(),{d3Zoom:t,d3Selection:n}=ue(Tw,Ee);return x.exports.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(xt(n,i?.duration),1.2),zoomOut:i=>t.scaleBy(xt(n,i?.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(xt(n,o?.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[a,s,c]=e.getState().transform,l=nt.translate(i.x??a,i.y??s).scale(i.zoom??c);t.transform(xt(n,o?.duration),l)},getViewport:()=>{const[i,o,a]=e.getState().transform;return{x:i,y:o,zoom:a}},fitView:i=>yh(e.getState,i),setCenter:(i,o,a)=>{const{width:s,height:c,maxZoom:l}=e.getState(),u=typeof a?.zoom<"u"?a.zoom:l,d=s/2-i*u,f=c/2-o*u,h=nt.translate(d,f).scale(u);t.transform(xt(n,a?.duration),h)},fitBounds:(i,o)=>{const{width:a,height:s,minZoom:c,maxZoom:l}=e.getState(),[u,d,f]=th(i,a,s,c,l,o?.padding??.1),h=nt.translate(u,d).scale(f);t.transform(xt(n,o?.duration),h)},project:i=>{const{transform:o,snapToGrid:a,snapGrid:s}=e.getState();return Qf(i,o,a,s)},viewportInitialized:!0}:Rw,[t,n])};function Is(){const e=Aw(),t=pe(),n=x.exports.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),r=x.exports.useCallback(g=>t.getState().nodeInternals.get(g),[]),i=x.exports.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(y=>({...y}))},[]),o=x.exports.useCallback(g=>{const{edges:y=[]}=t.getState();return y.find(v=>v.id===g)},[]),a=x.exports.useCallback(g=>{const{getNodes:y,setNodes:v,hasDefaultNodes:_,onNodesChange:N}=t.getState(),E=y(),C=typeof g=="function"?g(E):g;if(_)v(C);else if(N){const M=C.length===0?E.map(T=>({type:"remove",id:T.id})):C.map(T=>({item:T,type:"reset"}));N(M)}},[]),s=x.exports.useCallback(g=>{const{edges:y=[],setEdges:v,hasDefaultEdges:_,onEdgesChange:N}=t.getState(),E=typeof g=="function"?g(y):g;if(_)v(E);else if(N){const C=E.length===0?y.map(M=>({type:"remove",id:M.id})):E.map(M=>({item:M,type:"reset"}));N(C)}},[]),c=x.exports.useCallback(g=>{const y=Array.isArray(g)?g:[g],{getNodes:v,setNodes:_,hasDefaultNodes:N,onNodesChange:E}=t.getState();if(N){const M=[...v(),...y];_(M)}else if(E){const C=y.map(M=>({item:M,type:"add"}));E(C)}},[]),l=x.exports.useCallback(g=>{const y=Array.isArray(g)?g:[g],{edges:v=[],setEdges:_,hasDefaultEdges:N,onEdgesChange:E}=t.getState();if(N)_([...v,...y]);else if(E){const C=y.map(M=>({item:M,type:"add"}));E(C)}},[]),u=x.exports.useCallback(()=>{const{getNodes:g,edges:y=[],transform:v}=t.getState(),[_,N,E]=v;return{nodes:g().map(C=>({...C})),edges:y.map(C=>({...C})),viewport:{x:_,y:N,zoom:E}}},[]),d=x.exports.useCallback(({nodes:g,edges:y})=>{const{nodeInternals:v,getNodes:_,edges:N,hasDefaultNodes:E,hasDefaultEdges:C,onNodesDelete:M,onEdgesDelete:T,onNodesChange:$,onEdgesChange:P}=t.getState(),z=(g||[]).map(k=>k.id),D=(y||[]).map(k=>k.id),A=_().reduce((k,S)=>{const w=!z.includes(S.id)&&S.parentNode&&k.find(R=>R.id===S.parentNode);return(typeof S.deletable=="boolean"?S.deletable:!0)&&(z.includes(S.id)||w)&&k.push(S),k},[]),B=N.filter(k=>typeof k.deletable=="boolean"?k.deletable:!0),b=B.filter(k=>D.includes(k.id));if(A||b){const k=eh(A,B),S=[...b,...k],w=S.reduce((I,R)=>(I.includes(R.id)||I.push(R.id),I),[]);if((C||E)&&(C&&t.setState({edges:N.filter(I=>!w.includes(I.id))}),E&&(A.forEach(I=>{v.delete(I.id)}),t.setState({nodeInternals:new Map(v)}))),w.length>0&&(T?.(S),P&&P(w.map(I=>({id:I,type:"remove"})))),A.length>0&&(M?.(A),$)){const I=A.map(R=>({id:R.id,type:"remove"}));$(I)}}},[]),f=x.exports.useCallback(g=>{const y=Bb(g),v=y?null:t.getState().nodeInternals.get(g.id);return[y?g:bc(v),v,y]},[]),h=x.exports.useCallback((g,y=!0,v)=>{const[_,N,E]=f(g);return _?(v||t.getState().getNodes()).filter(C=>{if(!E&&(C.id===N.id||!C.positionAbsolute))return!1;const M=bc(C),T=Ba(M,_);return y&&T>0||T>=g.width*g.height}):[]},[]),p=x.exports.useCallback((g,y,v=!0)=>{const[_]=f(g);if(!_)return!1;const N=Ba(_,y);return v&&N>0||N>=g.width*g.height},[]);return x.exports.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:a,setEdges:s,addNodes:c,addEdges:l,toObject:u,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:p}),[e,n,r,i,o,a,s,c,l,u,d,h,p])}var Lw=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=pe(),{deleteElements:r}=Is(),i=yn(e),o=yn(t);x.exports.useEffect(()=>{if(i){const{edges:a,getNodes:s}=n.getState(),c=s().filter(u=>u.selected),l=a.filter(u=>u.selected);r({nodes:c,edges:l}),n.setState({nodesSelectionActive:!1})}},[i]),x.exports.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function qw(e){const t=pe();x.exports.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const i=bs(e.current);(i.height===0||i.width===0)&&t.getState().onError?.("004",mt["004"]()),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const ks={position:"absolute",width:"100%",height:"100%",top:0,left:0},Pw=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Br=e=>({x:e.x,y:e.y,zoom:e.k}),Ot=(e,t)=>e.target.closest(`.${t}`),Pc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),$w=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Dw=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:a=!1,panOnScrollSpeed:s=.5,panOnScrollMode:c=Vt.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:p,maxZoom:g,zoomActivationKeyCode:y,preventScrolling:v=!0,children:_,noWheelClassName:N,noPanClassName:E})=>{const C=x.exports.useRef(),M=pe(),T=x.exports.useRef(!1),$=x.exports.useRef(!1),P=x.exports.useRef(null),z=x.exports.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:A,d3ZoomHandler:B,userSelectionActive:b}=ue($w,Ee),k=yn(y),S=x.exports.useRef(0);return qw(P),x.exports.useEffect(()=>{if(P.current){const w=P.current.getBoundingClientRect(),I=Bf().scaleExtent([p,g]).translateExtent(h),R=Le(P.current).call(I),q=nt.translate(f.x,f.y).scale(Xt(f.zoom,p,g)),F=[[0,0],[w.width,w.height]],H=I.constrain()(q,F,h);I.transform(R,H),M.setState({d3Zoom:I,d3Selection:R,d3ZoomHandler:R.on("wheel.zoom"),transform:[H.x,H.y,H.k],domNode:P.current.closest(".react-flow")})}},[]),x.exports.useEffect(()=>{A&&D&&(a&&!k&&!b?A.on("wheel.zoom",w=>{if(Ot(w,N))return!1;w.preventDefault(),w.stopImmediatePropagation();const I=A.property("__zoom").k||1;if(w.ctrlKey&&o){const H=Oe(w),X=-w.deltaY*(w.deltaMode===1?.05:w.deltaMode?1:.002)*10,Y=I*Math.pow(2,X);D.scaleTo(A,Y,H);return}const R=w.deltaMode===1?20:1,q=c===Vt.Vertical?0:w.deltaX*R,F=c===Vt.Horizontal?0:w.deltaY*R;D.translateBy(A,-(q/I)*s,-(F/I)*s)}):typeof B<"u"&&A.on("wheel.zoom",function(w,I){if(!v||Ot(w,N))return null;w.preventDefault(),B.call(this,w,I)}))},[b,a,c,A,D,B,k,o,v,N]),x.exports.useEffect(()=>{D&&D.on("start",w=>{if(!w.sourceEvent)return null;S.current=w.sourceEvent.button;const{onViewportChangeStart:I}=M.getState();if(T.current=!0,w.sourceEvent?.type==="mousedown"&&M.setState({paneDragging:!0}),t||I){const R=Br(w.transform);z.current=R,I?.(R),t?.(w.sourceEvent,R)}})},[D,t]),x.exports.useEffect(()=>{D&&(b&&!T.current?D.on("zoom",null):b||D.on("zoom",w=>{const{onViewportChange:I}=M.getState();if(M.setState({transform:[w.transform.x,w.transform.y,w.transform.k]}),$.current=!!(r&&Pc(d,S.current??0)),e||I){const R=Br(w.transform);I?.(R),e?.(w.sourceEvent,R)}}))},[b,D,e,d,r]),x.exports.useEffect(()=>{D&&D.on("end",w=>{if(!w.sourceEvent)return null;const{onViewportChangeEnd:I}=M.getState();if(T.current=!1,M.setState({paneDragging:!1}),r&&Pc(d,S.current??0)&&!$.current&&r(w.sourceEvent),$.current=!1,(n||I)&&Pw(z.current,w.transform)){const R=Br(w.transform);z.current=R,clearTimeout(C.current),C.current=setTimeout(()=>{I?.(R),n?.(w.sourceEvent,R)},a?150:0)}})},[D,a,d,n,r]),x.exports.useEffect(()=>{D&&D.filter(w=>{const I=k||i,R=o&&w.ctrlKey;if(w.button===1&&w.type==="mousedown"&&(Ot(w,"react-flow__node")||Ot(w,"react-flow__edge")))return!0;if(!d&&!I&&!a&&!l&&!o||b||!l&&w.type==="dblclick"||Ot(w,N)&&w.type==="wheel"||Ot(w,E)&&w.type!=="wheel"||!o&&w.ctrlKey&&w.type==="wheel"||!I&&!a&&!R&&w.type==="wheel"||!d&&(w.type==="mousedown"||w.type==="touchstart")||Array.isArray(d)&&!d.includes(w.button)&&(w.type==="mousedown"||w.type==="touchstart"))return!1;const q=Array.isArray(d)&&d.includes(w.button)||!w.button||w.button<=1;return(!w.ctrlKey||w.type==="wheel")&&q})},[b,D,i,o,a,l,d,u,k]),m("div",{className:"react-flow__renderer",ref:P,style:ks,children:_})},Ow=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Fw(){const{userSelectionActive:e,userSelectionRect:t}=ue(Ow,Ee);return e&&t?m("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function $c(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function bh(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.filter(s=>s.id===i.id);if(o.length===0)return r.push(i),r;const a={...i};for(const s of o)if(s)switch(s.type){case"select":{a.selected=s.selected;break}case"position":{typeof s.position<"u"&&(a.position=s.position),typeof s.positionAbsolute<"u"&&(a.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(a.dragging=s.dragging),a.expandParent&&$c(r,a);break}case"dimensions":{typeof s.dimensions<"u"&&(a.width=s.dimensions.width,a.height=s.dimensions.height),typeof s.updateStyle<"u"&&(a.style={...a.style||{},...s.dimensions}),typeof s.resizing=="boolean"&&(a.resizing=s.resizing),a.expandParent&&$c(r,a);break}case"remove":return r}return r.push(a),r},n)}function wh(e,t){return bh(e,t)}function zw(e,t){return bh(e,t)}const dt=(e,t)=>({id:e,type:"select",selected:t});function Ft(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(dt(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(dt(r.id,!1))),n},[])}const Hr=(e,t)=>n=>{n.target===t.current&&e?.(n)},Bw=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),xh=x.exports.memo(({isSelecting:e,selectionMode:t=vn.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:a,onPaneScroll:s,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:d})=>{const f=x.exports.useRef(null),h=pe(),p=x.exports.useRef(0),g=x.exports.useRef(0),y=x.exports.useRef(),{userSelectionActive:v,elementsSelectable:_,dragging:N}=ue(Bw,Ee),E=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,g.current=0},C=B=>{o?.(B),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},M=B=>{if(Array.isArray(n)&&n?.includes(2)){B.preventDefault();return}a?.(B)},T=s?B=>s(B):void 0,$=B=>{const{resetSelectedElements:b,domNode:k}=h.getState();if(y.current=k?.getBoundingClientRect(),!_||!e||B.button!==0||B.target!==f.current||!y.current)return;const{x:S,y:w}=kt(B,y.current);b(),h.setState({userSelectionRect:{width:0,height:0,startX:S,startY:w,x:S,y:w}}),r?.(B)},P=B=>{const{userSelectionRect:b,nodeInternals:k,edges:S,transform:w,onNodesChange:I,onEdgesChange:R,nodeOrigin:q,getNodes:F}=h.getState();if(!e||!y.current||!b)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const H=kt(B,y.current),X=b.startX??0,Y=b.startY??0,ee={...b,x:H.x<X?H.x:X,y:H.y<Y?H.y:Y,width:Math.abs(H.x-X),height:Math.abs(H.y-Y)},ie=F(),K=Jf(k,ee,w,t===vn.Partial,!0,q),Q=eh(K,S).map(G=>G.id),V=K.map(G=>G.id);if(p.current!==V.length){p.current=V.length;const G=Ft(ie,V);G.length&&I?.(G)}if(g.current!==Q.length){g.current=Q.length;const G=Ft(S,Q);G.length&&R?.(G)}h.setState({userSelectionRect:ee})},z=B=>{if(B.button!==0)return;const{userSelectionRect:b}=h.getState();!v&&b&&B.target===f.current&&C?.(B),h.setState({nodesSelectionActive:p.current>0}),E(),i?.(B)},D=B=>{v&&(h.setState({nodesSelectionActive:p.current>0}),i?.(B)),E()},A=_&&(e||v);return U("div",{className:_e(["react-flow__pane",{dragging:N,selection:e}]),onClick:A?void 0:Hr(C,f),onContextMenu:Hr(M,f),onWheel:Hr(T,f),onMouseEnter:A?void 0:c,onMouseDown:A?$:void 0,onMouseMove:A?P:l,onMouseUp:A?z:void 0,onMouseLeave:A?D:u,ref:f,style:ks,children:[d,m(Fw,{})]})});xh.displayName="Pane";const Hw=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Ns(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Vw({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=pe(),{width:i,height:o,x:a,y:s,transformString:c,userSelectionActive:l}=ue(Hw,Ee),u=gh(),d=x.exports.useRef(null);if(x.exports.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),ph({nodeRef:d}),l||!i||!o)return null;const f=e?p=>{const g=r.getState().getNodes().filter(y=>y.selected);e(p,g)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(Gt,p.key)&&u({x:Gt[p.key].x,y:Gt[p.key].y,isShiftPressed:p.shiftKey})};return m("div",{className:_e(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:m("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:o,top:s,left:a}})})}var Gw=x.exports.memo(Vw);const Uw=e=>e.nodesSelectionActive,_h=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,deleteKeyCode:s,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:y,panActivationKeyCode:v,zoomActivationKeyCode:_,elementsSelectable:N,zoomOnScroll:E,zoomOnPinch:C,panOnScroll:M,panOnScrollSpeed:T,panOnScrollMode:$,zoomOnDoubleClick:P,panOnDrag:z,defaultViewport:D,translateExtent:A,minZoom:B,maxZoom:b,preventScrolling:k,onSelectionContextMenu:S,noWheelClassName:w,noPanClassName:I,disableKeyboardA11y:R})=>{const q=ue(Uw),F=yn(d),X=yn(v)||z,Y=F||f&&X!==!0;return Lw({deleteKeyCode:s,multiSelectionKeyCode:y}),m(Dw,{onMove:c,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:o,elementsSelectable:N,zoomOnScroll:E,zoomOnPinch:C,panOnScroll:M,panOnScrollSpeed:T,panOnScrollMode:$,zoomOnDoubleClick:P,panOnDrag:!F&&X,defaultViewport:D,translateExtent:A,minZoom:B,maxZoom:b,zoomActivationKeyCode:_,preventScrolling:k,noWheelClassName:w,noPanClassName:I,children:U(xh,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:X,isSelecting:!!Y,selectionMode:h,children:[e,q&&m(Gw,{onSelectionContextMenu:S,noPanClassName:I,disableKeyboardA11y:R})]})})};_h.displayName="FlowRenderer";var Yw=x.exports.memo(_h);function Kw(e){return ue(x.exports.useCallback(n=>e?Jf(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}const Xw=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Eh=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:a}=ue(Xw,Ee),s=Kw(e.onlyRenderVisibleElements),c=x.exports.useRef(),l=x.exports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));o(f)});return c.current=u,u},[]);return x.exports.useEffect(()=>()=>{c?.current?.disconnect()},[]),m("div",{className:"react-flow__nodes",style:ks,children:s.map(u=>{let d=u.type||"default";e.nodeTypes[d]||(a?.("003",mt["003"](d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,h=!!(u.draggable||t&&typeof u.draggable>"u"),p=!!(u.selectable||i&&typeof u.selectable>"u"),g=!!(u.connectable||n&&typeof u.connectable>"u"),y=!!(u.focusable||r&&typeof u.focusable>"u"),v=e.nodeExtent?ws(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,_=v?.x??0,N=v?.y??0,E=Nw({x:_,y:N,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return m(f,{id:u.id,className:u.className,style:u.style,type:d,data:u.data,sourcePosition:u.sourcePosition||O.Bottom,targetPosition:u.targetPosition||O.Top,hidden:u.hidden,xPos:_,yPos:N,xPosOrigin:E.x,yPosOrigin:E.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:h,isSelectable:p,isConnectable:g,isFocusable:y,resizeObserver:l,dragHandle:u.dragHandle,zIndex:u[he]?.z??0,isParent:!!u[he]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel},u.id)})})};Eh.displayName="NodeRenderer";var Ww=x.exports.memo(Eh);const Zw=[{level:0,isMaxLevel:!0,edges:[]}];function jw(e,t,n=!1){let r=-1;const i=e.reduce((a,s)=>{const c=qe(s.zIndex);let l=c?s.zIndex:0;return n&&(l=c?s.zIndex:Math.max(t.get(s.source)?.[he]?.z||0,t.get(s.target)?.[he]?.z||0)),a[l]?a[l].push(s):a[l]=[s],r=l>r?l:r,a},{}),o=Object.entries(i).map(([a,s])=>{const c=+a;return{edges:s,level:c,isMaxLevel:c===r}});return o.length===0?Zw:o}function Qw(e,t,n){const r=ue(x.exports.useCallback(i=>e?i.edges.filter(o=>{const a=t.get(o.source),s=t.get(o.target);return a?.width&&a?.height&&s?.width&&s?.height&&_w({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:s.width,targetHeight:s.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return jw(r,t,n)}const Jw=({color:e="none",strokeWidth:t=1})=>m("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),e1=({color:e="none",strokeWidth:t=1})=>m("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),Dc={[ir.Arrow]:Jw,[ir.ArrowClosed]:e1};function t1(e){const t=pe();return x.exports.useMemo(()=>Object.prototype.hasOwnProperty.call(Dc,e)?Dc[e]:(t.getState().onError?.("009",mt["009"](e)),null),[e])}const n1=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const c=t1(t);return c?m("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:s,refX:"0",refY:"0",children:m(c,{color:n,strokeWidth:a})}):null},r1=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const s=Ga(a,t);r.includes(s)||(i.push({id:s,color:a.color||e,...a}),r.push(s))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},Sh=({defaultColor:e,rfId:t})=>{const n=ue(x.exports.useCallback(r1({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,a)=>o.id!==i[a].id)));return m("defs",{children:n.map(r=>m(n1,{id:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient},r.id))})};Sh.displayName="MarkerDefinitions";var i1=x.exports.memo(Sh);const o1=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Ch=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeUpdate:a,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:h,onEdgeUpdateStart:p,onEdgeUpdateEnd:g,children:y})=>{const{edgesFocusable:v,elementsSelectable:_,width:N,height:E,connectionMode:C,nodeInternals:M,onError:T}=ue(o1,Ee),$=Qw(t,M,n);return N?U(ae,{children:[$.map(({level:P,edges:z,isMaxLevel:D})=>U("svg",{style:{zIndex:P},width:N,height:E,className:"react-flow__edges react-flow__container",children:[D&&m(i1,{defaultColor:e,rfId:r}),m("g",{children:z.map(A=>{const[B,b,k]=Rc(M.get(A.source)),[S,w,I]=Rc(M.get(A.target));if(!k||!I)return null;let R=A.type||"default";i[R]||(T?.("011",mt["011"](R)),R="default");const q=i[R]||i.default,F=C===Lt.Strict?w.target:(w.target??[]).concat(w.source??[]),H=kc(b.source,A.sourceHandle),X=kc(F,A.targetHandle),Y=H?.position||O.Bottom,ee=X?.position||O.Top,ie=!!(A.focusable||v&&typeof A.focusable>"u");if(!H||!X)return T?.("008",mt["008"](H,A)),null;const{sourceX:K,sourceY:Q,targetX:V,targetY:G}=xw(B,H,Y,S,X,ee);return m(q,{id:A.id,className:_e([A.className,o]),type:R,data:A.data,selected:!!A.selected,animated:!!A.animated,hidden:!!A.hidden,label:A.label,labelStyle:A.labelStyle,labelShowBg:A.labelShowBg,labelBgStyle:A.labelBgStyle,labelBgPadding:A.labelBgPadding,labelBgBorderRadius:A.labelBgBorderRadius,style:A.style,source:A.source,target:A.target,sourceHandleId:A.sourceHandle,targetHandleId:A.targetHandle,markerEnd:A.markerEnd,markerStart:A.markerStart,sourceX:K,sourceY:Q,targetX:V,targetY:G,sourcePosition:Y,targetPosition:ee,elementsSelectable:_,onEdgeUpdate:a,onContextMenu:s,onMouseEnter:c,onMouseMove:l,onMouseLeave:u,onClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:h,onEdgeUpdateStart:p,onEdgeUpdateEnd:g,rfId:r,ariaLabel:A.ariaLabel,isFocusable:ie,pathOptions:"pathOptions"in A?A.pathOptions:void 0,interactionWidth:A.interactionWidth},A.id)})})]},P)),y]}):null};Ch.displayName="EdgeRenderer";var a1=x.exports.memo(Ch);const s1=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function c1({children:e}){const t=ue(s1);return m("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function u1(e){const t=Is(),n=x.exports.useRef(!1);x.exports.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const l1={[O.Left]:O.Right,[O.Right]:O.Left,[O.Top]:O.Bottom,[O.Bottom]:O.Top},Nh=({nodeId:e,handleType:t,style:n,type:r=ft.Bezier,CustomComponent:i})=>{const{fromNode:o,handleId:a,toX:s,toY:c,connectionMode:l}=ue(x.exports.useCallback(C=>({fromNode:C.nodeInternals.get(e),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[e]),Ee),u=o?.[he]?.handleBounds;let d=u?.[t];if(l===Lt.Loose&&(d=d||u?.[t==="source"?"target":"source"]),!o||!d)return null;const f=a?d.find(C=>C.id===a):d[0],h=f?f.x+f.width/2:(o.width??0)/2,p=f?f.y+f.height/2:o.height??0,g=(o.positionAbsolute?.x??0)+h,y=(o.positionAbsolute?.y??0)+p,v=f?.position,_=v?l1[v]:null;if(!v||!_)return null;if(i)return m(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:f,fromX:g,fromY:y,toX:s,toY:c,fromPosition:v,toPosition:_});let N="";const E={sourceX:g,sourceY:y,sourcePosition:v,targetX:s,targetY:c,targetPosition:_};return r===ft.Bezier?[N]=Ss(E):r===ft.Step?[N]=Va({...E,borderRadius:0}):r===ft.SmoothStep?[N]=Va(E):r===ft.SimpleBezier?[N]=jf(E):N=`M${g},${y} ${s},${c}`,m("path",{d:N,fill:"none",className:"react-flow__connection-path",style:n})};Nh.displayName="ConnectionLine";const d1=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,width:e.width,height:e.height});function f1({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:a,width:s,height:c}=ue(d1,Ee);return!(i&&o&&s&&a)?null:m("svg",{style:e,width:s,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container",children:m("g",{className:"react-flow__connection",children:m(Nh,{nodeId:i,handleType:o,style:t,type:n,CustomComponent:r})})})}const Mh=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:a,onEdgeClick:s,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:y,connectionLineType:v,connectionLineStyle:_,connectionLineComponent:N,connectionLineContainerStyle:E,selectionKeyCode:C,selectionOnDrag:M,selectionMode:T,multiSelectionKeyCode:$,panActivationKeyCode:P,zoomActivationKeyCode:z,deleteKeyCode:D,onlyRenderVisibleElements:A,elementsSelectable:B,selectNodesOnDrag:b,defaultViewport:k,translateExtent:S,minZoom:w,maxZoom:I,preventScrolling:R,defaultMarkerColor:q,zoomOnScroll:F,zoomOnPinch:H,panOnScroll:X,panOnScrollSpeed:Y,panOnScrollMode:ee,zoomOnDoubleClick:ie,panOnDrag:K,onPaneClick:Q,onPaneMouseEnter:V,onPaneMouseMove:G,onPaneMouseLeave:j,onPaneScroll:oe,onPaneContextMenu:te,onEdgeUpdate:le,onEdgeContextMenu:L,onEdgeMouseEnter:se,onEdgeMouseMove:Z,onEdgeMouseLeave:me,edgeUpdaterRadius:Se,onEdgeUpdateStart:Xe,onEdgeUpdateEnd:Re,noDragClassName:ge,noWheelClassName:de,noPanClassName:Me,elevateEdgesOnSelect:$e,disableKeyboardA11y:De,nodeOrigin:st,nodeExtent:Te,rfId:We})=>(u1(o),m(Yw,{onPaneClick:Q,onPaneMouseEnter:V,onPaneMouseMove:G,onPaneMouseLeave:j,onPaneContextMenu:te,onPaneScroll:oe,deleteKeyCode:D,selectionKeyCode:C,selectionOnDrag:M,selectionMode:T,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:$,panActivationKeyCode:P,zoomActivationKeyCode:z,elementsSelectable:B,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:F,zoomOnPinch:H,zoomOnDoubleClick:ie,panOnScroll:X,panOnScrollSpeed:Y,panOnScrollMode:ee,panOnDrag:K,defaultViewport:k,translateExtent:S,minZoom:w,maxZoom:I,onSelectionContextMenu:p,preventScrolling:R,noDragClassName:ge,noWheelClassName:de,noPanClassName:Me,disableKeyboardA11y:De,children:U(c1,{children:[m(a1,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:l,onEdgeUpdate:le,onlyRenderVisibleElements:A,onEdgeContextMenu:L,onEdgeMouseEnter:se,onEdgeMouseMove:Z,onEdgeMouseLeave:me,onEdgeUpdateStart:Xe,onEdgeUpdateEnd:Re,edgeUpdaterRadius:Se,defaultMarkerColor:q,noPanClassName:Me,elevateEdgesOnSelect:!!$e,disableKeyboardA11y:De,rfId:We,children:m(f1,{style:_,type:v,component:N,containerStyle:E})}),m("div",{className:"react-flow__edgelabel-renderer"}),m(Ww,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:b,onlyRenderVisibleElements:A,noPanClassName:Me,noDragClassName:ge,disableKeyboardA11y:De,nodeOrigin:st,nodeExtent:Te,rfId:We})]})}));Mh.displayName="GraphView";var h1=x.exports.memo(Mh);const Xa=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],on={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Xa,nodeExtent:Xa,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:Lt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Hb},p1=()=>Dm((e,t)=>({...on,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:zr(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",a=i?zr(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:a,fitViewOnInitOptions:s,domNode:c,nodeOrigin:l}=t(),u=c?.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((g,y)=>{const v=i.get(y.id);if(v){const _=bs(y.nodeElement);!!(_.width&&_.height&&(v.width!==_.width||v.height!==_.height||y.forceUpdate))&&(i.set(v.id,{...v,[he]:{...v[he],handleBounds:{source:Ac(".source",y.nodeElement,f,l),target:Ac(".target",y.nodeElement,f,l)}},..._}),g.push({id:v.id,type:"dimensions",dimensions:_}))}return g},[]);vh(i,l);const p=a||o&&!a&&yh(t,{initial:!0,...s});e({nodeInternals:new Map(i),fitViewOnInitDone:p}),h?.length>0&&r?.(h)},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=t(),a=n.map(s=>{const c={id:s.id,type:"position",dragging:i};return r&&(c.positionAbsolute=s.positionAbsolute,c.position=s.position),c});o(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:a,getNodes:s,elevateNodesOnSelect:c}=t();if(n?.length){if(o){const l=wh(n,s()),u=zr(l,i,a,c);e({nodeInternals:u})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let a,s=null;r?a=n.map(c=>dt(c,!0)):(a=Ft(o(),n),s=Ft(i,[])),zn({changedNodes:a,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let a,s=null;r?a=n.map(c=>dt(c,!0)):(a=Ft(i,n),s=Ft(o(),[])),zn({changedNodes:s,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=t(),a=n||o(),s=r||i,c=a.map(u=>(u.selected=!1,dt(u.id,!1))),l=s.map(u=>dt(u.id,!1));zn({changedNodes:c,changedEdges:l,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r?.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r?.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(s=>s.selected).map(s=>dt(s.id,!1)),a=n.filter(s=>s.selected).map(s=>dt(s.id,!1));zn({changedNodes:o,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=ws(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:a,d3Selection:s,translateExtent:c}=t();if(!a||!s||!n.x&&!n.y)return;const l=nt.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[i,o]],d=a?.constrain()(l,u,c);a.transform(s,d)},cancelConnection:()=>e({connectionNodeId:on.connectionNodeId,connectionHandleId:on.connectionHandleId,connectionHandleType:on.connectionHandleType}),reset:()=>e({...on})})),Ih=({children:e})=>{const t=x.exports.useRef(null);return t.current||(t.current=p1()),m(Pb,{value:t.current,children:e})};Ih.displayName="ReactFlowProvider";const kh=({children:e})=>x.exports.useContext(br)?m(ae,{children:e}):m(Ih,{children:e});kh.displayName="ReactFlowWrapper";function Oc(e,t){return x.exports.useRef(null),x.exports.useMemo(()=>t(e),[e])}const g1={input:ah,default:Ya,output:ch,group:Ms},m1={default:or,straight:Es,step:_s,smoothstep:wr,simplebezier:xs},v1=[0,0],y1=[15,15],b1={x:0,y:0,zoom:1},w1={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Rh=x.exports.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=g1,edgeTypes:a=m1,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:v,onNodeMouseEnter:_,onNodeMouseMove:N,onNodeMouseLeave:E,onNodeContextMenu:C,onNodeDoubleClick:M,onNodeDragStart:T,onNodeDrag:$,onNodeDragStop:P,onNodesDelete:z,onEdgesDelete:D,onSelectionChange:A,onSelectionDragStart:B,onSelectionDrag:b,onSelectionDragStop:k,onSelectionContextMenu:S,onSelectionStart:w,onSelectionEnd:I,connectionMode:R=Lt.Strict,connectionLineType:q=ft.Bezier,connectionLineStyle:F,connectionLineComponent:H,connectionLineContainerStyle:X,deleteKeyCode:Y="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:ie=!1,selectionMode:K=vn.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:V="Meta",zoomActivationKeyCode:G="Meta",snapToGrid:j=!1,snapGrid:oe=y1,onlyRenderVisibleElements:te=!1,selectNodesOnDrag:le=!0,nodesDraggable:L,nodesConnectable:se,nodesFocusable:Z,nodeOrigin:me=v1,edgesFocusable:Se,elementsSelectable:Xe,defaultViewport:Re=b1,minZoom:ge=.5,maxZoom:de=2,translateExtent:Me=Xa,preventScrolling:$e=!0,nodeExtent:De,defaultMarkerColor:st="#b1b1b7",zoomOnScroll:Te=!0,zoomOnPinch:We=!0,panOnScroll:ve=!1,panOnScrollSpeed:Ae=.5,panOnScrollMode:Ge=Vt.Free,zoomOnDoubleClick:ye=!0,panOnDrag:be=!0,onPaneClick:jt,onPaneMouseEnter:Mr,onPaneMouseMove:Qt,onPaneMouseLeave:Ir,onPaneScroll:zs,onPaneContextMenu:bt,children:Dp,onEdgeUpdate:Op,onEdgeContextMenu:Fp,onEdgeDoubleClick:zp,onEdgeMouseEnter:Bp,onEdgeMouseMove:Hp,onEdgeMouseLeave:Vp,onEdgeUpdateStart:Gp,onEdgeUpdateEnd:Up,edgeUpdaterRadius:Yp=10,onNodesChange:Kp,onEdgesChange:Xp,noDragClassName:Wp="nodrag",noWheelClassName:Zp="nowheel",noPanClassName:Bs="nopan",fitView:jp=!1,fitViewOptions:Qp,connectOnClick:Jp=!0,attributionPosition:eg,proOptions:tg,defaultEdgeOptions:ng,elevateNodesOnSelect:rg=!0,elevateEdgesOnSelect:ig=!1,disableKeyboardA11y:Hs=!1,autoPanOnConnect:og=!0,autoPanOnNodeDrag:ag=!0,connectionRadius:sg=20,onError:cg,style:ug,id:Vs,...lg},dg)=>{const fg=Oc(o,Cw),hg=Oc(a,ww),kr=Vs||"1";return m("div",{...lg,style:{...ug,...w1},ref:dg,className:_e(["react-flow",i]),"data-testid":"rf__wrapper",id:Vs,children:U(kh,{children:[m(h1,{onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:_,onNodeMouseMove:N,onNodeMouseLeave:E,onNodeContextMenu:C,onNodeDoubleClick:M,nodeTypes:fg,edgeTypes:hg,connectionLineType:q,connectionLineStyle:F,connectionLineComponent:H,connectionLineContainerStyle:X,selectionKeyCode:ee,selectionOnDrag:ie,selectionMode:K,deleteKeyCode:Y,multiSelectionKeyCode:V,panActivationKeyCode:Q,zoomActivationKeyCode:G,onlyRenderVisibleElements:te,selectNodesOnDrag:le,defaultViewport:Re,translateExtent:Me,minZoom:ge,maxZoom:de,preventScrolling:$e,zoomOnScroll:Te,zoomOnPinch:We,zoomOnDoubleClick:ye,panOnScroll:ve,panOnScrollSpeed:Ae,panOnScrollMode:Ge,panOnDrag:be,onPaneClick:jt,onPaneMouseEnter:Mr,onPaneMouseMove:Qt,onPaneMouseLeave:Ir,onPaneScroll:zs,onPaneContextMenu:bt,onSelectionContextMenu:S,onSelectionStart:w,onSelectionEnd:I,onEdgeUpdate:Op,onEdgeContextMenu:Fp,onEdgeDoubleClick:zp,onEdgeMouseEnter:Bp,onEdgeMouseMove:Hp,onEdgeMouseLeave:Vp,onEdgeUpdateStart:Gp,onEdgeUpdateEnd:Up,edgeUpdaterRadius:Yp,defaultMarkerColor:st,noDragClassName:Wp,noWheelClassName:Zp,noPanClassName:Bs,elevateEdgesOnSelect:ig,rfId:kr,disableKeyboardA11y:Hs,nodeOrigin:me,nodeExtent:De}),m(fw,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:v,nodesDraggable:L,nodesConnectable:se,nodesFocusable:Z,edgesFocusable:Se,elementsSelectable:Xe,elevateNodesOnSelect:rg,minZoom:ge,maxZoom:de,nodeExtent:De,onNodesChange:Kp,onEdgesChange:Xp,snapToGrid:j,snapGrid:oe,connectionMode:R,translateExtent:Me,connectOnClick:Jp,defaultEdgeOptions:ng,fitView:jp,fitViewOptions:Qp,onNodesDelete:z,onEdgesDelete:D,onNodeDragStart:T,onNodeDrag:$,onNodeDragStop:P,onSelectionDrag:b,onSelectionDragStart:B,onSelectionDragStop:k,noPanClassName:Bs,nodeOrigin:me,rfId:kr,autoPanOnConnect:og,autoPanOnNodeDrag:ag,onError:cg,connectionRadius:sg}),m(lw,{onSelectionChange:A}),Dp,m(Db,{proOptions:tg,position:eg}),m(vw,{rfId:kr,disableKeyboardA11y:Hs})]})})});Rh.displayName="ReactFlow";function Th(e){return t=>{const[n,r]=x.exports.useState(t),i=x.exports.useCallback(o=>r(a=>e(o,a)),[]);return[n,r,i]}}const x1=Th(wh),_1=Th(zw),Ah=({id:e,x:t,y:n,width:r,height:i,style:o,color:a,strokeColor:s,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,onClick:f})=>{const{background:h,backgroundColor:p}=o||{},g=a||h||p;return m("rect",{className:_e(["react-flow__minimap-node",l]),x:t,y:n,rx:u,ry:u,width:r,height:i,fill:g,stroke:s,strokeWidth:c,shapeRendering:d,onClick:f?y=>f(y,e):void 0})};Ah.displayName="MiniMapNode";var E1=x.exports.memo(Ah);const S1=200,C1=150,N1=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{nodes:t.filter(r=>!r.hidden&&r.width&&r.height),viewBB:n,boundingRect:t.length>0?zb(Ns(t,e.nodeOrigin),n):n,rfId:e.rfId,nodeOrigin:e.nodeOrigin}},Vr=e=>e instanceof Function?e:()=>e,M1="react-flow__minimap-desc";function Lh({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:a=2,maskColor:s="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:l=1,position:u="bottom-right",onClick:d,onNodeClick:f,pannable:h=!1,zoomable:p=!1,ariaLabel:g="React Flow mini map"}){const y=pe(),v=x.exports.useRef(null),{boundingRect:_,viewBB:N,nodes:E,rfId:C,nodeOrigin:M}=ue(N1,Ee),T=e?.width??S1,$=e?.height??C1,P=Vr(r),z=Vr(n),D=Vr(i),A=_.width/T,B=_.height/$,b=Math.max(A,B),k=b*T,S=b*$,w=5*b,I=_.x-(k-_.width)/2-w,R=_.y-(S-_.height)/2-w,q=k+w*2,F=S+w*2,H=typeof window>"u"||!!window.chrome?"crispEdges":"geometricPrecision",X=`${M1}-${C}`,Y=x.exports.useRef(0);Y.current=b,x.exports.useEffect(()=>{if(v.current){const K=Le(v.current),Q=j=>{const{transform:oe,d3Selection:te,d3Zoom:le}=y.getState();if(j.sourceEvent.type!=="wheel"||!te||!le)return;const L=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*10,se=oe[2]*Math.pow(2,L);le.scaleTo(te,se)},V=j=>{const{transform:oe,d3Selection:te,d3Zoom:le,translateExtent:L,width:se,height:Z}=y.getState();if(j.sourceEvent.type!=="mousemove"||!te||!le)return;const me={x:oe[0]-j.sourceEvent.movementX*Y.current*Math.max(1,oe[2]),y:oe[1]-j.sourceEvent.movementY*Y.current*Math.max(1,oe[2])},Se=[[0,0],[se,Z]],Xe=nt.translate(me.x,me.y).scale(oe[2]),Re=le.constrain()(Xe,Se,L);le.transform(te,Re)},G=Bf().on("zoom",h?V:null).on("zoom.wheel",p?Q:null);return K.call(G),()=>{K.on("zoom",null)}}},[h,p]);const ee=d?K=>{const Q=Oe(K);d(K,{x:Q[0],y:Q[1]})}:void 0,ie=f?(K,Q)=>{const V=y.getState().nodeInternals.get(Q);f(K,V)}:void 0;return m(ys,{position:u,style:e,className:_e(["react-flow__minimap",t]),children:U("svg",{width:T,height:$,viewBox:`${I} ${R} ${q} ${F}`,role:"img","aria-labelledby":X,ref:v,onClick:ee,children:[g&&m("title",{id:X,children:g}),E.map(K=>{const{x:Q,y:V}=Rt(K,M).positionAbsolute;return m(E1,{x:Q,y:V,width:K.width,height:K.height,style:K.style,className:D(K),color:P(K),borderRadius:o,strokeColor:z(K),strokeWidth:a,shapeRendering:H,onClick:ie,id:K.id},K.id)}),m("path",{className:"react-flow__minimap-mask",d:`M${I-w},${R-w}h${q+w*2}v${F+w*2}h${-q-w*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fill:s,fillRule:"evenodd",stroke:c,strokeWidth:l,pointerEvents:"none"})]})})}Lh.displayName="MiniMap";var I1=x.exports.memo(Lh);function k1(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function R1(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m("path",{d:"M0 0h32v4.2H0z"})})}function T1(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function A1(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function L1(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const cn=({children:e,className:t,...n})=>m("button",{type:"button",className:_e(["react-flow__controls-button",t]),...n,children:e});cn.displayName="ControlButton";const q1=e=>e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable,qh=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:a,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d="bottom-left"})=>{const f=pe(),[h,p]=x.exports.useState(!1),g=ue(q1),{zoomIn:y,zoomOut:v,fitView:_}=Is();if(x.exports.useEffect(()=>{p(!0)},[]),!h)return null;const N=()=>{y(),o?.()},E=()=>{v(),a?.()},C=()=>{_(i),s?.()},M=()=>{f.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),c?.(!g)};return U(ys,{className:_e(["react-flow__controls",l]),position:d,style:e,children:[t&&U(ae,{children:[m(cn,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:m(k1,{})}),m(cn,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:m(R1,{})})]}),n&&m(cn,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view",children:m(T1,{})}),r&&m(cn,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity",children:g?m(L1,{}):m(A1,{})}),u]})};qh.displayName="Controls";var P1=x.exports.memo(qh),ze;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ze||(ze={}));function $1({color:e,dimensions:t,lineWidth:n}){return m("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function D1({color:e,radius:t}){return m("circle",{cx:t,cy:t,r:t,fill:e})}const O1={[ze.Dots]:"#91919a",[ze.Lines]:"#eee",[ze.Cross]:"#e2e2e2"},F1={[ze.Dots]:1,[ze.Lines]:1,[ze.Cross]:6},z1=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ph({variant:e=ze.Dots,gap:t=20,size:n,lineWidth:r=1,color:i,style:o,className:a}){const s=x.exports.useRef(null),{transform:c,patternId:l}=ue(z1,Ee),u=i||O1[e],d=n||F1[e],f=e===ze.Dots,h=e===ze.Cross,p=Array.isArray(t)?t:[t,t],g=[p[0]*c[2]||1,p[1]*c[2]||1],y=d*c[2],v=h?[y,y]:g,_=f?[y/2,y/2]:[v[0]/2,v[1]/2];return U("svg",{className:_e(["react-flow__background",a]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:s,children:[m("pattern",{id:l,x:c[0]%g[0],y:c[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:f?m(D1,{color:u,radius:y/2}):m($1,{dimensions:v,color:u,lineWidth:r})}),m("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${l})`})]})}Ph.displayName="Background";var B1=x.exports.memo(Ph);function H1(e,t){const n=x.exports.useRef(!1);x.exports.useEffect(()=>{if(n.current)return e();n.current=!0},t)}var Gr,Fc;function Rs(){if(Fc)return Gr;Fc=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Gr=e,Gr}var Ur,zc;function V1(){if(zc)return Ur;zc=1;var e=fr,t=qt();function n(r,i){return r&&e(i,t(i),r)}return Ur=n,Ur}var Yr,Bc;function G1(){if(Bc)return Yr;Bc=1;var e=fr,t=Cn;function n(r,i){return r&&e(i,t(i),r)}return Yr=n,Yr}var Kr,Hc;function U1(){if(Hc)return Kr;Hc=1;var e=fr,t=Hd();function n(r,i){return e(r,t(r),i)}return Kr=n,Kr}var Xr,Vc;function $h(){if(Vc)return Xr;Vc=1;var e=Vd(),t=Kd,n=Hd(),r=Yg(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)e(s,n(a)),a=t(a);return s}:r;return Xr=o,Xr}var Wr,Gc;function Y1(){if(Gc)return Wr;Gc=1;var e=fr,t=$h();function n(r,i){return e(r,t(r),i)}return Wr=n,Wr}var Zr,Uc;function K1(){if(Uc)return Zr;Uc=1;var e=Kg(),t=$h(),n=Cn;function r(i){return e(i,n,t)}return Zr=r,Zr}var jr,Yc;function X1(){if(Yc)return jr;Yc=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return jr=n,jr}var Qr,Kc;function W1(){if(Kc)return Qr;Kc=1;var e=Xd;function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Qr=t,Qr}var Jr,Xc;function Z1(){if(Xc)return Jr;Xc=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Jr=t,Jr}var ei,Wc;function j1(){if(Wc)return ei;Wc=1;var e=ns,t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return ei=r,ei}var ti,Zc;function Q1(){if(Zc)return ti;Zc=1;var e=Xd,t=W1(),n=Z1(),r=j1(),i=nm,o="[object Boolean]",a="[object Date]",s="[object Map]",c="[object Number]",l="[object RegExp]",u="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",p="[object DataView]",g="[object Float32Array]",y="[object Float64Array]",v="[object Int8Array]",_="[object Int16Array]",N="[object Int32Array]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",M="[object Uint16Array]",T="[object Uint32Array]";function $(P,z,D){var A=P.constructor;switch(z){case h:return e(P);case o:case a:return new A(+P);case p:return t(P,D);case g:case y:case v:case _:case N:case E:case C:case M:case T:return i(P,D);case s:return new A;case c:case d:return new A(P);case l:return n(P);case u:return new A;case f:return r(P)}}return ti=$,ti}var ni,jc;function J1(){if(jc)return ni;jc=1;var e=Sn(),t=hr,n="[object Map]";function r(i){return t(i)&&e(i)==n}return ni=r,ni}var ri,Qc;function ex(){if(Qc)return ri;Qc=1;var e=J1(),t=rs(),n=Wd.exports,r=n&&n.isMap,i=r?t(r):e;return ri=i,ri}var ii,Jc;function tx(){if(Jc)return ii;Jc=1;var e=Sn(),t=hr,n="[object Set]";function r(i){return t(i)&&e(i)==n}return ii=r,ii}var oi,eu;function nx(){if(eu)return oi;eu=1;var e=tx(),t=rs(),n=Wd.exports,r=n&&n.isSet,i=r?t(r):e;return oi=i,oi}var ai,tu;function Dh(){if(tu)return ai;tu=1;var e=Zd,t=Rs(),n=is(),r=V1(),i=G1(),o=rm.exports,a=im,s=U1(),c=Y1(),l=Xg(),u=K1(),d=Sn(),f=X1(),h=Q1(),p=om,g=xe(),y=os.exports,v=ex(),_=Nn,N=nx(),E=qt(),C=Cn,M=1,T=2,$=4,P="[object Arguments]",z="[object Array]",D="[object Boolean]",A="[object Date]",B="[object Error]",b="[object Function]",k="[object GeneratorFunction]",S="[object Map]",w="[object Number]",I="[object Object]",R="[object RegExp]",q="[object Set]",F="[object String]",H="[object Symbol]",X="[object WeakMap]",Y="[object ArrayBuffer]",ee="[object DataView]",ie="[object Float32Array]",K="[object Float64Array]",Q="[object Int8Array]",V="[object Int16Array]",G="[object Int32Array]",j="[object Uint8Array]",oe="[object Uint8ClampedArray]",te="[object Uint16Array]",le="[object Uint32Array]",L={};L[P]=L[z]=L[Y]=L[ee]=L[D]=L[A]=L[ie]=L[K]=L[Q]=L[V]=L[G]=L[S]=L[w]=L[I]=L[R]=L[q]=L[F]=L[H]=L[j]=L[oe]=L[te]=L[le]=!0,L[B]=L[b]=L[X]=!1;function se(Z,me,Se,Xe,Re,ge){var de,Me=me&M,$e=me&T,De=me&$;if(Se&&(de=Re?Se(Z,Xe,Re,ge):Se(Z)),de!==void 0)return de;if(!_(Z))return Z;var st=g(Z);if(st){if(de=f(Z),!Me)return a(Z,de)}else{var Te=d(Z),We=Te==b||Te==k;if(y(Z))return o(Z,Me);if(Te==I||Te==P||We&&!Re){if(de=$e||We?{}:p(Z),!Me)return $e?c(Z,i(de,Z)):s(Z,r(de,Z))}else{if(!L[Te])return Re?Z:{};de=h(Z,Te,Me)}}ge||(ge=new e);var ve=ge.get(Z);if(ve)return ve;ge.set(Z,de),N(Z)?Z.forEach(function(ye){de.add(se(ye,me,Se,ye,Z,ge))}):v(Z)&&Z.forEach(function(ye,be){de.set(be,se(ye,me,Se,be,Z,ge))});var Ae=De?$e?u:l:$e?C:E,Ge=st?void 0:Ae(Z);return t(Ge||Z,function(ye,be){Ge&&(be=ye,ye=Z[be]),n(de,be,se(ye,me,Se,be,Z,ge))}),de}return ai=se,ai}var si,nu;function rx(){if(nu)return si;nu=1;var e=Dh(),t=4;function n(r){return e(r,t)}return si=n,si}var ci={exports:{}},ui,ru;function Ts(){if(ru)return ui;ru=1;var e=jd,t=qt();function n(r,i){return r&&e(r,i,t)}return ui=n,ui}var li,iu;function ix(){if(iu)return li;iu=1;var e=Mn;function t(n,r){return function(i,o){if(i==null)return i;if(!e(i))return n(i,o);for(var a=i.length,s=r?a:-1,c=Object(i);(r?s--:++s<a)&&o(c[s],s,c)!==!1;);return i}}return li=t,li}var di,ou;function xr(){if(ou)return di;ou=1;var e=Ts(),t=ix(),n=t(e);return di=n,di}var fi,au;function Oh(){if(au)return fi;au=1;var e=In;function t(n){return typeof n=="function"?n:e}return fi=t,fi}var hi,su;function Fh(){if(su)return hi;su=1;var e=Rs(),t=xr(),n=Oh(),r=xe();function i(o,a){var s=r(o)?e:t;return s(o,n(a))}return hi=i,hi}var cu;function zh(){return cu||(cu=1,function(e){e.exports=Fh()}(ci)),ci.exports}var pi,uu;function ox(){if(uu)return pi;uu=1;var e=xr();function t(n,r){var i=[];return e(n,function(o,a,s){r(o,a,s)&&i.push(o)}),i}return pi=t,pi}var gi,lu;function ax(){if(lu)return gi;lu=1;var e=Zd,t=Gd,n=1,r=2;function i(o,a,s,c){var l=s.length,u=l,d=!c;if(o==null)return!u;for(o=Object(o);l--;){var f=s[l];if(d&&f[2]?f[1]!==o[f[0]]:!(f[0]in o))return!1}for(;++l<u;){f=s[l];var h=f[0],p=o[h],g=f[1];if(d&&f[2]){if(p===void 0&&!(h in o))return!1}else{var y=new e;if(c)var v=c(p,g,h,o,a,y);if(!(v===void 0?t(g,p,n|r,c,y):v))return!1}}return!0}return gi=i,gi}var mi,du;function Bh(){if(du)return mi;du=1;var e=Nn;function t(n){return n===n&&!e(n)}return mi=t,mi}var vi,fu;function sx(){if(fu)return vi;fu=1;var e=Bh(),t=qt();function n(r){for(var i=t(r),o=i.length;o--;){var a=i[o],s=r[a];i[o]=[a,s,e(s)]}return i}return vi=n,vi}var yi,hu;function Hh(){if(hu)return yi;hu=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return yi=e,yi}var bi,pu;function cx(){if(pu)return bi;pu=1;var e=ax(),t=sx(),n=Hh();function r(i){var o=t(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(a){return a===i||e(a,i,o)}}return bi=r,bi}var wi,gu;function Zt(){if(gu)return wi;gu=1;var e=Qd,t=hr,n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return wi=r,wi}var xi,mu;function As(){if(mu)return xi;mu=1;var e=xe(),t=Zt(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(e(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||t(o)?!0:r.test(o)||!n.test(o)||a!=null&&o in Object(a)}return xi=i,xi}var _i,vu;function ux(){if(vu)return _i;vu=1;var e=am,t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],c=o.cache;if(c.has(s))return c.get(s);var l=r.apply(this,a);return o.cache=c.set(s,l)||c,l};return o.cache=new(n.Cache||e),o}return n.Cache=e,_i=n,_i}var Ei,yu;function lx(){if(yu)return Ei;yu=1;var e=ux(),t=500;function n(r){var i=e(r,function(a){return o.size===t&&o.clear(),a}),o=i.cache;return i}return Ei=n,Ei}var Si,bu;function dx(){if(bu)return Si;bu=1;var e=lx(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(a,s,c,l){o.push(c?l.replace(n,"$1"):s||a)}),o});return Si=r,Si}var Ci,wu;function _r(){if(wu)return Ci;wu=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,o=Array(i);++r<i;)o[r]=n(t[r],r,t);return o}return Ci=e,Ci}var Ni,xu;function fx(){if(xu)return Ni;xu=1;var e=ns,t=_r(),n=xe(),r=Zt(),i=1/0,o=e?e.prototype:void 0,a=o?o.toString:void 0;function s(c){if(typeof c=="string")return c;if(n(c))return t(c,s)+"";if(r(c))return a?a.call(c):"";var l=c+"";return l=="0"&&1/c==-i?"-0":l}return Ni=s,Ni}var Mi,_u;function Vh(){if(_u)return Mi;_u=1;var e=fx();function t(n){return n==null?"":e(n)}return Mi=t,Mi}var Ii,Eu;function Er(){if(Eu)return Ii;Eu=1;var e=xe(),t=As(),n=dx(),r=Vh();function i(o,a){return e(o)?o:t(o,a)?[o]:n(r(o))}return Ii=i,Ii}var ki,Su;function An(){if(Su)return ki;Su=1;var e=Zt(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var i=r+"";return i=="0"&&1/r==-t?"-0":i}return ki=n,ki}var Ri,Cu;function Sr(){if(Cu)return Ri;Cu=1;var e=Er(),t=An();function n(r,i){i=e(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[t(i[o++])];return o&&o==a?r:void 0}return Ri=n,Ri}var Ti,Nu;function hx(){if(Nu)return Ti;Nu=1;var e=Sr();function t(n,r,i){var o=n==null?void 0:e(n,r);return o===void 0?i:o}return Ti=t,Ti}var Ai,Mu;function px(){if(Mu)return Ai;Mu=1;function e(t,n){return t!=null&&n in Object(t)}return Ai=e,Ai}var Li,Iu;function Gh(){if(Iu)return Li;Iu=1;var e=Er(),t=as,n=xe(),r=Jd,i=sm,o=An();function a(s,c,l){c=e(c,s);for(var u=-1,d=c.length,f=!1;++u<d;){var h=o(c[u]);if(!(f=s!=null&&l(s,h)))break;s=s[h]}return f||++u!=d?f:(d=s==null?0:s.length,!!d&&i(d)&&r(h,d)&&(n(s)||t(s)))}return Li=a,Li}var qi,ku;function Uh(){if(ku)return qi;ku=1;var e=px(),t=Gh();function n(r,i){return r!=null&&t(r,i,e)}return qi=n,qi}var Pi,Ru;function gx(){if(Ru)return Pi;Ru=1;var e=Gd,t=hx(),n=Uh(),r=As(),i=Bh(),o=Hh(),a=An(),s=1,c=2;function l(u,d){return r(u)&&i(d)?o(a(u),d):function(f){var h=t(f,u);return h===void 0&&h===d?n(f,u):e(d,h,s|c)}}return Pi=l,Pi}var $i,Tu;function Yh(){if(Tu)return $i;Tu=1;function e(t){return function(n){return n?.[t]}}return $i=e,$i}var Di,Au;function mx(){if(Au)return Di;Au=1;var e=Sr();function t(n){return function(r){return e(r,n)}}return Di=t,Di}var Oi,Lu;function vx(){if(Lu)return Oi;Lu=1;var e=Yh(),t=mx(),n=As(),r=An();function i(o){return n(o)?e(r(o)):t(o)}return Oi=i,Oi}var Fi,qu;function at(){if(qu)return Fi;qu=1;var e=cx(),t=gx(),n=In,r=xe(),i=vx();function o(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):i(a)}return Fi=o,Fi}var zi,Pu;function Kh(){if(Pu)return zi;Pu=1;var e=Wg(),t=ox(),n=at(),r=xe();function i(o,a){var s=r(o)?e:t;return s(o,n(a,3))}return zi=i,zi}var Bi,$u;function yx(){if($u)return Bi;$u=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Bi=n,Bi}var Hi,Du;function Xh(){if(Du)return Hi;Du=1;var e=yx(),t=Gh();function n(r,i){return r!=null&&t(r,i,e)}return Hi=n,Hi}var Vi,Ou;function bx(){if(Ou)return Vi;Ou=1;var e=Ud(),t=Sn(),n=as,r=xe(),i=Mn,o=os.exports,a=cm,s=ef,c="[object Map]",l="[object Set]",u=Object.prototype,d=u.hasOwnProperty;function f(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||o(h)||s(h)||n(h)))return!h.length;var p=t(h);if(p==c||p==l)return!h.size;if(a(h))return!e(h).length;for(var g in h)if(d.call(h,g))return!1;return!0}return Vi=f,Vi}var Gi,Fu;function Wh(){if(Fu)return Gi;Fu=1;function e(t){return t===void 0}return Gi=e,Gi}var Ui,zu;function Zh(){if(zu)return Ui;zu=1;var e=xr(),t=Mn;function n(r,i){var o=-1,a=t(r)?Array(r.length):[];return e(r,function(s,c,l){a[++o]=i(s,c,l)}),a}return Ui=n,Ui}var Yi,Bu;function jh(){if(Bu)return Yi;Bu=1;var e=_r(),t=at(),n=Zh(),r=xe();function i(o,a){var s=r(o)?e:n;return s(o,t(a,3))}return Yi=i,Yi}var Ki,Hu;function wx(){if(Hu)return Ki;Hu=1;function e(t,n,r,i){var o=-1,a=t==null?0:t.length;for(i&&a&&(r=t[++o]);++o<a;)r=n(r,t[o],o,t);return r}return Ki=e,Ki}var Xi,Vu;function xx(){if(Vu)return Xi;Vu=1;function e(t,n,r,i,o){return o(t,function(a,s,c){r=i?(i=!1,a):n(r,a,s,c)}),r}return Xi=e,Xi}var Wi,Gu;function Qh(){if(Gu)return Wi;Gu=1;var e=wx(),t=xr(),n=at(),r=xx(),i=xe();function o(a,s,c){var l=i(a)?e:r,u=arguments.length<3;return l(a,n(s,4),c,u,t)}return Wi=o,Wi}var Zi,Uu;function _x(){if(Uu)return Zi;Uu=1;var e=Qd,t=xe(),n=hr,r="[object String]";function i(o){return typeof o=="string"||!t(o)&&n(o)&&e(o)==r}return Zi=i,Zi}var ji,Yu;function Ex(){if(Yu)return ji;Yu=1;var e=Yh(),t=e("length");return ji=t,ji}var Qi,Ku;function Sx(){if(Ku)return Qi;Ku=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+e+i+o+"]");function c(l){return s.test(l)}return Qi=c,Qi}var Ji,Xu;function Cx(){if(Xu)return Ji;Xu=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="["+e+"]",s="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+c+")",u="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",p=l+"?",g="["+o+"]?",y="(?:"+h+"(?:"+[u,d,f].join("|")+")"+g+p+")*",v=g+p+y,_="(?:"+[u+s+"?",s,d,f,a].join("|")+")",N=RegExp(c+"(?="+c+")|"+_+v,"g");function E(C){for(var M=N.lastIndex=0;N.test(C);)++M;return M}return Ji=E,Ji}var eo,Wu;function Nx(){if(Wu)return eo;Wu=1;var e=Ex(),t=Sx(),n=Cx();function r(i){return t(i)?n(i):e(i)}return eo=r,eo}var to,Zu;function Mx(){if(Zu)return to;Zu=1;var e=Ud(),t=Sn(),n=Mn,r=_x(),i=Nx(),o="[object Map]",a="[object Set]";function s(c){if(c==null)return 0;if(n(c))return r(c)?i(c):c.length;var l=t(c);return l==o||l==a?c.size:e(c).length}return to=s,to}var no,ju;function Ix(){if(ju)return no;ju=1;var e=Rs(),t=um,n=Ts(),r=at(),i=Kd,o=xe(),a=os.exports,s=tf,c=Nn,l=ef;function u(d,f,h){var p=o(d),g=p||a(d)||l(d);if(f=r(f,4),h==null){var y=d&&d.constructor;g?h=p?new y:[]:c(d)?h=s(y)?t(i(d)):{}:h={}}return(g?e:n)(d,function(v,_,N){return f(h,v,_,N)}),h}return no=u,no}var ro,Qu;function kx(){if(Qu)return ro;Qu=1;var e=ns,t=as,n=xe(),r=e?e.isConcatSpreadable:void 0;function i(o){return n(o)||t(o)||!!(r&&o&&o[r])}return ro=i,ro}var io,Ju;function Ls(){if(Ju)return io;Ju=1;var e=Vd(),t=kx();function n(r,i,o,a,s){var c=-1,l=r.length;for(o||(o=t),s||(s=[]);++c<l;){var u=r[c];i>0&&o(u)?i>1?n(u,i-1,o,a,s):e(s,u):a||(s[s.length]=u)}return s}return io=n,io}var oo,el;function Jh(){if(el)return oo;el=1;function e(t,n,r,i){for(var o=t.length,a=r+(i?1:-1);i?a--:++a<o;)if(n(t[a],a,t))return a;return-1}return oo=e,oo}var ao,tl;function Rx(){if(tl)return ao;tl=1;function e(t){return t!==t}return ao=e,ao}var so,nl;function Tx(){if(nl)return so;nl=1;function e(t,n,r){for(var i=r-1,o=t.length;++i<o;)if(t[i]===n)return i;return-1}return so=e,so}var co,rl;function Ax(){if(rl)return co;rl=1;var e=Jh(),t=Rx(),n=Tx();function r(i,o,a){return o===o?n(i,o,a):e(i,t,a)}return co=r,co}var uo,il;function Lx(){if(il)return uo;il=1;var e=Ax();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return uo=t,uo}var lo,ol;function qx(){if(ol)return lo;ol=1;function e(t,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;)if(r(n,t[i]))return!0;return!1}return lo=e,lo}var fo,al;function Px(){if(al)return fo;al=1;function e(){}return fo=e,fo}var ho,sl;function $x(){if(sl)return ho;sl=1;var e=Zg(),t=Px(),n=Yd,r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(o){return new e(o)}:t;return ho=i,ho}var po,cl;function Dx(){if(cl)return po;cl=1;var e=jg,t=Lx(),n=qx(),r=Qg,i=$x(),o=Yd,a=200;function s(c,l,u){var d=-1,f=t,h=c.length,p=!0,g=[],y=g;if(u)p=!1,f=n;else if(h>=a){var v=l?null:i(c);if(v)return o(v);p=!1,f=r,y=new e}else y=l?[]:g;e:for(;++d<h;){var _=c[d],N=l?l(_):_;if(_=u||_!==0?_:0,p&&N===N){for(var E=y.length;E--;)if(y[E]===N)continue e;l&&y.push(N),g.push(_)}else f(y,N,u)||(y!==g&&y.push(N),g.push(_))}return g}return po=s,po}var go,ul;function Ox(){if(ul)return go;ul=1;var e=Ls(),t=ss,n=Dx(),r=lm,i=t(function(o){return n(e(o,1,r,!0))});return go=i,go}var mo,ll;function Fx(){if(ll)return mo;ll=1;var e=_r();function t(n,r){return e(r,function(i){return n[i]})}return mo=t,mo}var vo,dl;function ep(){if(dl)return vo;dl=1;var e=Fx(),t=qt();function n(r){return r==null?[]:e(r,t(r))}return vo=n,vo}var yo,fl;function Pe(){if(fl)return yo;fl=1;var e;if(typeof ts=="function")try{e={clone:rx(),constant:nf(),each:zh(),filter:Kh(),has:Xh(),isArray:xe(),isEmpty:bx(),isFunction:tf,isUndefined:Wh(),keys:qt(),map:jh(),reduce:Qh(),size:Mx(),transform:Ix(),union:Ox(),values:ep()}}catch{}return e||(e=window._),yo=e,yo}var bo,hl;function qs(){if(hl)return bo;hl=1;var e=Pe();bo=i;var t="\0",n="\0",r="";function i(u){this._isDirected=e.has(u,"directed")?u.directed:!0,this._isMultigraph=e.has(u,"multigraph")?u.multigraph:!1,this._isCompound=e.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(u){return this._label=u,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultNodeLabelFn=u,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._in[d])})},i.prototype.sinks=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._out[d])})},i.prototype.setNodes=function(u,d){var f=arguments,h=this;return e.each(u,function(p){f.length>1?h.setNode(p,d):h.setNode(p)}),this},i.prototype.setNode=function(u,d){return e.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=d),this):(this._nodes[u]=arguments.length>1?d:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=n,this._children[u]={},this._children[n][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},i.prototype.node=function(u){return this._nodes[u]},i.prototype.hasNode=function(u){return e.has(this._nodes,u)},i.prototype.removeNode=function(u){var d=this;if(e.has(this._nodes,u)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],e.each(this.children(u),function(h){d.setParent(h)}),delete this._children[u]),e.each(e.keys(this._in[u]),f),delete this._in[u],delete this._preds[u],e.each(e.keys(this._out[u]),f),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},i.prototype.setParent=function(u,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===u)throw new Error("Setting "+d+" as parent of "+u+" would create a cycle");this.setNode(d)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=d,this._children[d][u]=!0,this},i.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},i.prototype.parent=function(u){if(this._isCompound){var d=this._parent[u];if(d!==n)return d}},i.prototype.children=function(u){if(e.isUndefined(u)&&(u=n),this._isCompound){var d=this._children[u];if(d)return e.keys(d)}else{if(u===n)return this.nodes();if(this.hasNode(u))return[]}},i.prototype.predecessors=function(u){var d=this._preds[u];if(d)return e.keys(d)},i.prototype.successors=function(u){var d=this._sucs[u];if(d)return e.keys(d)},i.prototype.neighbors=function(u){var d=this.predecessors(u);if(d)return e.union(d,this.successors(u))},i.prototype.isLeaf=function(u){var d;return this.isDirected()?d=this.successors(u):d=this.neighbors(u),d.length===0},i.prototype.filterNodes=function(u){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(g,y){u(y)&&d.setNode(y,g)}),e.each(this._edgeObjs,function(g){d.hasNode(g.v)&&d.hasNode(g.w)&&d.setEdge(g,f.edge(g))});var h={};function p(g){var y=f.parent(g);return y===void 0||d.hasNode(y)?(h[g]=y,y):y in h?h[y]:p(y)}return this._isCompound&&e.each(d.nodes(),function(g){d.setParent(g,p(g))}),d},i.prototype.setDefaultEdgeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultEdgeLabelFn=u,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(u,d){var f=this,h=arguments;return e.reduce(u,function(p,g){return h.length>1?f.setEdge(p,g,d):f.setEdge(p,g),g}),this},i.prototype.setEdge=function(){var u,d,f,h,p=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(u=g.v,d=g.w,f=g.name,arguments.length===2&&(h=arguments[1],p=!0)):(u=g,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],p=!0)),u=""+u,d=""+d,e.isUndefined(f)||(f=""+f);var y=s(this._isDirected,u,d,f);if(e.has(this._edgeLabels,y))return p&&(this._edgeLabels[y]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(d),this._edgeLabels[y]=p?h:this._defaultEdgeLabelFn(u,d,f);var v=c(this._isDirected,u,d,f);return u=v.v,d=v.w,Object.freeze(v),this._edgeObjs[y]=v,o(this._preds[d],u),o(this._sucs[u],d),this._in[d][y]=v,this._out[u][y]=v,this._edgeCount++,this},i.prototype.edge=function(u,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,u,d,f);return this._edgeLabels[h]},i.prototype.hasEdge=function(u,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,u,d,f);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(u,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,u,d,f),p=this._edgeObjs[h];return p&&(u=p.v,d=p.w,delete this._edgeLabels[h],delete this._edgeObjs[h],a(this._preds[d],u),a(this._sucs[u],d),delete this._in[d][h],delete this._out[u][h],this._edgeCount--),this},i.prototype.inEdges=function(u,d){var f=this._in[u];if(f){var h=e.values(f);return d?e.filter(h,function(p){return p.v===d}):h}},i.prototype.outEdges=function(u,d){var f=this._out[u];if(f){var h=e.values(f);return d?e.filter(h,function(p){return p.w===d}):h}},i.prototype.nodeEdges=function(u,d){var f=this.inEdges(u,d);if(f)return f.concat(this.outEdges(u,d))};function o(u,d){u[d]?u[d]++:u[d]=1}function a(u,d){--u[d]||delete u[d]}function s(u,d,f,h){var p=""+d,g=""+f;if(!u&&p>g){var y=p;p=g,g=y}return p+r+g+r+(e.isUndefined(h)?t:h)}function c(u,d,f,h){var p=""+d,g=""+f;if(!u&&p>g){var y=p;p=g,g=y}var v={v:p,w:g};return h&&(v.name=h),v}function l(u,d){return s(u,d.v,d.w,d.name)}return bo}var wo,pl;function zx(){return pl||(pl=1,wo="2.1.8"),wo}var xo,gl;function Bx(){return gl||(gl=1,xo={Graph:qs(),version:zx()}),xo}var _o,ml;function Hx(){if(ml)return _o;ml=1;var e=Pe(),t=qs();_o={write:n,read:o};function n(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function r(a){return e.map(a.nodes(),function(s){var c=a.node(s),l=a.parent(s),u={v:s};return e.isUndefined(c)||(u.value=c),e.isUndefined(l)||(u.parent=l),u})}function i(a){return e.map(a.edges(),function(s){var c=a.edge(s),l={v:s.v,w:s.w};return e.isUndefined(s.name)||(l.name=s.name),e.isUndefined(c)||(l.value=c),l})}function o(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(c){s.setNode(c.v,c.value),c.parent&&s.setParent(c.v,c.parent)}),e.each(a.edges,function(c){s.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),s}return _o}var Eo,vl;function Vx(){if(vl)return Eo;vl=1;var e=Pe();Eo=t;function t(n){var r={},i=[],o;function a(s){e.has(r,s)||(r[s]=!0,o.push(s),e.each(n.successors(s),a),e.each(n.predecessors(s),a))}return e.each(n.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return Eo}var So,yl;function tp(){if(yl)return So;yl=1;var e=Pe();So=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var o=this._arr,a=o.length;return i[n]=a,o.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,o=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,o<r.length&&(a=r[o].priority<r[a].priority?o:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<i));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var i=this._arr,o=this._keyIndices,a=i[n],s=i[r];i[n]=s,i[r]=a,o[s.key]=n,o[a.key]=r},So}var Co,bl;function np(){if(bl)return Co;bl=1;var e=Pe(),t=tp();Co=r;var n=e.constant(1);function r(o,a,s,c){return i(o,String(a),s||n,c||function(l){return o.outEdges(l)})}function i(o,a,s,c){var l={},u=new t,d,f,h=function(p){var g=p.v!==d?p.v:p.w,y=l[g],v=s(p),_=f.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+v);_<y.distance&&(y.distance=_,y.predecessor=d,u.decrease(g,_))};for(o.nodes().forEach(function(p){var g=p===a?0:Number.POSITIVE_INFINITY;l[p]={distance:g},u.add(p,g)});u.size()>0&&(d=u.removeMin(),f=l[d],f.distance!==Number.POSITIVE_INFINITY);)c(d).forEach(h);return l}return Co}var No,wl;function Gx(){if(wl)return No;wl=1;var e=np(),t=Pe();No=n;function n(r,i,o){return t.transform(r.nodes(),function(a,s){a[s]=e(r,s,i,o)},{})}return No}var Mo,xl;function rp(){if(xl)return Mo;xl=1;var e=Pe();Mo=t;function t(n){var r=0,i=[],o={},a=[];function s(c){var l=o[c]={onStack:!0,lowlink:r,index:r++};if(i.push(c),n.successors(c).forEach(function(f){e.has(o,f)?o[f].onStack&&(l.lowlink=Math.min(l.lowlink,o[f].index)):(s(f),l.lowlink=Math.min(l.lowlink,o[f].lowlink))}),l.lowlink===l.index){var u=[],d;do d=i.pop(),o[d].onStack=!1,u.push(d);while(c!==d);a.push(u)}}return n.nodes().forEach(function(c){e.has(o,c)||s(c)}),a}return Mo}var Io,_l;function Ux(){if(_l)return Io;_l=1;var e=Pe(),t=rp();Io=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Io}var ko,El;function Yx(){if(El)return ko;El=1;var e=Pe();ko=n;var t=e.constant(1);function n(i,o,a){return r(i,o||t,a||function(s){return i.outEdges(s)})}function r(i,o,a){var s={},c=i.nodes();return c.forEach(function(l){s[l]={},s[l][l]={distance:0},c.forEach(function(u){l!==u&&(s[l][u]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(u){var d=u.v===l?u.w:u.v,f=o(u);s[l][d]={distance:f,predecessor:l}})}),c.forEach(function(l){var u=s[l];c.forEach(function(d){var f=s[d];c.forEach(function(h){var p=f[l],g=u[h],y=f[h],v=p.distance+g.distance;v<y.distance&&(y.distance=v,y.predecessor=g.predecessor)})})}),s}return ko}var Ro,Sl;function ip(){if(Sl)return Ro;Sl=1;var e=Pe();Ro=t,t.CycleException=n;function t(r){var i={},o={},a=[];function s(c){if(e.has(o,c))throw new n;e.has(i,c)||(o[c]=!0,i[c]=!0,e.each(r.predecessors(c),s),delete o[c],a.push(c))}if(e.each(r.sinks(),s),e.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,Ro}var To,Cl;function Kx(){if(Cl)return To;Cl=1;var e=ip();To=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return To}var Ao,Nl;function op(){if(Nl)return Ao;Nl=1;var e=Pe();Ao=t;function t(r,i,o){e.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],c={};return e.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,o==="post",c,a,s)}),s}function n(r,i,o,a,s,c){e.has(a,i)||(a[i]=!0,o||c.push(i),e.each(s(i),function(l){n(r,l,o,a,s,c)}),o&&c.push(i))}return Ao}var Lo,Ml;function Xx(){if(Ml)return Lo;Ml=1;var e=op();Lo=t;function t(n,r){return e(n,r,"post")}return Lo}var qo,Il;function Wx(){if(Il)return qo;Il=1;var e=op();qo=t;function t(n,r){return e(n,r,"pre")}return qo}var Po,kl;function Zx(){if(kl)return Po;kl=1;var e=Pe(),t=qs(),n=tp();Po=r;function r(i,o){var a=new t,s={},c=new n,l;function u(f){var h=f.v===l?f.w:f.v,p=c.priority(h);if(p!==void 0){var g=o(f);g<p&&(s[h]=l,c.decrease(h,g))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(f){c.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),c.decrease(i.nodes()[0],0);for(var d=!1;c.size()>0;){if(l=c.removeMin(),e.has(s,l))a.setEdge(l,s[l]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(l).forEach(u)}return a}return Po}var $o,Rl;function jx(){return Rl||(Rl=1,$o={components:Vx(),dijkstra:np(),dijkstraAll:Gx(),findCycles:Ux(),floydWarshall:Yx(),isAcyclic:Kx(),postorder:Xx(),preorder:Wx(),prim:Zx(),tarjan:rp(),topsort:ip()}),$o}var Do,Tl;function Qx(){if(Tl)return Do;Tl=1;var e=Bx();return Do={Graph:e.Graph,json:Hx(),alg:jx(),version:e.version},Do}var ar;if(typeof ts=="function")try{ar=Qx()}catch{}ar||(ar=window.graphlib);var Ve=ar,Oo,Al;function Jx(){if(Al)return Oo;Al=1;var e=Dh(),t=1,n=4;function r(i){return e(i,t|n)}return Oo=r,Oo}var Fo,Ll;function e_(){if(Ll)return Fo;Ll=1;var e=ss,t=dm(),n=cs,r=Cn,i=Object.prototype,o=i.hasOwnProperty,a=e(function(s,c){s=Object(s);var l=-1,u=c.length,d=u>2?c[2]:void 0;for(d&&n(c[0],c[1],d)&&(u=1);++l<u;)for(var f=c[l],h=r(f),p=-1,g=h.length;++p<g;){var y=h[p],v=s[y];(v===void 0||t(v,i[y])&&!o.call(s,y))&&(s[y]=f[y])}return s});return Fo=a,Fo}var zo,ql;function t_(){if(ql)return zo;ql=1;var e=at(),t=Mn,n=qt();function r(i){return function(o,a,s){var c=Object(o);if(!t(o)){var l=e(a,3);o=n(o),a=function(d){return l(c[d],d,c)}}var u=i(o,a,s);return u>-1?c[l?o[u]:u]:void 0}}return zo=r,zo}var Bo,Pl;function n_(){if(Pl)return Bo;Pl=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Bo=t,Bo}var Ho,$l;function r_(){if($l)return Ho;$l=1;var e=n_(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Ho=n,Ho}var Vo,Dl;function i_(){if(Dl)return Vo;Dl=1;var e=r_(),t=Nn,n=Zt(),r=0/0,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=o.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):i.test(l)?r:+l}return Vo=c,Vo}var Go,Ol;function ap(){if(Ol)return Go;Ol=1;var e=i_(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var o=i<0?-1:1;return o*n}return i===i?i:0}return Go=r,Go}var Uo,Fl;function o_(){if(Fl)return Uo;Fl=1;var e=ap();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return Uo=t,Uo}var Yo,zl;function a_(){if(zl)return Yo;zl=1;var e=Jh(),t=at(),n=o_(),r=Math.max;function i(o,a,s){var c=o==null?0:o.length;if(!c)return-1;var l=s==null?0:n(s);return l<0&&(l=r(c+l,0)),e(o,t(a,3),l)}return Yo=i,Yo}var Ko,Bl;function s_(){if(Bl)return Ko;Bl=1;var e=t_(),t=a_(),n=e(t);return Ko=n,Ko}var Xo,Hl;function sp(){if(Hl)return Xo;Hl=1;var e=Ls();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Xo=t,Xo}var Wo,Vl;function c_(){if(Vl)return Wo;Vl=1;var e=jd,t=Oh(),n=Cn;function r(i,o){return i==null?i:e(i,t(o),n)}return Wo=r,Wo}var Zo,Gl;function u_(){if(Gl)return Zo;Gl=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Zo=e,Zo}var jo,Ul;function l_(){if(Ul)return jo;Ul=1;var e=fm(),t=Ts(),n=at();function r(i,o){var a={};return o=n(o,3),t(i,function(s,c,l){e(a,c,o(s,c,l))}),a}return jo=r,jo}var Qo,Yl;function Ps(){if(Yl)return Qo;Yl=1;var e=Zt();function t(n,r,i){for(var o=-1,a=n.length;++o<a;){var s=n[o],c=r(s);if(c!=null&&(l===void 0?c===c&&!e(c):i(c,l)))var l=c,u=s}return u}return Qo=t,Qo}var Jo,Kl;function d_(){if(Kl)return Jo;Kl=1;function e(t,n){return t>n}return Jo=e,Jo}var ea,Xl;function f_(){if(Xl)return ea;Xl=1;var e=Ps(),t=d_(),n=In;function r(i){return i&&i.length?e(i,n,t):void 0}return ea=r,ea}var ta,Wl;function h_(){if(Wl)return ta;Wl=1;var e=pm,t=hm,n=t(function(r,i,o){e(r,i,o)});return ta=n,ta}var na,Zl;function cp(){if(Zl)return na;Zl=1;function e(t,n){return t<n}return na=e,na}var ra,jl;function p_(){if(jl)return ra;jl=1;var e=Ps(),t=cp(),n=In;function r(i){return i&&i.length?e(i,n,t):void 0}return ra=r,ra}var ia,Ql;function g_(){if(Ql)return ia;Ql=1;var e=Ps(),t=at(),n=cp();function r(i,o){return i&&i.length?e(i,t(o,2),n):void 0}return ia=r,ia}var oa,Jl;function m_(){if(Jl)return oa;Jl=1;var e=gm(),t=function(){return e.Date.now()};return oa=t,oa}var aa,ed;function v_(){if(ed)return aa;ed=1;var e=is(),t=Er(),n=Jd,r=Nn,i=An();function o(a,s,c,l){if(!r(a))return a;s=t(s,a);for(var u=-1,d=s.length,f=d-1,h=a;h!=null&&++u<d;){var p=i(s[u]),g=c;if(p==="__proto__"||p==="constructor"||p==="prototype")return a;if(u!=f){var y=h[p];g=l?l(y,p,h):void 0,g===void 0&&(g=r(y)?y:n(s[u+1])?[]:{})}e(h,p,g),h=h[p]}return a}return aa=o,aa}var sa,td;function y_(){if(td)return sa;td=1;var e=Sr(),t=v_(),n=Er();function r(i,o,a){for(var s=-1,c=o.length,l={};++s<c;){var u=o[s],d=e(i,u);a(d,u)&&t(l,n(u,i),d)}return l}return sa=r,sa}var ca,nd;function b_(){if(nd)return ca;nd=1;var e=y_(),t=Uh();function n(r,i){return e(r,i,function(o,a){return t(r,a)})}return ca=n,ca}var ua,rd;function w_(){if(rd)return ua;rd=1;var e=sp(),t=mm,n=vm;function r(i){return n(t(i,void 0,e),i+"")}return ua=r,ua}var la,id;function x_(){if(id)return la;id=1;var e=b_(),t=w_(),n=t(function(r,i){return r==null?{}:e(r,i)});return la=n,la}var da,od;function __(){if(od)return da;od=1;var e=Math.ceil,t=Math.max;function n(r,i,o,a){for(var s=-1,c=t(e((i-r)/(o||1)),0),l=Array(c);c--;)l[a?c:++s]=r,r+=o;return l}return da=n,da}var fa,ad;function E_(){if(ad)return fa;ad=1;var e=__(),t=cs,n=ap();function r(i){return function(o,a,s){return s&&typeof s!="number"&&t(o,a,s)&&(a=s=void 0),o=n(o),a===void 0?(a=o,o=0):a=n(a),s=s===void 0?o<a?1:-1:n(s),e(o,a,s,i)}}return fa=r,fa}var ha,sd;function S_(){if(sd)return ha;sd=1;var e=E_(),t=e();return ha=t,ha}var pa,cd;function C_(){if(cd)return pa;cd=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return pa=e,pa}var ga,ud;function N_(){if(ud)return ga;ud=1;var e=Zt();function t(n,r){if(n!==r){var i=n!==void 0,o=n===null,a=n===n,s=e(n),c=r!==void 0,l=r===null,u=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&c&&u&&!l&&!d||o&&c&&u||!i&&u||!a)return 1;if(!o&&!s&&!d&&n<r||d&&i&&a&&!o&&!s||l&&i&&a||!c&&a||!u)return-1}return 0}return ga=t,ga}var ma,ld;function M_(){if(ld)return ma;ld=1;var e=N_();function t(n,r,i){for(var o=-1,a=n.criteria,s=r.criteria,c=a.length,l=i.length;++o<c;){var u=e(a[o],s[o]);if(u){if(o>=l)return u;var d=i[o];return u*(d=="desc"?-1:1)}}return n.index-r.index}return ma=t,ma}var va,dd;function I_(){if(dd)return va;dd=1;var e=_r(),t=Sr(),n=at(),r=Zh(),i=C_(),o=rs(),a=M_(),s=In,c=xe();function l(u,d,f){d.length?d=e(d,function(g){return c(g)?function(y){return t(y,g.length===1?g[0]:g)}:g}):d=[s];var h=-1;d=e(d,o(n));var p=r(u,function(g,y,v){var _=e(d,function(N){return N(g)});return{criteria:_,index:++h,value:g}});return i(p,function(g,y){return a(g,y,f)})}return va=l,va}var ya,fd;function k_(){if(fd)return ya;fd=1;var e=Ls(),t=I_(),n=ss,r=cs,i=n(function(o,a){if(o==null)return[];var s=a.length;return s>1&&r(o,a[0],a[1])?a=[]:s>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(o,e(a,1),[])});return ya=i,ya}var ba,hd;function R_(){if(hd)return ba;hd=1;var e=Vh(),t=0;function n(r){var i=++t;return e(r)+i}return ba=n,ba}var wa,pd;function T_(){if(pd)return wa;pd=1;function e(t,n,r){for(var i=-1,o=t.length,a=n.length,s={};++i<o;){var c=i<a?n[i]:void 0;r(s,t[i],c)}return s}return wa=e,wa}var xa,gd;function A_(){if(gd)return xa;gd=1;var e=is(),t=T_();function n(r,i){return t(r||[],i||[],e)}return xa=n,xa}var sr;if(typeof ts=="function")try{sr={cloneDeep:Jx(),constant:nf(),defaults:e_(),each:zh(),filter:Kh(),find:s_(),flatten:sp(),forEach:Fh(),forIn:c_(),has:Xh(),isUndefined:Wh(),last:u_(),map:jh(),mapValues:l_(),max:f_(),merge:h_(),min:p_(),minBy:g_(),now:m_(),pick:x_(),range:S_(),reduce:Qh(),sortBy:k_(),uniqueId:R_(),values:ep(),zipObject:A_()}}catch{}sr||(sr=window._);var ce=sr,L_=Cr;function Cr(){var e={};e._next=e._prev=e,this._sentinel=e}Cr.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return up(t),t};Cr.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&up(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Cr.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,q_)),n=n._prev;return"["+e.join(", ")+"]"};function up(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function q_(e,t){if(e!=="_next"&&e!=="_prev")return t}var Je=ce,P_=Ve.Graph,$_=L_,D_=F_,O_=Je.constant(1);function F_(e,t){if(e.nodeCount()<=1)return[];var n=B_(e,t||O_),r=z_(n.graph,n.buckets,n.zeroIdx);return Je.flatten(Je.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function z_(e,t,n){for(var r=[],i=t[t.length-1],o=t[0],a;e.nodeCount();){for(;a=o.dequeue();)_a(e,t,n,a);for(;a=i.dequeue();)_a(e,t,n,a);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){r=r.concat(_a(e,t,n,a,!0));break}}}return r}function _a(e,t,n,r,i){var o=i?[]:void 0;return Je.forEach(e.inEdges(r.v),function(a){var s=e.edge(a),c=e.node(a.v);i&&o.push({v:a.v,w:a.w}),c.out-=s,Wa(t,n,c)}),Je.forEach(e.outEdges(r.v),function(a){var s=e.edge(a),c=a.w,l=e.node(c);l.in-=s,Wa(t,n,l)}),e.removeNode(r.v),o}function B_(e,t){var n=new P_,r=0,i=0;Je.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),Je.forEach(e.edges(),function(s){var c=n.edge(s.v,s.w)||0,l=t(s),u=c+l;n.setEdge(s.v,s.w,u),i=Math.max(i,n.node(s.v).out+=l),r=Math.max(r,n.node(s.w).in+=l)});var o=Je.range(i+r+3).map(function(){return new $_}),a=r+1;return Je.forEach(n.nodes(),function(s){Wa(o,a,n.node(s))}),{graph:n,buckets:o,zeroIdx:a}}function Wa(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Nt=ce,H_=D_,V_={run:G_,undo:Y_};function G_(e){var t=e.graph().acyclicer==="greedy"?H_(e,n(e)):U_(e);Nt.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Nt.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function U_(e){var t=[],n={},r={};function i(o){Nt.has(r,o)||(r[o]=!0,n[o]=!0,Nt.forEach(e.outEdges(o),function(a){Nt.has(n,a.w)?t.push(a):i(a.w)}),delete n[o])}return Nt.forEach(e.nodes(),i),t}function Y_(e){Nt.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var re=ce,lp=Ve.Graph,Ne={addDummyNode:dp,simplify:K_,asNonCompoundGraph:X_,successorWeights:W_,predecessorWeights:Z_,intersectRect:j_,buildLayerMatrix:Q_,normalizeRanks:J_,removeEmptyRanks:eE,addBorderNode:tE,maxRank:fp,partition:nE,time:rE,notime:iE};function dp(e,t,n,r){var i;do i=re.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function K_(e){var t=new lp().setGraph(e.graph());return re.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),re.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function X_(e){var t=new lp({multigraph:e.isMultigraph()}).setGraph(e.graph());return re.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),re.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function W_(e){var t=re.map(e.nodes(),function(n){var r={};return re.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return re.zipObject(e.nodes(),t)}function Z_(e){var t=re.map(e.nodes(),function(n){var r={};return re.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return re.zipObject(e.nodes(),t)}function j_(e,t){var n=e.x,r=e.y,i=t.x-n,o=t.y-r,a=e.width/2,s=e.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var c,l;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),c=s*i/o,l=s):(i<0&&(a=-a),c=a,l=a*o/i),{x:n+c,y:r+l}}function Q_(e){var t=re.map(re.range(fp(e)+1),function(){return[]});return re.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;re.isUndefined(i)||(t[i][r.order]=n)}),t}function J_(e){var t=re.min(re.map(e.nodes(),function(n){return e.node(n).rank}));re.forEach(e.nodes(),function(n){var r=e.node(n);re.has(r,"rank")&&(r.rank-=t)})}function eE(e){var t=re.min(re.map(e.nodes(),function(o){return e.node(o).rank})),n=[];re.forEach(e.nodes(),function(o){var a=e.node(o).rank-t;n[a]||(n[a]=[]),n[a].push(o)});var r=0,i=e.graph().nodeRankFactor;re.forEach(n,function(o,a){re.isUndefined(o)&&a%i!==0?--r:r&&re.forEach(o,function(s){e.node(s).rank+=r})})}function tE(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),dp(e,"border",i,t)}function fp(e){return re.max(re.map(e.nodes(),function(t){var n=e.node(t).rank;if(!re.isUndefined(n))return n}))}function nE(e,t){var n={lhs:[],rhs:[]};return re.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function rE(e,t){var n=re.now();try{return t()}finally{console.log(e+" time: "+(re.now()-n)+"ms")}}function iE(e,t){return t()}var hp=ce,oE=Ne,aE={run:sE,undo:uE};function sE(e){e.graph().dummyChains=[],hp.forEach(e.edges(),function(t){cE(e,t)})}function cE(e,t){var n=t.v,r=e.node(n).rank,i=t.w,o=e.node(i).rank,a=t.name,s=e.edge(t),c=s.labelRank;if(o!==r+1){e.removeEdge(t);var l,u,d;for(d=0,++r;r<o;++d,++r)s.points=[],u={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},l=oE.addDummyNode(e,"edge",u,"_d"),r===c&&(u.width=s.width,u.height=s.height,u.dummy="edge-label",u.labelpos=s.labelpos),e.setEdge(n,l,{weight:s.weight},a),d===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,i,{weight:s.weight},a)}}function uE(e){hp.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Bn=ce,Nr={longestPath:lE,slack:dE};function lE(e){var t={};function n(r){var i=e.node(r);if(Bn.has(t,r))return i.rank;t[r]=!0;var o=Bn.min(Bn.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),i.rank=o}Bn.forEach(e.sources(),n)}function dE(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var cr=ce,fE=Ve.Graph,ur=Nr.slack,pp=hE;function hE(e){var t=new fE({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,o;pE(t,e)<r;)i=gE(t,e),o=t.hasNode(i.v)?ur(e,i):-ur(e,i),mE(t,e,o);return t}function pE(e,t){function n(r){cr.forEach(t.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;!e.hasNode(a)&&!ur(t,i)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}return cr.forEach(e.nodes(),n),e.nodeCount()}function gE(e,t){return cr.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return ur(t,n)})}function mE(e,t,n){cr.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var ot=ce,vE=pp,yE=Nr.slack,bE=Nr.longestPath,wE=Ve.alg.preorder,xE=Ve.alg.postorder,_E=Ne.simplify,EE=Pt;Pt.initLowLimValues=Ds;Pt.initCutValues=$s;Pt.calcCutValue=gp;Pt.leaveEdge=vp;Pt.enterEdge=yp;Pt.exchangeEdges=bp;function Pt(e){e=_E(e),bE(e);var t=vE(e);Ds(t),$s(t,e);for(var n,r;n=vp(t);)r=yp(t,e,n),bp(t,e,n,r)}function $s(e,t){var n=xE(e,e.nodes());n=n.slice(0,n.length-1),ot.forEach(n,function(r){SE(e,t,r)})}function SE(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=gp(e,t,n)}function gp(e,t,n){var r=e.node(n),i=r.parent,o=!0,a=t.edge(n,i),s=0;return a||(o=!1,a=t.edge(i,n)),s=a.weight,ot.forEach(t.nodeEdges(n),function(c){var l=c.v===n,u=l?c.w:c.v;if(u!==i){var d=l===o,f=t.edge(c).weight;if(s+=d?f:-f,NE(e,n,u)){var h=e.edge(n,u).cutvalue;s+=d?-h:h}}}),s}function Ds(e,t){arguments.length<2&&(t=e.nodes()[0]),mp(e,{},1,t)}function mp(e,t,n,r,i){var o=n,a=e.node(r);return t[r]=!0,ot.forEach(e.neighbors(r),function(s){ot.has(t,s)||(n=mp(e,t,n,s,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function vp(e){return ot.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function yp(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var o=e.node(r),a=e.node(i),s=o,c=!1;o.lim>a.lim&&(s=a,c=!0);var l=ot.filter(t.edges(),function(u){return c===md(e,e.node(u.v),s)&&c!==md(e,e.node(u.w),s)});return ot.minBy(l,function(u){return yE(t,u)})}function bp(e,t,n,r){var i=n.v,o=n.w;e.removeEdge(i,o),e.setEdge(r.v,r.w,{}),Ds(e),$s(e,t),CE(e,t)}function CE(e,t){var n=ot.find(e.nodes(),function(i){return!t.node(i).parent}),r=wE(e,n);r=r.slice(1),ot.forEach(r,function(i){var o=e.node(i).parent,a=t.edge(i,o),s=!1;a||(a=t.edge(o,i),s=!0),t.node(i).rank=t.node(o).rank+(s?a.minlen:-a.minlen)})}function NE(e,t,n){return e.hasEdge(t,n)}function md(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var ME=Nr,wp=ME.longestPath,IE=pp,kE=EE,RE=TE;function TE(e){switch(e.graph().ranker){case"network-simplex":vd(e);break;case"tight-tree":LE(e);break;case"longest-path":AE(e);break;default:vd(e)}}var AE=wp;function LE(e){wp(e),IE(e)}function vd(e){kE(e)}var Za=ce,qE=PE;function PE(e){var t=DE(e);Za.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,o=$E(e,t,i.v,i.w),a=o.path,s=o.lca,c=0,l=a[c],u=!0;n!==i.w;){if(r=e.node(n),u){for(;(l=a[c])!==s&&e.node(l).maxRank<r.rank;)c++;l===s&&(u=!1)}if(!u){for(;c<a.length-1&&e.node(l=a[c+1]).minRank<=r.rank;)c++;l=a[c]}e.setParent(n,l),n=e.successors(n)[0]}})}function $E(e,t,n,r){var i=[],o=[],a=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),c,l;c=n;do c=e.parent(c),i.push(c);while(c&&(t[c].low>a||s>t[c].lim));for(l=c,c=r;(c=e.parent(c))!==l;)o.push(c);return{path:i.concat(o.reverse()),lca:l}}function DE(e){var t={},n=0;function r(i){var o=n;Za.forEach(e.children(i),r),t[i]={low:o,lim:n++}}return Za.forEach(e.children(),r),t}var et=ce,ja=Ne,OE={run:FE,cleanup:HE};function FE(e){var t=ja.addDummyNode(e,"root",{},"_root"),n=zE(e),r=et.max(et.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,et.forEach(e.edges(),function(a){e.edge(a).minlen*=i});var o=BE(e)+1;et.forEach(e.children(),function(a){xp(e,t,i,o,r,n,a)}),e.graph().nodeRankFactor=i}function xp(e,t,n,r,i,o,a){var s=e.children(a);if(!s.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}var c=ja.addBorderNode(e,"_bt"),l=ja.addBorderNode(e,"_bb"),u=e.node(a);e.setParent(c,a),u.borderTop=c,e.setParent(l,a),u.borderBottom=l,et.forEach(s,function(d){xp(e,t,n,r,i,o,d);var f=e.node(d),h=f.borderTop?f.borderTop:d,p=f.borderBottom?f.borderBottom:d,g=f.borderTop?r:2*r,y=h!==p?1:i-o[a]+1;e.setEdge(c,h,{weight:g,minlen:y,nestingEdge:!0}),e.setEdge(p,l,{weight:g,minlen:y,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,c,{weight:0,minlen:i+o[a]})}function zE(e){var t={};function n(r,i){var o=e.children(r);o&&o.length&&et.forEach(o,function(a){n(a,i+1)}),t[r]=i}return et.forEach(e.children(),function(r){n(r,1)}),t}function BE(e){return et.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function HE(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,et.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Ea=ce,VE=Ne,GE=UE;function UE(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Ea.forEach(r,t),Ea.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)yd(e,"borderLeft","_bl",n,i,o),yd(e,"borderRight","_br",n,i,o)}}Ea.forEach(e.children(),t)}function yd(e,t,n,r,i,o){var a={width:0,height:0,rank:o,borderType:t},s=i[t][o-1],c=VE.addDummyNode(e,"border",a,n);i[t][o]=c,e.setParent(c,r),s&&e.setEdge(s,c,{weight:1})}var Ue=ce,YE={adjust:KE,undo:XE};function KE(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&_p(e)}function XE(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&WE(e),(t==="lr"||t==="rl")&&(ZE(e),_p(e))}function _p(e){Ue.forEach(e.nodes(),function(t){bd(e.node(t))}),Ue.forEach(e.edges(),function(t){bd(e.edge(t))})}function bd(e){var t=e.width;e.width=e.height,e.height=t}function WE(e){Ue.forEach(e.nodes(),function(t){Sa(e.node(t))}),Ue.forEach(e.edges(),function(t){var n=e.edge(t);Ue.forEach(n.points,Sa),Ue.has(n,"y")&&Sa(n)})}function Sa(e){e.y=-e.y}function ZE(e){Ue.forEach(e.nodes(),function(t){Ca(e.node(t))}),Ue.forEach(e.edges(),function(t){var n=e.edge(t);Ue.forEach(n.points,Ca),Ue.has(n,"x")&&Ca(n)})}function Ca(e){var t=e.x;e.x=e.y,e.y=t}var je=ce,jE=QE;function QE(e){var t={},n=je.filter(e.nodes(),function(s){return!e.children(s).length}),r=je.max(je.map(n,function(s){return e.node(s).rank})),i=je.map(je.range(r+1),function(){return[]});function o(s){if(!je.has(t,s)){t[s]=!0;var c=e.node(s);i[c.rank].push(s),je.forEach(e.successors(s),o)}}var a=je.sortBy(n,function(s){return e.node(s).rank});return je.forEach(a,o),i}var ct=ce,JE=eS;function eS(e,t){for(var n=0,r=1;r<t.length;++r)n+=tS(e,t[r-1],t[r]);return n}function tS(e,t,n){for(var r=ct.zipObject(n,ct.map(n,function(l,u){return u})),i=ct.flatten(ct.map(t,function(l){return ct.sortBy(ct.map(e.outEdges(l),function(u){return{pos:r[u.w],weight:e.edge(u).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=ct.map(new Array(a),function(){return 0}),c=0;return ct.forEach(i.forEach(function(l){var u=l.pos+o;s[u]+=l.weight;for(var d=0;u>0;)u%2&&(d+=s[u+1]),u=u-1>>1,s[u]+=l.weight;c+=l.weight*d})),c}var wd=ce,nS=rS;function rS(e,t){return wd.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=wd.reduce(r,function(o,a){var s=e.edge(a),c=e.node(a.v);return{sum:o.sum+s.weight*c.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var Ie=ce,iS=oS;function oS(e,t){var n={};Ie.forEach(e,function(i,o){var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};Ie.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),Ie.forEach(t.edges(),function(i){var o=n[i.v],a=n[i.w];!Ie.isUndefined(o)&&!Ie.isUndefined(a)&&(a.indegree++,o.out.push(n[i.w]))});var r=Ie.filter(n,function(i){return!i.indegree});return aS(r)}function aS(e){var t=[];function n(o){return function(a){a.merged||(Ie.isUndefined(a.barycenter)||Ie.isUndefined(o.barycenter)||a.barycenter>=o.barycenter)&&sS(o,a)}}function r(o){return function(a){a.in.push(o),--a.indegree===0&&e.push(a)}}for(;e.length;){var i=e.pop();t.push(i),Ie.forEach(i.in.reverse(),n(i)),Ie.forEach(i.out,r(i))}return Ie.map(Ie.filter(t,function(o){return!o.merged}),function(o){return Ie.pick(o,["vs","i","barycenter","weight"])})}function sS(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var un=ce,cS=Ne,uS=lS;function lS(e,t){var n=cS.partition(e,function(u){return un.has(u,"barycenter")}),r=n.lhs,i=un.sortBy(n.rhs,function(u){return-u.i}),o=[],a=0,s=0,c=0;r.sort(dS(!!t)),c=xd(o,i,c),un.forEach(r,function(u){c+=u.vs.length,o.push(u.vs),a+=u.barycenter*u.weight,s+=u.weight,c=xd(o,i,c)});var l={vs:un.flatten(o,!0)};return s&&(l.barycenter=a/s,l.weight=s),l}function xd(e,t,n){for(var r;t.length&&(r=un.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function dS(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var ht=ce,fS=nS,hS=iS,pS=uS,gS=Ep;function Ep(e,t,n,r){var i=e.children(t),o=e.node(t),a=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,c={};a&&(i=ht.filter(i,function(p){return p!==a&&p!==s}));var l=fS(e,i);ht.forEach(l,function(p){if(e.children(p.v).length){var g=Ep(e,p.v,n,r);c[p.v]=g,ht.has(g,"barycenter")&&vS(p,g)}});var u=hS(l,n);mS(u,c);var d=pS(u,r);if(a&&(d.vs=ht.flatten([a,d.vs,s],!0),e.predecessors(a).length)){var f=e.node(e.predecessors(a)[0]),h=e.node(e.predecessors(s)[0]);ht.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+h.order)/(d.weight+2),d.weight+=2}return d}function mS(e,t){ht.forEach(e,function(n){n.vs=ht.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function vS(e,t){ht.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var ln=ce,yS=Ve.Graph,bS=wS;function wS(e,t,n){var r=xS(e),i=new yS({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return e.node(o)});return ln.forEach(e.nodes(),function(o){var a=e.node(o),s=e.parent(o);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),ln.forEach(e[n](o),function(c){var l=c.v===o?c.w:c.v,u=i.edge(l,o),d=ln.isUndefined(u)?0:u.weight;i.setEdge(l,o,{weight:e.edge(c).weight+d})}),ln.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function xS(e){for(var t;e.hasNode(t=ln.uniqueId("_root")););return t}var _S=ce,ES=SS;function SS(e,t,n){var r={},i;_S.forEach(n,function(o){for(var a=e.parent(o),s,c;a;){if(s=e.parent(a),s?(c=r[s],r[s]=a):(c=i,i=a),c&&c!==a){t.setEdge(c,a);return}a=s}})}var gt=ce,CS=jE,NS=JE,MS=gS,IS=bS,kS=ES,RS=Ve.Graph,_d=Ne,TS=AS;function AS(e){var t=_d.maxRank(e),n=Ed(e,gt.range(1,t+1),"inEdges"),r=Ed(e,gt.range(t-1,-1,-1),"outEdges"),i=CS(e);Sd(e,i);for(var o=Number.POSITIVE_INFINITY,a,s=0,c=0;c<4;++s,++c){LS(s%2?n:r,s%4>=2),i=_d.buildLayerMatrix(e);var l=NS(e,i);l<o&&(c=0,a=gt.cloneDeep(i),o=l)}Sd(e,a)}function Ed(e,t,n){return gt.map(t,function(r){return IS(e,r,n)})}function LS(e,t){var n=new RS;gt.forEach(e,function(r){var i=r.graph().root,o=MS(r,i,n,t);gt.forEach(o.vs,function(a,s){r.node(a).order=s}),kS(r,n,o.vs)})}function Sd(e,t){gt.forEach(t,function(n){gt.forEach(n,function(r,i){e.node(r).order=i})})}var W=ce,qS=Ve.Graph,PS=Ne,$S={positionX:FS,findType1Conflicts:Sp,findType2Conflicts:Cp,addConflict:Os,hasConflict:Np,verticalAlignment:Mp,horizontalCompaction:Ip,alignCoordinates:Rp,findSmallestWidthAlignment:kp,balance:Tp};function Sp(e,t){var n={};function r(i,o){var a=0,s=0,c=i.length,l=W.last(o);return W.forEach(o,function(u,d){var f=DS(e,u),h=f?e.node(f).order:c;(f||u===l)&&(W.forEach(o.slice(s,d+1),function(p){W.forEach(e.predecessors(p),function(g){var y=e.node(g),v=y.order;(v<a||h<v)&&!(y.dummy&&e.node(p).dummy)&&Os(n,g,p)})}),s=d+1,a=h)}),o}return W.reduce(t,r),n}function Cp(e,t){var n={};function r(o,a,s,c,l){var u;W.forEach(W.range(a,s),function(d){u=o[d],e.node(u).dummy&&W.forEach(e.predecessors(u),function(f){var h=e.node(f);h.dummy&&(h.order<c||h.order>l)&&Os(n,f,u)})})}function i(o,a){var s=-1,c,l=0;return W.forEach(a,function(u,d){if(e.node(u).dummy==="border"){var f=e.predecessors(u);f.length&&(c=e.node(f[0]).order,r(a,l,d,s,c),l=d,s=c)}r(a,l,a.length,c,o.length)}),a}return W.reduce(t,i),n}function DS(e,t){if(e.node(t).dummy)return W.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Os(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function Np(e,t,n){if(t>n){var r=t;t=n,n=r}return W.has(e[t],n)}function Mp(e,t,n,r){var i={},o={},a={};return W.forEach(t,function(s){W.forEach(s,function(c,l){i[c]=c,o[c]=c,a[c]=l})}),W.forEach(t,function(s){var c=-1;W.forEach(s,function(l){var u=r(l);if(u.length){u=W.sortBy(u,function(g){return a[g]});for(var d=(u.length-1)/2,f=Math.floor(d),h=Math.ceil(d);f<=h;++f){var p=u[f];o[l]===l&&c<a[p]&&!Np(n,l,p)&&(o[p]=l,o[l]=i[l]=i[p],c=a[p])}}})}),{root:i,align:o}}function Ip(e,t,n,r,i){var o={},a=OS(e,t,n,i),s=i?"borderLeft":"borderRight";function c(d,f){for(var h=a.nodes(),p=h.pop(),g={};p;)g[p]?d(p):(g[p]=!0,h.push(p),h=h.concat(f(p))),p=h.pop()}function l(d){o[d]=a.inEdges(d).reduce(function(f,h){return Math.max(f,o[h.v]+a.edge(h))},0)}function u(d){var f=a.outEdges(d).reduce(function(p,g){return Math.min(p,o[g.w]-a.edge(g))},Number.POSITIVE_INFINITY),h=e.node(d);f!==Number.POSITIVE_INFINITY&&h.borderType!==s&&(o[d]=Math.max(o[d],f))}return c(l,a.predecessors.bind(a)),c(u,a.successors.bind(a)),W.forEach(r,function(d){o[d]=o[n[d]]}),o}function OS(e,t,n,r){var i=new qS,o=e.graph(),a=zS(o.nodesep,o.edgesep,r);return W.forEach(t,function(s){var c;W.forEach(s,function(l){var u=n[l];if(i.setNode(u),c){var d=n[c],f=i.edge(d,u);i.setEdge(d,u,Math.max(a(e,l,c),f||0))}c=l})}),i}function kp(e,t){return W.minBy(W.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return W.forIn(n,function(o,a){var s=BS(e,a)/2;r=Math.max(o+s,r),i=Math.min(o-s,i)}),r-i})}function Rp(e,t){var n=W.values(t),r=W.min(n),i=W.max(n);W.forEach(["u","d"],function(o){W.forEach(["l","r"],function(a){var s=o+a,c=e[s],l;if(c!==t){var u=W.values(c);l=a==="l"?r-W.min(u):i-W.max(u),l&&(e[s]=W.mapValues(c,function(d){return d+l}))}})})}function Tp(e,t){return W.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=W.sortBy(W.map(e,r));return(i[1]+i[2])/2})}function FS(e){var t=PS.buildLayerMatrix(e),n=W.merge(Sp(e,t),Cp(e,t)),r={},i;W.forEach(["u","d"],function(a){i=a==="u"?t:W.values(t).reverse(),W.forEach(["l","r"],function(s){s==="r"&&(i=W.map(i,function(d){return W.values(d).reverse()}));var c=(a==="u"?e.predecessors:e.successors).bind(e),l=Mp(e,i,n,c),u=Ip(e,i,l.root,l.align,s==="r");s==="r"&&(u=W.mapValues(u,function(d){return-d})),r[a+s]=u})});var o=kp(e,r);return Rp(r,o),Tp(r,e.graph().align)}function zS(e,t,n){return function(r,i,o){var a=r.node(i),s=r.node(o),c=0,l;if(c+=a.width/2,W.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=-a.width/2;break;case"r":l=a.width/2;break}if(l&&(c+=n?l:-l),l=0,c+=(a.dummy?t:e)/2,c+=(s.dummy?t:e)/2,c+=s.width/2,W.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(c+=n?l:-l),l=0,c}}function BS(e,t){return e.node(t).width}var dn=ce,Ap=Ne,HS=$S.positionX,VS=GS;function GS(e){e=Ap.asNonCompoundGraph(e),US(e),dn.forEach(HS(e),function(t,n){e.node(n).x=t})}function US(e){var t=Ap.buildLayerMatrix(e),n=e.graph().ranksep,r=0;dn.forEach(t,function(i){var o=dn.max(dn.map(i,function(a){return e.node(a).height}));dn.forEach(i,function(a){e.node(a).y=r+o/2}),r+=o+n})}var J=ce,Cd=V_,Nd=aE,YS=RE,KS=Ne.normalizeRanks,XS=qE,WS=Ne.removeEmptyRanks,Md=OE,ZS=GE,Id=YE,jS=TS,QS=VS,yt=Ne,JS=Ve.Graph,e2=t2;function t2(e,t){var n=t&&t.debugTiming?yt.time:yt.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return f2(e)});n("  runLayout",function(){n2(r,n)}),n("  updateInputGraph",function(){r2(e,r)})})}function n2(e,t){t("    makeSpaceForEdgeLabels",function(){h2(e)}),t("    removeSelfEdges",function(){_2(e)}),t("    acyclic",function(){Cd.run(e)}),t("    nestingGraph.run",function(){Md.run(e)}),t("    rank",function(){YS(yt.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){p2(e)}),t("    removeEmptyRanks",function(){WS(e)}),t("    nestingGraph.cleanup",function(){Md.cleanup(e)}),t("    normalizeRanks",function(){KS(e)}),t("    assignRankMinMax",function(){g2(e)}),t("    removeEdgeLabelProxies",function(){m2(e)}),t("    normalize.run",function(){Nd.run(e)}),t("    parentDummyChains",function(){XS(e)}),t("    addBorderSegments",function(){ZS(e)}),t("    order",function(){jS(e)}),t("    insertSelfEdges",function(){E2(e)}),t("    adjustCoordinateSystem",function(){Id.adjust(e)}),t("    position",function(){QS(e)}),t("    positionSelfEdges",function(){S2(e)}),t("    removeBorderNodes",function(){x2(e)}),t("    normalize.undo",function(){Nd.undo(e)}),t("    fixupEdgeLabelCoords",function(){b2(e)}),t("    undoCoordinateSystem",function(){Id.undo(e)}),t("    translateGraph",function(){v2(e)}),t("    assignNodeIntersects",function(){y2(e)}),t("    reversePoints",function(){w2(e)}),t("    acyclic.undo",function(){Cd.undo(e)})}function r2(e,t){J.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),J.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,J.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var i2=["nodesep","edgesep","ranksep","marginx","marginy"],o2={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},a2=["acyclicer","ranker","rankdir","align"],s2=["width","height"],c2={width:0,height:0},u2=["minlen","weight","width","height","labeloffset"],l2={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},d2=["labelpos"];function f2(e){var t=new JS({multigraph:!0,compound:!0}),n=Ma(e.graph());return t.setGraph(J.merge({},o2,Na(n,i2),J.pick(n,a2))),J.forEach(e.nodes(),function(r){var i=Ma(e.node(r));t.setNode(r,J.defaults(Na(i,s2),c2)),t.setParent(r,e.parent(r))}),J.forEach(e.edges(),function(r){var i=Ma(e.edge(r));t.setEdge(r,J.merge({},l2,Na(i,u2),J.pick(i,d2)))}),t}function h2(e){var t=e.graph();t.ranksep/=2,J.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function p2(e){J.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),o={rank:(i.rank-r.rank)/2+r.rank,e:t};yt.addDummyNode(e,"edge-proxy",o,"_ep")}})}function g2(e){var t=0;J.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=J.max(t,r.maxRank))}),e.graph().maxRank=t}function m2(e){J.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function v2(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0;function c(l){var u=l.x,d=l.y,f=l.width,h=l.height;t=Math.min(t,u-f/2),n=Math.max(n,u+f/2),r=Math.min(r,d-h/2),i=Math.max(i,d+h/2)}J.forEach(e.nodes(),function(l){c(e.node(l))}),J.forEach(e.edges(),function(l){var u=e.edge(l);J.has(u,"x")&&c(u)}),t-=a,r-=s,J.forEach(e.nodes(),function(l){var u=e.node(l);u.x-=t,u.y-=r}),J.forEach(e.edges(),function(l){var u=e.edge(l);J.forEach(u.points,function(d){d.x-=t,d.y-=r}),J.has(u,"x")&&(u.x-=t),J.has(u,"y")&&(u.y-=r)}),o.width=n-t+a,o.height=i-r+s}function y2(e){J.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),o,a;n.points?(o=n.points[0],a=n.points[n.points.length-1]):(n.points=[],o=i,a=r),n.points.unshift(yt.intersectRect(r,o)),n.points.push(yt.intersectRect(i,a))})}function b2(e){J.forEach(e.edges(),function(t){var n=e.edge(t);if(J.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function w2(e){J.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function x2(e){J.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),o=e.node(J.last(n.borderLeft)),a=e.node(J.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),J.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function _2(e){J.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function E2(e){var t=yt.buildLayerMatrix(e);J.forEach(t,function(n){var r=0;J.forEach(n,function(i,o){var a=e.node(i);a.order=o+r,J.forEach(a.selfEdges,function(s){yt.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:o+ ++r,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function S2(e){J.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function Na(e,t){return J.mapValues(J.pick(e,t),Number)}function Ma(e){var t={};return J.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Hn=ce,C2=Ne,N2=Ve.Graph,M2={debugOrdering:I2};function I2(e){var t=C2.buildLayerMatrix(e),n=new N2({compound:!0,multigraph:!0}).setGraph({});return Hn.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Hn.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Hn.forEach(t,function(r,i){var o="layer"+i;n.setNode(o,{rank:"same"}),Hn.reduce(r,function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}var k2="0.8.5",Fs={graphlib:Ve,layout:e2,debug:M2,util:{time:Ne.time,notime:Ne.notime},version:k2};const pt=new Fs.graphlib.Graph;pt.setDefaultEdgeLabel(()=>({}));const kd=130,Rd=28,R2=(e,t="LR")=>{const n=t==="LR";return pt.setGraph({rankdir:t}),e.forEach(r=>{pt.setNode(r.id,{width:kd,height:Rd})}),Fs.layout(pt),e.map(r=>{const i=pt.node(r.id);return r.targetPosition=n?O.Left:O.Top,r.sourcePosition=n?O.Right:O.Bottom,r.position={x:i.x-kd/2+Math.random()/1e3,y:i.y-Rd/2},r})},T2=(e,t="LR")=>(pt.setGraph({rankdir:t}),e.forEach(n=>{pt.setEdge(n.source,n.target)}),Fs.layout(pt),e),Vn=33,A2=({id:e,sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:o,targetPosition:a,style:s={},markerType:c,markerEndId:l,selected:u,data:{onEdgeClick:d}})=>{const[f,h,p]=Ss({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:i,targetPosition:a}),g=Gb(c,l);return U(ae,{children:[m("path",{id:e,style:s,className:"react-flow__edge-path",d:f,markerEnd:g}),u&&m("foreignObject",{width:Vn,height:Vn,x:h-Vn/2,y:p-Vn/2,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml",children:m("button",{className:"edgebutton",onClick:y=>d(y,e),children:m(Bd,{})})})]})},L2=({data:e,selected:t})=>U(ae,{children:[m(vt,{position:O.Right,type:"source"}),m("div",{className:`react-flow__node-default keycloak__authentication__conditional_node ${t?"selected":""}`,children:m("div",{children:e.label})}),m(vt,{position:O.Left,type:"target"})]}),q2=x.exports.memo(L2),P2=({data:{label:e},prefix:t,selected:n})=>U(ae,{children:[m(vt,{position:O.Right,type:"source"}),m("div",{className:`react-flow__node-default keycloak__authentication__subflow_node ${n?"selected":""}`,children:U("div",{children:[t," ",e]})}),m(vt,{position:O.Left,type:"target"})]}),Lp=x.exports.memo(P2),$2=({...e})=>m(Lp,{...e,prefix:"Start"}),D2=({...e})=>m(Lp,{...e,prefix:"End"});const Tt=(e,t)=>({id:`edge-${e}-to-${t}`,type:"buttonEdge",source:e,target:t,data:{onEdgeClick:(n,r)=>{n.stopPropagation(),alert(`hello ${r}`)}}}),qp=e=>{let t;return e.executionList&&(t="startSubFlow"),Qa(e)&&(t="conditional"),{id:e.id,type:t,sourcePosition:O.Right,targetPosition:O.Left,data:{label:e.displayName},position:{x:0,y:0}}},O2=e=>[qp(e)],F2=(e,t,n)=>[Tt(e.id,t.id),Tt(t.id,n.id)],z2=e=>[qp(e)],B2=(e,t,n,r,i,o)=>{const a=[];return i?a.push(Tt(e.id,t.id)):a.push(Tt(r.id,t.id)),o&&a.push(Tt(t.id,n.id)),a},H2=e=>{const t=[];t.push({id:e.id,type:"startSubFlow",sourcePosition:O.Right,targetPosition:O.Left,data:{label:e.displayName},position:{x:0,y:0}});const n=`flow-end-${e.id}`;return t.push({id:n,type:"endSubFlow",sourcePosition:O.Right,targetPosition:O.Left,data:{label:e.displayName},position:{x:0,y:0}}),t.concat(Pp(e.executionList||[]))},V2=(e,t,n,r)=>{const i=[],o=`flow-end-${e.id}`;return i.push(Tt(r&&r.requirement!=="ALTERNATIVE"?r.id:t.id,e.id)),i.push(Tt(o,n.id)),i.concat($p(e,e.executionList||[],{...e,id:o}))},Pp=e=>{let t=[];for(let n=0;n<e.length;n++){const r=e[n];r.executionList?t=t.concat(H2(r)):r.requirement==="ALTERNATIVE"||r.requirement==="DISABLED"?t=t.concat(O2(r)):t=t.concat(z2(r))}return t},$p=(e,t,n)=>{let r=[];for(let i=0;i<t.length;i++){const o=t[i];o.executionList?r=r.concat(V2(o,e,n,t[i-1])):o.requirement==="ALTERNATIVE"||o.requirement==="DISABLED"?r=r.concat(F2(e,o,n)):r=r.concat(B2(e,o,n,t[i-1],i===0,i===t.length-1))}return r},G2={conditional:q2,startSubFlow:$2,endSubFlow:D2},U2={buttonEdge:A2};function Td(e){return R2([{id:"start",sourcePosition:O.Right,type:"input",data:{label:"Start"},position:{x:0,y:0},className:"keycloak__authentication__input_node"},{id:"end",targetPosition:O.Left,type:"output",data:{label:"End"},position:{x:0,y:0},className:"keycloak__authentication__output_node"},...Pp(e)])}function Ad(e){return T2($p({id:"start"},e,{id:"end"}))}const Y2=({executionList:{expandableList:e}})=>{const[t,n]=x.exports.useState(!1),r=x.exports.useMemo(()=>Td(e),[]),i=x.exports.useMemo(()=>Ad(e),[]),[o,a,s]=x1(r),[c,l,u]=_1(i);return H1(()=>{a(Td(e)),l(Ad(e))},[e]),m(xg,{isExpanded:t,onExpand:()=>n(!0),children:m(_g,{panelContent:m(Eg,{children:U(ym,{children:[m("span",{tabIndex:t?0:-1,children:"drawer-panel"}),m(of,{children:m(af,{onClick:()=>n(!1)})})]})}),children:m(Sg,{children:U(Rh,{nodes:o,edges:c,onNodesChange:s,onEdgesChange:u,onInit:h=>h.fitView(),nodeTypes:G2,edgeTypes:U2,onNodeClick:()=>{n(!t)},nodesConnectable:!1,children:[m(I1,{}),m(P1,{}),m(B1,{})]})})})})},K2=({flow:e,toggleDialog:t})=>{const{t:n}=Be("authentication"),{adminClient:r}=Wt(),{addAlert:i,addError:o}=es(),a=dr({mode:"onChange"}),{reset:s,handleSubmit:c}=a;x.exports.useEffect(()=>s(e),[e]);const l=async u=>{try{await r.authenticationManagement.updateFlow({flowId:e.id},{...e,...u}),i(n("updateFlowSuccess"),ut.success)}catch(d){o("authentication:updateFlowError",d)}t()};return m(xn,{title:n("editFlow"),onClose:t,variant:_n.small,actions:[m(fe,{"data-testid":"confirm",type:"submit",form:"edit-flow-form",children:n("edit")},"confirm"),m(fe,{"data-testid":"cancel",variant:rt.link,onClick:()=>t(),children:n("common:cancel")},"cancel")],isOpen:!0,children:m(Fd,{...a,children:m(En,{id:"edit-flow-form",onSubmit:c(l),isHorizontal:!0,children:m(xm,{})})})})},Qa=e=>e.displayName?.startsWith("Condition ");function eN(){const{t:e}=Be("authentication"),{adminClient:t}=Wt(),{realm:n}=Cg(),{addAlert:r,addError:i}=es(),{id:o,usedBy:a,builtIn:s}=Ng(),c=Mg(),[l,u]=x.exports.useState(0),d=()=>u(new Date().getTime()),[f,h]=x.exports.useState(!0),[p,g]=x.exports.useState(),[y,v]=x.exports.useState(),[_,N]=x.exports.useState(),[E,C]=x.exports.useState(""),[M,T]=x.exports.useState(),[$,P]=x.exports.useState(),[z,D]=x.exports.useState(),[A,B,b]=Ta(),[k,S]=x.exports.useState(!1),[w,I]=Ta();wn(async()=>{const G=(await t.authenticationManagement.getFlows()).find(oe=>oe.id===o);if(!G)throw new Error(e("common:notFound"));const j=await t.authenticationManagement.getExecutions({flow:G.alias});return{flow:G,executions:j}},({flow:V,executions:G})=>{g(V),v(new ds(G))},[l]);const R=async(V,G)=>{try{let j=V.id;"parent"in G&&(await t.authenticationManagement.delExecution({id:j}),j=(await t.authenticationManagement.addExecutionToFlow({flow:G.parent?.displayName||p?.alias,provider:V.providerId})).id);const oe=G.newIndex-G.oldIndex;for(let te=0;te<Math.abs(oe);te++)oe>0?await t.authenticationManagement.lowerPriorityExecution({id:j}):await t.authenticationManagement.raisePriorityExecution({id:j});d(),r(e("updateFlowSuccess"),ut.success)}catch(j){i("authentication:updateFlowError",j)}},q=async V=>{const{executionList:G,isCollapsed:j,...oe}=V;try{await t.authenticationManagement.updateExecution({flow:p?.alias},oe),d(),r(e("updateFlowSuccess"),ut.success)}catch(te){i("authentication:updateFlowError",te)}},F=async(V,G)=>{try{await t.authenticationManagement.addExecutionToFlow({flow:V,provider:G.id}),d(),r(e("updateFlowSuccess"),ut.success)}catch(j){i("authentication:updateFlowError",j)}},H=async(V,{name:G,description:j="",type:oe,provider:te})=>{try{await t.authenticationManagement.addFlowToFlow({flow:V,alias:G,description:j,provider:te,type:oe}),d(),r(e("updateFlowSuccess"),ut.success)}catch(le){i("authentication:updateFlowError",le)}},[X,Y]=Ys({titleKey:"authentication:deleteConfirmExecution",children:U(Ks,{i18nKey:"authentication:deleteConfirmExecutionMessage",children:[" ",m("strong",{children:{name:z?.displayName}}),"."]}),continueButtonLabel:"common:delete",continueButtonVariant:rt.danger,onConfirm:async()=>{try{await t.authenticationManagement.delExecution({id:z?.id}),r(e("deleteExecutionSuccess"),ut.success),d()}catch(V){i("authentication:deleteExecutionError",V)}}}),[ee,ie]=Ys({titleKey:"authentication:deleteConfirmFlow",children:U(Ks,{i18nKey:"authentication:deleteConfirmFlowMessage",children:[" ",m("strong",{children:{flow:p?.alias||""}}),"."]}),continueButtonLabel:"common:delete",continueButtonVariant:rt.danger,onConfirm:async()=>{try{await t.authenticationManagement.deleteFlow({flowId:p.id}),c(Ig({realm:n})),r(e("deleteFlowSuccess"),ut.success)}catch(V){i("authentication:deleteFlowError",V)}}}),K=y?.expandableList.length!==0,Q=[...a!=="DEFAULT"?[m(_t,{"data-testid":"set-as-default",onClick:I,children:e("bindFlow")},"default")]:[],m(_t,{onClick:()=>b(!0),children:e("duplicate")},"duplicate"),...s?[]:[m(_t,{"data-testid":"edit-flow",onClick:()=>S(!0),children:e("editInfo")},"edit"),m(_t,{"data-testid":"delete-flow",onClick:()=>ee(),children:e("common:delete")},"delete")]];return U(ae,{children:[w&&m(bm,{flowAlias:p?.alias,onClose:()=>{I(),d()}}),A&&m(wm,{name:p?.alias,description:p?.description,toggleDialog:B,onComplete:()=>{d(),b(!1)}}),k&&m(K2,{flow:p,toggleDialog:()=>{S(!k),d()}}),m(ie,{}),m(Rg,{titleKey:p?.alias||"",badges:[{text:m(Gs,{children:e(`used.${a}`)})},s?{text:m(Gs,{className:"keycloak_authentication-section__usedby_label",icon:m(kg,{}),children:e("buildIn")}),id:"builtIn"}:{}],dropdownItems:Q}),U(qd,{variant:"light",children:[y&&K&&U(ae,{children:[m(Bg,{id:"toolbar",children:U(Hg,{children:[m(Rr,{children:U(sf,{children:[m(Zn,{icon:m(Im,{}),"aria-label":e("tableView"),buttonId:"tableView",isSelected:f,onChange:()=>h(!0)}),m(Zn,{icon:m(Nm,{}),"aria-label":e("diagramView"),buttonId:"diagramView",isSelected:!f,onChange:()=>h(!1)})]})}),m(Rr,{children:m(fe,{"data-testid":"addStep",variant:"secondary",onClick:()=>T(!0),children:e("addStep")})}),m(Rr,{children:m(fe,{"data-testid":"addSubFlow",variant:"secondary",onClick:()=>P(!0),children:e("addSubFlow")})})]})}),m(Y,{}),f&&U(Pg,{"aria-label":e("flows"),onDragFinish:V=>{const G=V.slice(1);C(e("common:onDragFinish",{list:_?.displayName}));const j=y.getChange(_,G);R(_,j)},onDragStart:V=>{const G=y.findExecution(V);C(e("common:onDragStart",{item:G.displayName})),N(G),G.isCollapsed||(G.isCollapsed=!0,v(y.clone()))},onDragMove:()=>C(e("common:onDragMove",{item:_?.displayName})),onDragCancel:()=>C(e("common:onDragCancel")),itemOrder:["header",...y.order().map(V=>V.id)],children:[m(Tm,{}),m(ae,{children:y.expandableList.map(V=>m(cf,{builtIn:!!s,execution:V,onRowClick:G=>{G.isCollapsed=!G.isCollapsed,v(y.clone())},onRowChange:q,onAddExecution:(G,j)=>F(G.displayName,j),onAddFlow:(G,j)=>H(G.displayName,j),onDelete:G=>{D(G),X()}},V.id))})]}),p&&U(ae,{children:[M&&m(us,{name:p.alias,type:p.providerId==="client-flow"?"client":"basic",onSelect:V=>{V&&F(p.alias,V),T(!1)}}),$&&m(ls,{name:p.alias,onCancel:()=>P(!1),onConfirm:V=>{H(p.alias,V),P(!1)}})]}),m("div",{className:"pf-screen-reader","aria-live":"assertive",children:E})]}),!f&&y?.expandableList&&m(Y2,{executionList:y}),!y?.expandableList||p&&!K&&m(Rm,{flow:p,onAddExecution:V=>F(p.alias,V),onAddFlow:V=>H(p.alias,V)})]})]})}export{eN as default,Qa as providerConditionFilter};
//# sourceMappingURL=FlowDetails.3ee6f887.js.map
