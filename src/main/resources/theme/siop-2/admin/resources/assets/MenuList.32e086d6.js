import{r as d,j as i,N as we,M as le,_ as F,h as A,p as m,O as De,at as Ne,Q as Se,a8 as Ee,au as Re,a5 as Oe,av as ke}from"./index.2ecf13ca.js";import{K as Ae}from"./Td.ff2a9f66.js";import{S as Fe}from"./star-icon.648ddb2a.js";import{C as Te}from"./Checkbox.56efba4a.js";const t={breadcrumb:"pf-c-breadcrumb",divider:"pf-c-divider",menu:"pf-c-menu",menuBreadcrumb:"pf-c-menu__breadcrumb",menuContent:"pf-c-menu__content",menuFooter:"pf-c-menu__footer",menuGroup:"pf-c-menu__group",menuGroupTitle:"pf-c-menu__group-title",menuHeader:"pf-c-menu__header",menuItem:"pf-c-menu__item",menuItemAction:"pf-c-menu__item-action",menuItemActionIcon:"pf-c-menu__item-action-icon",menuItemCheck:"pf-c-menu__item-check",menuItemDescription:"pf-c-menu__item-description",menuItemExternalIcon:"pf-c-menu__item-external-icon",menuItemIcon:"pf-c-menu__item-icon",menuItemMain:"pf-c-menu__item-main",menuItemSelectIcon:"pf-c-menu__item-select-icon",menuItemText:"pf-c-menu__item-text",menuItemToggleIcon:"pf-c-menu__item-toggle-icon",menuList:"pf-c-menu__list",menuListItem:"pf-c-menu__list-item",menuSearch:"pf-c-menu__search",modifiers:{hidden:"pf-m-hidden",hiddenOnSm:"pf-m-hidden-on-sm",visibleOnSm:"pf-m-visible-on-sm",hiddenOnMd:"pf-m-hidden-on-md",visibleOnMd:"pf-m-visible-on-md",hiddenOnLg:"pf-m-hidden-on-lg",visibleOnLg:"pf-m-visible-on-lg",hiddenOnXl:"pf-m-hidden-on-xl",visibleOnXl:"pf-m-visible-on-xl",hiddenOn_2xl:"pf-m-hidden-on-2xl",visibleOn_2xl:"pf-m-visible-on-2xl",flyout:"pf-m-flyout",top:"pf-m-top",left:"pf-m-left",drilldown:"pf-m-drilldown",drilledIn:"pf-m-drilled-in",currentPath:"pf-m-current-path",static:"pf-m-static",plain:"pf-m-plain",scrollable:"pf-m-scrollable",nav:"pf-m-nav",focus:"pf-m-focus",disabled:"pf-m-disabled",load:"pf-m-load",loading:"pf-m-loading",danger:"pf-m-danger",selected:"pf-m-selected",favorite:"pf-m-favorite",favorited:"pf-m-favorited"},themeDark:"pf-theme-dark"},w=d.exports.createContext({menuId:null,parentMenu:null,onActionClick:()=>null,onSelect:()=>null,activeItemId:null,selected:null,drilledInMenus:[],drilldownItemPath:[],onDrillIn:null,onDrillOut:null,onGetMenuHeight:()=>null,flyoutRef:null,setFlyoutRef:()=>null,disableHover:!1,role:"menu"}),Ie=d.exports.createContext({itemId:null,isDisabled:!1});class G extends d.exports.Component{constructor(o){super(o),this.menuRef=d.exports.createRef(),this.activeMenu=null,this.state={ouiaStateId:we(oe.displayName),searchInputValue:"",transitionMoveTarget:null,flyoutRef:null,disableHover:!1,currentDrilldownMenuId:this.props.id},this.handleDrilldownTransition=l=>{const e=this.menuRef.current;if(!(!e||e!==l.target.closest(".pf-c-menu")&&!Array.from(e.getElementsByClassName("pf-c-menu")).includes(l.target.closest(".pf-c-menu"))))if(this.state.transitionMoveTarget)this.state.transitionMoveTarget.focus(),this.setState({transitionMoveTarget:null});else{const a=e.querySelector("#"+this.props.activeMenu)||e||null,s=Array.from(a.getElementsByTagName("UL")[0].children);if(!this.state.currentDrilldownMenuId||a.id!==this.state.currentDrilldownMenuId)this.setState({currentDrilldownMenuId:a.id});else return;const p=s.filter(h=>!(h.classList.contains("pf-m-disabled")||h.classList.contains("pf-c-divider")))[0].firstChild;p.focus(),p.tabIndex=0}},this.handleExtraKeys=l=>{const e=this.props.containsDrilldown,a=document.activeElement;if(l.target.closest(".pf-c-menu")!==this.activeMenu&&!l.target.classList.contains("pf-c-breadcrumb__link")&&(this.activeMenu=l.target.closest(".pf-c-menu"),this.setState({disableHover:!0})),l.target.tagName==="INPUT")return;const s=this.activeMenu,p=l.key,h=a.classList.contains("pf-c-breadcrumb__link")||a.classList.contains("pf-c-dropdown__toggle");if(p===" "||p==="Enter"){if(l.preventDefault(),e&&!h){if(a.closest("li").classList.contains("pf-m-current-path")&&s.parentElement.tagName==="LI")a.tabIndex=-1,s.parentElement.firstChild.tabIndex=0,this.setState({transitionMoveTarget:s.parentElement.firstChild});else if(a.nextElementSibling&&a.nextElementSibling.classList.contains("pf-c-menu")){const f=Array.from(a.nextElementSibling.getElementsByTagName("UL")[0].children).filter(c=>!(c.classList.contains("pf-m-disabled")||c.classList.contains("pf-c-divider")));a.tabIndex=-1,f[0].firstChild.tabIndex=0,this.setState({transitionMoveTarget:f[0].firstChild})}}document.activeElement.click()}},this.createNavigableElements=()=>this.props.containsDrilldown?this.activeMenu?Array.from(this.activeMenu.getElementsByTagName("UL")[0].children).filter(e=>!(e.classList.contains("pf-m-disabled")||e.classList.contains("pf-c-divider"))):[]:this.menuRef.current?Array.from(this.menuRef.current.getElementsByTagName("LI")).filter(e=>!(e.classList.contains("pf-m-disabled")||e.classList.contains("pf-c-divider"))):[],o.innerRef&&(this.menuRef=o.innerRef)}allowTabFirstItem(){const o=this.menuRef.current;if(o){const l=o.querySelector("ul button:not(:disabled), ul a:not(:disabled)");l&&(l.tabIndex=0)}}componentDidMount(){this.context&&this.setState({disableHover:this.context.disableHover}),le&&window.addEventListener("transitionend",this.props.isRootMenu?this.handleDrilldownTransition:null),this.allowTabFirstItem()}componentWillUnmount(){le&&window.removeEventListener("transitionend",this.handleDrilldownTransition)}componentDidUpdate(o){o.children!==this.props.children&&this.allowTabFirstItem()}render(){const o=this.props,{"aria-label":l,id:e,children:a,className:s,onSelect:p,selected:h=null,onActionClick:L,ouiaId:f,ouiaSafe:c,containsFlyout:g,isNavFlyout:y,containsDrilldown:_,isMenuDrilledIn:I,isPlain:v,isScrollable:E,drilldownItemPath:R,drilledInMenus:O,onDrillIn:q,onDrillOut:T,onGetMenuHeight:X,parentMenu:H=null,activeItemId:C=null,innerRef:P,isRootMenu:$,activeMenu:ae,role:W}=o,z=F(o,["aria-label","id","children","className","onSelect","selected","onActionClick","ouiaId","ouiaSafe","containsFlyout","isNavFlyout","containsDrilldown","isMenuDrilledIn","isPlain","isScrollable","drilldownItemPath","drilledInMenus","onDrillIn","onDrillOut","onGetMenuHeight","parentMenu","activeItemId","innerRef","isRootMenu","activeMenu","role"]),B=I||O&&O.includes(e)||!1;return A(w.Provider,{value:{menuId:e,parentMenu:H||e,onSelect:p,onActionClick:L,activeItemId:C,selected:h,drilledInMenus:O,drilldownItemPath:R,onDrillIn:q,onDrillOut:T,onGetMenuHeight:X,flyoutRef:this.state.flyoutRef,setFlyoutRef:b=>this.setState({flyoutRef:b}),disableHover:this.state.disableHover,role:W},children:[$&&i(Ae,{containerRef:this.menuRef||null,additionalKeyHandler:this.handleExtraKeys,createNavigableElements:this.createNavigableElements,isActiveElement:b=>document.activeElement.closest("li")===b||document.activeElement.parentElement===b||document.activeElement.closest(".pf-c-menu__search")===b||document.activeElement.closest("ol")&&document.activeElement.closest("ol").firstChild===b,getFocusableElement:b=>b.tagName==="DIV"&&b.querySelector("input")||b.firstChild.tagName==="LABEL"&&b.querySelector("input")||b.firstChild,noHorizontalArrowHandling:document.activeElement&&(document.activeElement.classList.contains("pf-c-breadcrumb__link")||document.activeElement.classList.contains("pf-c-dropdown__toggle")),noEnterHandling:!0,noSpaceHandling:!0}),i("div",{...Object.assign({id:e,className:m(t.menu,v&&t.modifiers.plain,E&&t.modifiers.scrollable,g&&t.modifiers.flyout,y&&t.modifiers.nav,_&&t.modifiers.drilldown,B&&t.modifiers.drilledIn,s),"aria-label":l,ref:this.menuRef},De(oe.displayName,f!==void 0?f:this.state.ouiaStateId,c),z),children:a})]})}}G.displayName="Menu";G.contextType=w;G.defaultProps={ouiaSafe:!0,isRootMenu:!0,isPlain:!1,isScrollable:!1,role:"menu"};const oe=d.exports.forwardRef((u,o)=>i(G,{...Object.assign({},u,{innerRef:o})}));oe.displayName="Menu";const He=d.exports.forwardRef((u,o)=>{const{getHeight:l,children:e,menuHeight:a,maxMenuHeight:s}=u,p=F(u,["getHeight","children","menuHeight","maxMenuHeight"]),h=d.exports.createRef(),L=(f,c,g)=>{if(f){let y=f.clientHeight,_=null,I=f.closest(`.${t.menuList}`);for(;I!==null&&I.nodeType===1;)I.classList.contains(t.menuList)&&(_=I),I=I.parentElement;if(_){const v=getComputedStyle(_),E=parseFloat(v.getPropertyValue("padding-top").replace(/px/g,""))+parseFloat(v.getPropertyValue("padding-bottom").replace(/px/g,""))+parseFloat(getComputedStyle(_.parentElement).getPropertyValue("border-bottom-width").replace(/px/g,""));y=y+E}g&&g(c,y),l&&l(y.toString())}return o||h};return i(w.Consumer,{children:({menuId:f,onGetMenuHeight:c})=>i("div",{...Object.assign({},p,{className:m(t.menuContent,u.className),ref:g=>L(g,f,c),style:Object.assign(Object.assign({},a&&{"--pf-c-menu__content--Height":a}),s&&{"--pf-c-menu__content--MaxHeight":s})}),children:e})})});He.displayName="MenuContent";const Pe={name:"--pf-c-menu--m-flyout__menu--top-offset",value:"0px",var:"var(--pf-c-menu--m-flyout__menu--top-offset)"},Be=Pe,je={name:"--pf-c-menu--m-flyout__menu--m-left--right-offset",value:"0px",var:"var(--pf-c-menu--m-flyout__menu--m-left--right-offset)"},Ue=je,Ke={name:"--pf-c-menu--m-flyout__menu--left-offset",value:"0px",var:"var(--pf-c-menu--m-flyout__menu--left-offset)"},Ve=Ke,Ge=u=>{var{className:o="",icon:l,onClick:e,"aria-label":a,isFavorited:s=null,isDisabled:p,actionId:h,innerRef:L}=u,f=F(u,["className","icon","onClick","aria-label","isFavorited","isDisabled","actionId","innerRef"]);return i(w.Consumer,{children:({onActionClick:c})=>i(Ie.Consumer,{children:({itemId:g,isDisabled:y})=>{const _=I=>{e&&e(I),c&&c(I,g,h)};return i("button",{...Object.assign({className:m(t.menuItemAction,s!==null&&t.modifiers.favorite,s&&t.modifiers.favorited,o),"aria-label":a,onClick:_},(p===!0||y===!0)&&{disabled:!0},{ref:L,tabIndex:-1},f),children:i("span",{className:m(t.menuItemActionIcon),children:l==="favorites"||s!==null?i(Fe,{"aria-hidden":!0}):l})})}})})},ye=d.exports.forwardRef((u,o)=>i(Ge,{...Object.assign({},u,{innerRef:o})}));ye.displayName="MenuItemAction";const be=d.exports.createContext({direction:"right"}),qe=u=>{var{children:o,className:l,itemId:e=null,to:a,hasCheck:s=!1,isActive:p=null,isFavorited:h=null,isLoadButton:L=!1,isLoading:f=!1,flyoutMenu:c,direction:g,description:y=null,onClick:_=()=>{},component:I="button",isDisabled:v=!1,isExternalLink:E=!1,isSelected:R=null,isFocused:O,isDanger:q=!1,icon:T,actions:X,onShowFlyout:H,drilldownMenu:C,isOnPath:P,innerRef:$}=u,ae=F(u,["children","className","itemId","to","hasCheck","isActive","isFavorited","isLoadButton","isLoading","flyoutMenu","direction","description","onClick","component","isDisabled","isExternalLink","isSelected","isFocused","isDanger","icon","actions","onShowFlyout","drilldownMenu","isOnPath","innerRef"]);const{menuId:W,parentMenu:z,onSelect:B,onActionClick:b,activeItemId:re,selected:j,drilldownItemPath:ce,onDrillIn:ue,onDrillOut:de,flyoutRef:_e,setFlyoutRef:Q,disableHover:me,role:ve}=d.exports.useContext(w);let U=a?"a":I;s&&!a&&(U="label");const[K,xe]=d.exports.useState(null),J=d.exports.useContext(be),[fe,Y]=d.exports.useState(J.direction),D=d.exports.useRef(),M=D===_e,Z=c!==void 0,ee=n=>{!M&&n?Q(D):M&&!n&&Q(null),H&&n&&H()};Ne(()=>{if(Z&&D.current&&le){const n=D.current.lastElementChild;if(n&&n.classList.contains(t.menu)){const r=D.current.getClientRects()[0],x=n.getClientRects()[0];if(r&&x){const k=r.x-x.width,ne=window.innerWidth-r.x-r.width-x.width;let S=fe;ne<0&&S!=="left"?(Y("left"),S="left"):k<0&&S!=="right"&&(Y("right"),S="right");let ie=0;k<0&&ne<0&&(ie=S==="right"?-ne:-k),S==="left"?(n.classList.add(t.modifiers.left),n.style.setProperty(Ue.name,`-${ie}px`)):n.style.setProperty(Ve.name,`-${ie}px`);const se=window.innerHeight-r.y-x.height;window.innerHeight-x.height<0&&se<0||se<0&&n.style.setProperty(Be.name,`${se}px`)}}}},[M,c]),d.exports.useEffect(()=>{Y(J.direction)},[J]),d.exports.useEffect(()=>{if(K)if(M){const n=K.nextElementSibling;Array.from(n.getElementsByTagName("UL")[0].children).filter(x=>!(x.classList.contains("pf-m-disabled")||x.classList.contains("pf-c-divider")))[0].firstChild.focus()}else K.focus()},[M,K]);const pe=n=>{const r=n.key,x=n.target,k=n.type;(r===" "||r==="Enter"||r==="ArrowRight"||k==="click")&&(n.stopPropagation(),n.preventDefault(),M||(ee(!0),xe(x))),(r==="Escape"||r==="ArrowLeft")&&M&&(n.stopPropagation(),ee(!1))},he=(n,r)=>{r&&r(n,e),_&&_(n)},Me=P&&P||ce&&ce.includes(e)||!1;let V;g&&(g==="down"?V=n=>ue&&ue(n,W,typeof C=="function"?C().props.id:C.props.id,e):V=n=>de&&de(n,z,e));let N={};U==="a"?N={href:a,"aria-disabled":v?!0:null,disabled:null}:U==="button"&&(N={type:"button"}),P?N["aria-expanded"]=!0:Z&&(N["aria-haspopup"]="menu",N["aria-expanded"]=M);const Le=()=>p!==null?p?"page":null:e!==null&&re!==null?e===re:null,te=()=>R!==null?R:j!==null&&e!==null?Array.isArray(j)&&j.includes(e)||e===j:!1,Ce=()=>{me||(Z?ee(!0):Q(null))},ge=ve==="listbox";return A("li",{...Object.assign({className:m(t.menuListItem,v&&t.modifiers.disabled,Me&&t.modifiers.currentPath,L&&t.modifiers.load,f&&t.modifiers.loading,O&&t.modifiers.focus,q&&t.modifiers.danger,l),onMouseOver:Ce},c&&{onKeyDown:pe},{ref:D,role:s?"menuitem":"none"},ae),children:[i(Se,{children:n=>A(U,{...Object.assign({tabIndex:-1,className:m(t.menuItem,te()&&!s&&t.modifiers.selected,l),"aria-current":Le()},!s&&{disabled:v},!s&&!c&&{role:ge?"option":"menuitem"},!s&&!c&&ge&&{"aria-selected":te()},{ref:$},!s&&{onClick:r=>{he(r,B),V&&V(r),c&&pe(r)}},s&&{htmlFor:n},N),children:[A("span",{className:m(t.menuItemMain),children:[g==="up"&&i("span",{className:m(t.menuItemToggleIcon),children:i(Ee,{"aria-hidden":!0})}),T&&i("span",{className:m(t.menuItemIcon),children:T}),s&&i("span",{className:m("pf-c-menu__item-check"),children:i(Te,{id:n,component:"span",isChecked:R||!1,onChange:r=>he(r,B),isDisabled:v})}),i("span",{className:m(t.menuItemText),children:o}),E&&i("span",{className:m(t.menuItemExternalIcon),children:i(Re,{"aria-hidden":!0})}),(c||g==="down")&&i("span",{className:m(t.menuItemToggleIcon),children:i(Oe,{"aria-hidden":!0})}),te()&&i("span",{className:m(t.menuItemSelectIcon),children:i(ke,{"aria-hidden":!0})})]}),y&&g!=="up"&&i("span",{className:m(t.menuItemDescription),children:i("span",{children:y})})]})}),M&&i(w.Provider,{value:{disableHover:me},children:i(be.Provider,{value:{direction:fe},children:c})}),typeof C=="function"?C():C,A(Ie.Provider,{value:{itemId:e,isDisabled:v},children:[X,h!==null&&i(ye,{icon:"favorites",isFavorited:h,"aria-label":h?"starred":"not starred",onClick:n=>b(n,e),tabIndex:-1,actionId:"fav"})]})]})},Xe=d.exports.forwardRef((u,o)=>i(qe,{...Object.assign({},u,{innerRef:o})}));Xe.displayName="MenuItem";const $e=u=>{var{children:o=null,className:l,isAriaMultiselectable:e=!1}=u,a=F(u,["children","className","isAriaMultiselectable"]);const{role:s}=d.exports.useContext(w);return i("ul",{...Object.assign({role:s},s==="listbox"&&{"aria-multiselectable":e},{className:m(t.menuList,l)},a),children:o})};$e.displayName="MenuList";export{Xe as M,oe as a,He as b,$e as c,t as m};
//# sourceMappingURL=MenuList.32e086d6.js.map
