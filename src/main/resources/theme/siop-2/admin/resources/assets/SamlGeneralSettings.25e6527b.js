import{u as x,r as h,j as e,h as g,aw as m,F as D,l as B,m as H}from"./index.7cbfb18a.js";import{a as E,b as k,C as v}from"./index.esm.1e7ace95.js";import{H as o}from"./HelpItem.719382e8.js";import{K as f}from"./KeycloakTextInput.9afb01cd.js";import{S as u,T as _}from"./discovery-settings.6bf57500.js";import{E as V}from"./ExpandableSection.0b0d95f4.js";import{a as d}from"./FormGroup.60c77f60.js";import{S as I,b as y,a as l}from"./Select.fbe867d5.js";import{N as L}from"./NumberInput.619d2bbb.js";import{F as G}from"./ViewHeader.083cd951.js";import{R as Q,D as X}from"./DisplayOrder.b6d3afed.js";const P=({readOnly:t})=>{const{t:i}=x("identity-providers"),{t:r}=x("identity-providers-help"),{register:p,control:s,formState:{errors:S}}=E(),[A,T]=h.exports.useState(!1),[O,N]=h.exports.useState(!1),[F,R]=h.exports.useState(!1),[q,w]=h.exports.useState(!1),[M,C]=h.exports.useState(!1),U=k({control:s,name:"config.wantAuthnRequestsSigned"}),K=k({control:s,name:"config.validateSignature"}),j=k({control:s,name:"config.principalType"});return g("div",{className:"pf-c-form pf-m-horizontal",children:[e(d,{label:i("serviceProviderEntityId"),fieldId:"kc-saml-service-provider-entity-id",labelIcon:e(o,{helpText:"identity-providers-help:serviceProviderEntityId",fieldLabelId:"identity-providers:serviceProviderEntityId"}),children:e(f,{"data-testid":"serviceProviderEntityId",id:"kc-saml-service-provider-entity-id",...p("config.entityId")})}),e(d,{label:i("identityProviderEntityId"),fieldId:"kc-identity-provider-entity-id",labelIcon:e(o,{helpText:"identity-providers-help:identityProviderEntityId",fieldLabelId:"identity-providers:identityProviderEntityId"}),children:e(f,{"data-testid":"identityProviderEntityId",id:"kc-identity-provider-entity-id",...p("config.idpEntityId")})}),e(d,{label:i("ssoServiceUrl"),labelIcon:e(o,{helpText:r("ssoServiceUrl"),fieldLabelId:"identity-providers:ssoServiceUrl"}),fieldId:"kc-sso-service-url",isRequired:!0,validated:S.config?.singleSignOnServiceUrl?m.error:m.default,helperTextInvalid:i("common:required"),children:e(f,{type:"url","data-testid":"sso-service-url",id:"kc-sso-service-url",validated:S.config?.singleSignOnServiceUrl?m.error:m.default,isReadOnly:t,...p("config.singleSignOnServiceUrl",{required:!0})})}),e(d,{label:i("singleLogoutServiceUrl"),labelIcon:e(o,{helpText:r("singleLogoutServiceUrl"),fieldLabelId:"identity-providers:singleLogoutServiceUrl"}),fieldId:"single-logout-service-url","data-testid":"single-logout-service-url",validated:S.config?.singleLogoutServiceUrl?m.error:m.default,helperTextInvalid:i("common:required"),children:e(f,{type:"url",id:"single-logout-service-url",isReadOnly:t,...p("config.singleLogoutServiceUrl")})}),e(u,{field:"config.backchannelSupported",label:"backchannelLogout","data-testid":"backchannelLogout",isReadOnly:t}),e(d,{label:i("nameIdPolicyFormat"),labelIcon:e(o,{helpText:r("nameIdPolicyFormat"),fieldLabelId:"identity-providers:nameIdPolicyFormat"}),fieldId:"kc-nameIdPolicyFormat",helperTextInvalid:i("common:required"),children:e(v,{name:"config.nameIDPolicyFormat",defaultValue:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",control:s,render:({field:a})=>g(I,{toggleId:"kc-nameIdPolicyFormat",onToggle:n=>T(n),isOpen:A,onSelect:(n,c)=>{a.onChange(c),T(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{"data-testid":"persistent-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",isPlaceholder:!0,children:i("persistent")}),e(l,{"data-testid":"transient-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient",children:i("transient")}),e(l,{"data-testid":"email-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress",children:i("email")}),e(l,{"data-testid":"kerberos-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:kerberos",children:i("kerberos")}),e(l,{"data-testid":"x509-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName",children:i("x509")}),e(l,{"data-testid":"windowsDomainQN-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:WindowsDomainQualifiedName",children:i("windowsDomainQN")}),e(l,{"data-testid":"unspecified-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",children:i("unspecified")})]})})}),e(d,{label:i("principalType"),labelIcon:e(o,{helpText:r("principalType"),fieldLabelId:"identity-providers:principalType"}),fieldId:"kc-principalType",helperTextInvalid:i("common:required"),children:e(v,{name:"config.principalType",defaultValue:i("subjectNameId"),control:s,render:({field:a})=>g(I,{toggleId:"kc-principalType",onToggle:n=>N(n),isOpen:O,onSelect:(n,c)=>{a.onChange(c.toString()),N(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{"data-testid":"subjectNameId-option",value:"SUBJECT",isPlaceholder:!0,children:i("subjectNameId")}),e(l,{"data-testid":"attributeName-option",value:"ATTRIBUTE",children:i("attributeName")}),e(l,{"data-testid":"attributeFriendlyName-option",value:"FRIENDLY_ATTRIBUTE",children:i("attributeFriendlyName")})]})})}),j?.includes("ATTRIBUTE")&&e(d,{label:i("principalAttribute"),labelIcon:e(o,{helpText:r("principalAttribute"),fieldLabelId:"identity-providers:principalAttribute"}),fieldId:"principalAttribute",children:e(f,{id:"principalAttribute","data-testid":"principalAttribute",isReadOnly:t,...p("config.principalAttribute")})}),e(u,{field:"config.allowCreate",label:"allowCreate",isReadOnly:t}),e(u,{field:"config.postBindingResponse",label:"httpPostBindingResponse",isReadOnly:t}),e(u,{field:"config.postBindingAuthnRequest",label:"httpPostBindingAuthnRequest",isReadOnly:t}),e(u,{field:"config.postBindingLogout",label:"httpPostBindingLogout",isReadOnly:t}),e(u,{field:"config.wantAuthnRequestsSigned",label:"wantAuthnRequestsSigned",isReadOnly:t}),U==="true"&&g(D,{children:[e(d,{label:i("signatureAlgorithm"),labelIcon:e(o,{helpText:r("signatureAlgorithm"),fieldLabelId:"identity-providers:signatureAlgorithm"}),fieldId:"kc-signatureAlgorithm",children:e(v,{name:"config.signatureAlgorithm",defaultValue:"RSA_SHA256",control:s,render:({field:a})=>g(I,{toggleId:"kc-signatureAlgorithm",onToggle:n=>R(n),isOpen:F,onSelect:(n,c)=>{a.onChange(c.toString()),R(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{value:"RSA_SHA1"}),e(l,{value:"RSA_SHA256",isPlaceholder:!0}),e(l,{value:"RSA_SHA256_MGF1"}),e(l,{value:"RSA_SHA512"}),e(l,{value:"RSA_SHA512_MGF1"}),e(l,{value:"DSA_SHA1"})]})})}),e(d,{label:i("encryptionAlgorithm"),labelIcon:e(o,{helpText:r("encryptionAlgorithm"),fieldLabelId:"identity-provider:encryptionAlgorithm"}),fieldId:"kc-encryptionAlgorithm",children:e(v,{name:"config.encryptionAlgorithm",defaultValue:"RSA-OAEP",control:s,render:({field:a})=>g(I,{toggleId:"kc-encryptionAlgorithm",onToggle:n=>w(n),isOpen:q,onSelect:(n,c)=>{a.onChange(c.toString()),w(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{value:"RSA-OAEP"}),e(l,{value:"RSA1_5"})]})})}),e(d,{label:i("samlSignatureKeyName"),labelIcon:e(o,{helpText:r("samlSignatureKeyName"),fieldLabelId:"identity-providers:samlSignatureKeyName"}),fieldId:"kc-samlSignatureKeyName",children:e(v,{name:"config.xmlSigKeyInfoKeyNameTransformer",defaultValue:i("keyID"),control:s,render:({field:a})=>g(I,{toggleId:"kc-samlSignatureKeyName",onToggle:n=>C(n),isOpen:M,onSelect:(n,c)=>{a.onChange(c.toString()),C(!1)},selections:a.value,variant:y.single,isDisabled:t,children:[e(l,{value:"NONE"}),e(l,{value:i("keyID"),isPlaceholder:!0}),e(l,{value:i("certSubject")})]})})})]}),e(u,{field:"config.wantAssertionsSigned",label:"wantAssertionsSigned",isReadOnly:t}),e(u,{field:"config.wantAssertionsEncrypted",label:"wantAssertionsEncrypted",isReadOnly:t}),e(u,{field:"config.forceAuthn",label:"forceAuthentication",isReadOnly:t}),e(u,{field:"config.validateSignature",label:"validateSignature",isReadOnly:t}),K==="true"&&e(_,{field:"config.signingCertificate",label:"validatingX509Certs","data-testid":"validatingX509Certs",isReadOnly:t}),e(u,{field:"config.signSpMetadata",label:"signServiceProviderMetadata","data-testid":"signServiceProviderMetadata",isReadOnly:t}),e(u,{field:"config.loginHint",label:"passSubject","data-testid":"passSubject",isReadOnly:t}),e(d,{label:i("allowedClockSkew"),labelIcon:e(o,{helpText:r("allowedClockSkew"),fieldLabelId:"identity-providers:allowedClockSkew"}),fieldId:"allowedClockSkew",helperTextInvalid:i("common:required"),children:e(v,{name:"config.allowedClockSkew",defaultValue:0,control:s,render:({field:a})=>{const n=Number(a.value);return e(L,{"data-testid":"allowedClockSkew",inputName:"allowedClockSkew",min:0,max:2147483,value:n,readOnly:!0,onPlus:()=>a.onChange(n+1),onMinus:()=>a.onChange(n-1),onChange:c=>{const b=Number(c.target.value);a.onChange(b<0?0:b)}})}})}),e(d,{label:i("attributeConsumingServiceIndex"),labelIcon:e(o,{helpText:r("attributeConsumingServiceIndex"),fieldLabelId:"identity-providers:attributeConsumingServiceIndex"}),fieldId:"attributeConsumingServiceIndex",helperTextInvalid:i("common:required"),children:e(v,{name:"config.attributeConsumingServiceIndex",defaultValue:0,control:s,render:({field:a})=>{const n=Number(a.value);return e(L,{"data-testid":"attributeConsumingServiceIndex",inputName:"attributeConsumingServiceIndex",min:0,max:2147483,value:n,readOnly:!0,onPlus:()=>a.onChange(n+1),onMinus:()=>a.onChange(n-1),onChange:c=>{const b=Number(c.target.value);a.onChange(b<0?0:b)}})}})}),e(d,{label:i("attributeConsumingServiceName"),labelIcon:e(o,{helpText:r("attributeConsumingServiceName"),fieldLabelId:"identity-providers:attributeConsumingServiceName"}),fieldId:"attributeConsumingServiceName",helperTextInvalid:i("common:required"),children:e(f,{id:"attributeConsumingServiceName","data-testid":"attributeConsumingServiceName",isReadOnly:t,...p("config.attributeConsumingServiceName")})})]})},le=({readOnly:t})=>{const{t:i}=x("identity-providers"),[r,p]=h.exports.useState(!1);return t?e(V,{className:"keycloak__discovery-settings__metadata",toggleText:i(r?"hideMetaData":"showMetaData"),onToggle:s=>p(s),isExpanded:r,children:e(P,{readOnly:t})}):e(P,{readOnly:t})};const re=({id:t,isAliasReadonly:i=!1})=>{const{t:r}=x("identity-providers"),{realm:p}=B(),{register:s,watch:S,formState:{errors:A}}=E(),T=S("alias");return g(D,{children:[e(Q,{id:t}),e(d,{label:r("alias"),labelIcon:e(o,{helpText:"identity-providers-help:alias",fieldLabelId:"identity-providers:alias"}),fieldId:"alias",isRequired:!0,validated:A.alias?m.error:m.default,helperTextInvalid:r("common:required"),children:e(f,{isRequired:!0,id:"alias","data-testid":"alias",isReadOnly:i,validated:A.alias?m.error:m.default,...s("alias",{required:!0})})}),e(_,{field:"displayName",label:"displayName","data-testid":"displayName"}),e(X,{}),e(d,{label:r("endpoints"),fieldId:"endpoints",labelIcon:e(o,{helpText:"identity-providers-help:alias",fieldLabelId:"identity-providers:alias"}),className:"keycloak__identity-providers__saml_link",children:e(G,{title:r("samlEndpointsLabel"),href:`${H.authUrl}/realms/${p}/broker/${T}/endpoint/descriptor`,isInline:!0})})]})};export{le as D,re as S};
//# sourceMappingURL=SamlGeneralSettings.25e6527b.js.map
