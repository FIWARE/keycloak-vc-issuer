import{ab as I,l as D,U as k,u as z,az as w,aA as x,r as d,h as R,F as M,j as e,q as O,b3 as f,c2 as U,bM as V}from"./index.2ecf13ca.js";import{u as j}from"./ConfirmDialog.b43fd344.js";import{L as F}from"./ListEmptyState.94d606ed.js";import{K as T}from"./KeycloakDataTable.5c9a6c7c.js";import{u as E}from"./useFormatDate.742c67f0.js";import{c as B}from"./HelpItem.49be9c4e.js";import{L as P,a as q,b as W}from"./ListItem.e829200f.js";const G={name:"CubesIcon",height:512,width:512,svgPath:"M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z",yOffset:0,xOffset:0},H=I(G);function es({loader:y,hiddenColumns:a=[],emptyInstructions:l,logoutUser:i}){const{realm:o}=D(),{whoAmI:C}=k(),{t:n}=z("sessions"),{keycloak:p,adminClient:r}=w(),{addError:g}=x(),c=E(),[h,b]=d.exports.useState(0),m=()=>b(t=>t+1),v=d.exports.useMemo(()=>[{name:"username",displayKey:"sessions:user",cellRenderer:s=>e(f,{to:U({realm:o,id:s.userId,tab:"sessions"}),children:s.username})},{name:"start",displayKey:"sessions:started",cellRenderer:s=>c(new Date(s.start))},{name:"lastAccess",displayKey:"sessions:lastAccess",cellRenderer:s=>c(new Date(s.lastAccess))},{name:"ipAddress",displayKey:"events:ipAddress"},{name:"clients",displayKey:"sessions:clients",cellRenderer:s=>e(P,{variant:q.inline,children:Object.entries(s.clients).map(([u,L])=>e(W,{children:e(f,{to:V({realm:o,clientId:u,tab:"sessions"}),children:L})},u))})}].filter(({name:s})=>!a.includes(s)),[o,a]),[A,S]=j({titleKey:"sessions:logoutAllSessions",messageKey:"sessions:logoutAllDescription",continueButtonLabel:"common:confirm",onConfirm:async()=>{try{await r.users.logout({id:i}),m()}catch(t){g("sessions:logoutAllSessionsError",t)}}});async function K(t){await r.realms.deleteSession({realm:o,session:t.id}),t.userId===C.getUserId()?await p.logout({redirectUri:""}):m()}return R(M,{children:[e(S,{}),e(T,{loader:y,ariaLabelKey:"sessions:title",searchPlaceholderKey:"sessions:searchForSession",toolbarItem:i&&e(B,{children:e(O,{onClick:A,children:n("logoutAllSessions")})}),columns:v,actions:[{title:n("common:signOut"),onRowClick:K}],emptyState:e(F,{hasIcon:!0,icon:H,message:n("noSessions"),instructions:l||n("noSessionsDescription")})},h)]})}export{H as C,es as S};
//# sourceMappingURL=SessionsTable.67f1e7d6.js.map
