import{a as N,C as g,b as M}from"./index.esm.1e7ace95.js";import{u as _,by as O,ax as $,az as w,aA as K,l as z,ad as U,aX as W,cU as q,h as s,F as C,j as e,ao as Y,T as B}from"./index.7cbfb18a.js";import{u as A}from"./ConfirmDialog.4dc691c5.js";import{V as P}from"./ViewHeader.083cd951.js";import{F as R}from"./FormAccess.3a7ea209.js";import{T as j,H as v}from"./HelpItem.719382e8.js";import{T as X}from"./Text.28ece842.js";import{u as D}from"./useToggle.461e82f2.js";import{i as x}from"./isEqual.c47179ef.js";import{a as y}from"./FormGroup.60c77f60.js";import{S as L,b as V,a}from"./Select.fbe867d5.js";import{N as G}from"./NumberInput.619d2bbb.js";const de=({provider:o,save:t,noDivider:l=!1,dropdownItems:d=[]})=>{const{t:r}=_("user-federation"),{id:c}=O(),H=$(),{adminClient:I}=w(),{addAlert:S,addError:b}=K(),{realm:u}=z(),{control:T,setValue:p}=N(),[E,f]=A({titleKey:"user-federation:userFedDisableConfirmTitle",messageKey:"user-federation:userFedDisableConfirm",continueButtonLabel:"common:disable",onConfirm:()=>{p("config.enabled[0]","false"),t()}}),[n,h]=A({titleKey:"user-federation:userFedDeleteConfirmTitle",messageKey:"user-federation:userFedDeleteConfirm",continueButtonLabel:"common:delete",continueButtonVariant:U.danger,onConfirm:async()=>{try{await I.components.del({id:c}),S(r("userFedDeletedSuccess"),W.success),H(q({realm:u}),{replace:!0})}catch(i){b("user-federation:userFedDeleteError",i)}}});return s(C,{children:[e(f,{}),e(h,{}),e(g,{name:"config.enabled[0]",defaultValue:["true"][0],control:T,render:({field:i})=>c?e(P,{divider:!l,titleKey:o,dropdownItems:[...d,e(Y,{onClick:()=>n(),"data-testid":"delete-cmd",children:r("deleteProvider")},"delete")],isEnabled:i.value==="true",onToggle:m=>{m?(i.onChange(m.toString()),t()):E()}}):e(P,{titleKey:r("addProvider",{provider:o,count:1})})})]})};const J=({title:o,description:t,showDescription:l=!1})=>s(C,{children:[e(j,{size:"xl",headingLevel:"h2",className:l?"kc-wizard-section-header__title--has-description":"kc-wizard-section-header__title",children:o}),l&&e(B,{className:"kc-wizard-section-header__description",children:e(X,{children:t})})]}),k=({form:o})=>{const{t}=_("user-federation"),[l,d]=D(),[r,c]=D(),[H,I]=D(),[S,b]=D(),u=M({control:o.control,name:"config.cachePolicy"}),T=[e(a,{value:[`${0}`],isPlaceholder:!0,children:[`0${0}`]},0)];let p="";for(let n=1;n<24;n++)n<10?p=`0${n}`:p=`${n}`,T.push(e(a,{value:[`${n}`],children:p},n));const E=[e(a,{value:[`${0}`],isPlaceholder:!0,children:[`0${0}`]},0)];let f="";for(let n=1;n<60;n++)n<10?f=`0${n}`:f=`${n}`,E.push(e(a,{value:[`${n}`],children:f},n));return s(C,{children:[e(y,{label:t("cachePolicy"),labelIcon:e(v,{helpText:"user-federation-help:cachePolicyHelp",fieldLabelId:"user-federation:cachePolicy"}),fieldId:"kc-cache-policy",children:e(g,{name:"config.cachePolicy",defaultValue:["DEFAULT"],control:o.control,render:({field:n})=>s(L,{toggleId:"kc-cache-policy",required:!0,onToggle:d,isOpen:l,onSelect:(h,i)=>{n.onChange(i),d()},selections:n.value,variant:V.single,"data-testid":"kerberos-cache-policy",children:[e(a,{value:["DEFAULT"],isPlaceholder:!0},0),e(a,{value:["EVICT_DAILY"]},1),e(a,{value:["EVICT_WEEKLY"]},2),e(a,{value:["MAX_LIFESPAN"]},3),e(a,{value:["NO_CACHE"]},4)]})})}),x(u,["EVICT_WEEKLY"])?e(y,{label:t("evictionDay"),labelIcon:e(v,{helpText:"user-federation-help:evictionDayHelp",fieldLabelId:"user-federation:evictionDay"}),isRequired:!0,fieldId:"kc-eviction-day",children:e(g,{name:"config.evictionDay[0]",defaultValue:"1",control:o.control,render:({field:n})=>s(L,{"data-testid":"cache-day",toggleId:"kc-eviction-day",required:!0,onToggle:b,isOpen:S,onSelect:(h,i)=>{n.onChange(i),b()},selections:n.value,variant:V.single,children:[e(a,{value:"1",isPlaceholder:!0,children:t("common:Sunday")},0),e(a,{value:"2",children:t("common:Monday")},1),e(a,{value:"3",children:t("common:Tuesday")},2),e(a,{value:"4",children:t("common:Wednesday")},3),e(a,{value:"5",children:t("common:Thursday")},4),e(a,{value:"6",children:t("common:Friday")},5),e(a,{value:"7",children:t("common:Saturday")},6)]})})}):null,x(u,["EVICT_DAILY"])||x(u,["EVICT_WEEKLY"])?s(C,{children:[e(y,{label:t("evictionHour"),labelIcon:e(v,{helpText:"user-federation-help:evictionHourHelp",fieldLabelId:"user-federation:evictionHour"}),isRequired:!0,fieldId:"kc-eviction-hour",children:e(g,{name:"config.evictionHour",defaultValue:["0"],control:o.control,render:({field:n})=>e(L,{toggleId:"kc-eviction-hour",onToggle:c,isOpen:r,onSelect:(h,i)=>{n.onChange(i),c()},selections:n.value,variant:V.single,children:T})})}),e(y,{label:t("evictionMinute"),labelIcon:e(v,{helpText:"user-federation-help:evictionMinuteHelp",fieldLabelId:"user-federation:evictionMinute"}),isRequired:!0,fieldId:"kc-eviction-minute",children:e(g,{name:"config.evictionMinute",defaultValue:["0"],control:o.control,render:({field:n})=>e(L,{toggleId:"kc-eviction-minute",onToggle:I,isOpen:H,onSelect:(h,i)=>{n.onChange(i),I()},selections:n.value,variant:V.single,children:E})})})]}):null,x(u,["MAX_LIFESPAN"])?e(y,{label:t("maxLifespan"),labelIcon:e(v,{helpText:"user-federation-help:maxLifespanHelp",fieldLabelId:"user-federation:maxLifespan"}),fieldId:"kc-max-lifespan",children:e(g,{name:"config.maxLifespan[0]",defaultValue:0,control:o.control,render:({field:n})=>{const i=m=>n.onChange(Math.max(m,0));return e(G,{id:"kc-max-lifespan","data-testid":"kerberos-cache-lifespan",value:n.value,min:0,unit:t("ms"),type:"text",onPlus:()=>n.onChange(Number(n.value)+1),onMinus:()=>n.onChange(Number(n.value)-1),onChange:m=>{const F=Number(m.currentTarget.value);i(isNaN(F)?0:F)}})}})}):null]})},ue=({form:o,showSectionHeading:t=!1,showSectionDescription:l=!1,unWrap:d=!1})=>{const{t:r}=_("user-federation"),{t:c}=_("user-federation-help");return s(C,{children:[t&&e(J,{title:r("cacheSettings"),description:c("cacheSettingsDescription"),showDescription:l}),d?e(k,{form:o}):e(R,{role:"manage-realm",isHorizontal:!0,children:e(k,{form:o})})]})};export{de as H,ue as S,J as W};
//# sourceMappingURL=SettingsCache.cbce1b12.js.map
