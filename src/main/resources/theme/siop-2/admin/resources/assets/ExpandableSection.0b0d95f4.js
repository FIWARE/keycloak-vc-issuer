import{r as f,ar as z,as as k,_ as D,h as u,p as c,j as p,a5 as j}from"./index.7cbfb18a.js";const n={expandableSection:"pf-c-expandable-section",expandableSectionContent:"pf-c-expandable-section__content",expandableSectionToggle:"pf-c-expandable-section__toggle",expandableSectionToggleIcon:"pf-c-expandable-section__toggle-icon",expandableSectionToggleText:"pf-c-expandable-section__toggle-text",modifiers:{expanded:"pf-m-expanded",detached:"pf-m-detached",truncate:"pf-m-truncate",limitWidth:"pf-m-limit-width",displayLg:"pf-m-display-lg",indented:"pf-m-indented",active:"pf-m-active",expandTop:"pf-m-expand-top",overpassFont:"pf-m-overpass-font"}},A={name:"--pf-c-expandable-section--m-truncate__content--LineClamp",value:"3",var:"var(--pf-c-expandable-section--m-truncate__content--LineClamp)"},b=A;var a;(function(i){i.default="default",i.truncate="truncate"})(a||(a={}));const m=(i,e)=>{!e||i<1||e.style.setProperty(b.name,i.toString())};class T extends f.exports.Component{constructor(e){super(e),this.expandableContentRef=f.exports.createRef(),this.observer=()=>{},this.checkToggleVisibility=()=>{var t;if(!((t=this.expandableContentRef)===null||t===void 0)&&t.current){const s=this.props.truncateMaxLines||parseInt(b.value),o=this.expandableContentRef.current.scrollHeight/parseInt(getComputedStyle(this.expandableContentRef.current).lineHeight);this.setState({hasToggle:o>s})}},this.resize=()=>{const{offsetWidth:t}=this.expandableContentRef.current;this.state.previousWidth!==t&&(this.setState({previousWidth:t}),this.checkToggleVisibility())},this.handleResize=z(this.resize,250),this.state={isExpanded:e.isExpanded,hasToggle:!0,previousWidth:void 0}}calculateToggleText(e,t,s,o){return o&&t!==""?t:!o&&s!==""?s:e}componentDidMount(){if(this.props.variant===a.truncate){const e=this.expandableContentRef.current;this.setState({previousWidth:e.offsetWidth}),this.observer=k(e,this.handleResize,!1),this.props.truncateMaxLines&&m(this.props.truncateMaxLines,e),this.checkToggleVisibility()}}componentDidUpdate(e){if(this.props.variant===a.truncate&&e.truncateMaxLines!==this.props.truncateMaxLines){const t=this.expandableContentRef.current;m(this.props.truncateMaxLines,t),this.checkToggleVisibility()}}componentWillUnmount(){this.props.variant===a.truncate&&this.observer()}render(){const e=this.props,{onToggle:t,isActive:s,className:o,toggleText:v,toggleTextExpanded:C,toggleTextCollapsed:_,toggleContent:S,children:L,isExpanded:r,isDetached:g,displaySize:y,isWidthLimited:E,isIndented:R,contentId:W,variant:l,truncateMaxLines:V}=e,I=D(e,["onToggle","isActive","className","toggleText","toggleTextExpanded","toggleTextCollapsed","toggleContent","children","isExpanded","isDetached","displaySize","isWidthLimited","isIndented","contentId","variant","truncateMaxLines"]);let h=t,d=r;r===void 0&&(d=this.state.isExpanded,h=N=>{this.setState({isExpanded:N},()=>t(this.state.isExpanded))});const M=this.calculateToggleText(v,C,_,d),x=!g&&u("button",{className:c(n.expandableSectionToggle),type:"button","aria-expanded":d,onClick:()=>h(!d),children:[l!==a.truncate&&p("span",{className:c(n.expandableSectionToggleIcon),children:p(j,{"aria-hidden":!0})}),p("span",{className:c(n.expandableSectionToggleText),children:S||M})]});return u("div",{...Object.assign({className:c(n.expandableSection,d&&n.modifiers.expanded,s&&n.modifiers.active,g&&n.modifiers.detached,y==="large"&&n.modifiers.displayLg,E&&n.modifiers.limitWidth,R&&n.modifiers.indented,l===a.truncate&&n.modifiers.truncate,o)},I),children:[l===a.default&&x,p("div",{ref:this.expandableContentRef,className:c(n.expandableSectionContent),hidden:l!==a.truncate&&!d,id:W,children:L}),l===a.truncate&&this.state.hasToggle&&x]})}}T.displayName="ExpandableSection";T.defaultProps={className:"",toggleText:"",toggleTextExpanded:"",toggleTextCollapsed:"",onToggle:i=>{},isActive:!1,isDetached:!1,displaySize:"default",isWidthLimited:!1,isIndented:!1,contentId:"",variant:"default"};export{T as E};
//# sourceMappingURL=ExpandableSection.0b0d95f4.js.map
