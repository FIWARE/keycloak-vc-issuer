import{u as k,r as S,h,F as A,j as e,aw as r,g as O,bR as E,by as D}from"./index.7cbfb18a.js";import{a as T,b as m,C as y}from"./index.esm.1e7ace95.js";import{H as b}from"./HelpItem.719382e8.js";import{K as U}from"./KeycloakTextInput.9afb01cd.js";import{T as p,S as x}from"./discovery-settings.6bf57500.js";import{E as j}from"./ExpandableSection.0b0d95f4.js";import{a as g}from"./FormGroup.60c77f60.js";import{S as R,b as _,a as v}from"./Select.fbe867d5.js";import{C as z}from"./ClientIdSecret.07ccc601.js";import{R as F,D as N}from"./DisplayOrder.b6d3afed.js";const C=["plain","S256"],M=({readOnly:t})=>{const{t:i}=k("identity-providers"),[l,n]=S.exports.useState(!1),{register:d,control:c,formState:{errors:u}}=T(),f=m({control:c,name:"config.validateSignature"}),I=m({control:c,name:"config.useJwksUrl"}),s=m({control:c,name:"config.pkceEnabled"});return h("div",{className:"pf-c-form pf-m-horizontal",children:[e(g,{label:i("authorizationUrl"),fieldId:"kc-authorization-url",isRequired:!0,validated:u.config?.authorizationUrl?r.error:r.default,helperTextInvalid:i("common:required"),children:e(U,{type:"url","data-testid":"authorizationUrl",id:"kc-authorization-url",validated:u.config?.authorizationUrl?r.error:r.default,isReadOnly:t,...d("config.authorizationUrl",{required:!0})})}),e(g,{label:i("tokenUrl"),fieldId:"tokenUrl",isRequired:!0,validated:u.config?.tokenUrl?r.error:r.default,helperTextInvalid:i("common:required"),children:e(U,{type:"url",id:"tokenUrl","data-testid":"tokenUrl",validated:u.config?.tokenUrl?r.error:r.default,isReadOnly:t,...d("config.tokenUrl",{required:!0})})}),e(p,{field:"config.logoutUrl",label:"logoutUrl",isReadOnly:t}),e(p,{field:"config.userInfoUrl",label:"userInfoUrl",isReadOnly:t}),e(p,{field:"config.issuer",label:"issuer",isReadOnly:t}),e(x,{field:"config.validateSignature",label:"validateSignature",isReadOnly:t}),f==="true"&&h(A,{children:[e(x,{field:"config.useJwksUrl",label:"useJwksUrl","data-testid":"useJwksUrl",isReadOnly:t}),I==="true"&&e(p,{field:"config.jwksUrl",label:"jwksUrl",isReadOnly:t})]}),e(x,{field:"config.pkceEnabled",label:"pkceEnabled",isReadOnly:t}),s==="true"&&e(g,{className:"pf-u-pb-3xl",label:i("pkceMethod"),labelIcon:e(b,{helpText:"identity-providers-help:pkceMethod",fieldLabelId:"identity-providers:pkceMethod"}),fieldId:"pkceMethod",children:e(y,{name:"config.pkceMethod",defaultValue:C[0],control:c,render:({field:a})=>e(R,{toggleId:"pkceMethod",required:!0,direction:"down",onToggle:()=>n(!l),onSelect:(o,q)=>{a.onChange(q),n(!1)},selections:i(`${a.value}`),variant:_.single,"aria-label":i("pkceMethod"),isOpen:l,children:C.map(o=>e(v,{selected:o===a.value,value:o,children:i(`${o}`)},o))})})})]})},Q=({readOnly:t})=>{const{t:i}=k("identity-providers"),[l,n]=S.exports.useState(!1);return h(A,{children:[t&&e(j,{className:"keycloak__discovery-settings__metadata",toggleText:i(l?"hideMetaData":"showMetaData"),onToggle:()=>n(!l),isExpanded:l,children:e(M,{readOnly:t})}),!t&&e(M,{readOnly:t})]})},w=["client_secret_post","client_secret_basic","client_secret_jwt","private_key_jwt"],X=({create:t=!0})=>{const i=O().providers.clientSignature.providers,{t:l}=k("identity-providers"),{control:n}=T(),[d,c]=S.exports.useState(!1),[u,f]=S.exports.useState(!1),I=m({control:n,name:"config.clientAuthMethod"});return h(A,{children:[e(g,{label:l("clientAuthentication"),labelIcon:e(b,{helpText:"identity-providers-help:clientAuthentication",fieldLabelId:"identity-providers:clientAuthentication"}),fieldId:"clientAuthentication",children:e(y,{name:"config.clientAuthMethod",defaultValue:w[0],control:n,render:({field:s})=>e(R,{toggleId:"clientAuthentication",required:!0,onToggle:()=>c(!d),onSelect:(a,o)=>{s.onChange(o),c(!1)},selections:s.value,variant:_.single,"aria-label":l("clientAuthentication"),isOpen:d,children:w.map(a=>e(v,{selected:a===s.value,value:a,children:l(`clientAuthentications.${a}`)},a))})})}),e(z,{secretRequired:I!=="private_key_jwt",create:t}),e(g,{label:l("clientAssertionSigningAlg"),labelIcon:e(b,{helpText:"identity-providers-help:clientAssertionSigningAlg",fieldLabelId:"identity-providers:clientAssertionSigningAlg"}),fieldId:"clientAssertionSigningAlg",children:e(y,{name:"config.clientAssertionSigningAlg",defaultValue:"",control:n,render:({field:s})=>e(R,{maxHeight:200,toggleId:"clientAssertionSigningAlg",onToggle:()=>f(!u),onSelect:(a,o)=>{s.onChange(o.toString()),f(!1)},selections:s.value||l("algorithmNotSpecified"),variant:_.single,isOpen:u,children:[e(v,{selected:s.value==="",value:"",children:l("algorithmNotSpecified")},""),...E(i).map(a=>e(v,{selected:a===s.value,value:a},a))]})})})]})},Y=({id:t})=>{const{t:i}=k("identity-providers"),{tab:l}=D(),{register:n,formState:{errors:d}}=T();return h(A,{children:[e(F,{id:t}),e(g,{label:i("alias"),labelIcon:e(b,{helpText:"identity-providers-help:alias",fieldLabelId:"identity-providers:alias"}),fieldId:"alias",isRequired:!0,validated:d.alias?r.error:r.default,helperTextInvalid:i("common:required"),children:e(U,{isReadOnly:l==="settings",isRequired:!0,id:"alias","data-testid":"alias",validated:d.alias?r.error:r.default,...n("alias",{required:!0})})}),e(p,{field:"displayName",label:"displayName"}),e(N,{})]})};export{Q as D,Y as O,X as a};
//# sourceMappingURL=OIDCGeneralSettings.2c10f679.js.map
