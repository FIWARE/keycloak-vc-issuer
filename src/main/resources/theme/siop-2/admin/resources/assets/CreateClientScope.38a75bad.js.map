{"version":3,"file":"CreateClientScope.38a75bad.js","sources":["../../src/client-scopes/CreateClientScope.tsx"],"sourcesContent":["import { AlertVariant, PageSection } from \"@patternfly/react-core\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { useAlerts } from \"../components/alert/Alerts\";\nimport {\n  changeScope,\n  ClientScopeDefaultOptionalType,\n} from \"../components/client-scope/ClientScopeTypes\";\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\nimport { useAdminClient } from \"../context/auth/AdminClient\";\nimport { useRealm } from \"../context/realm-context/RealmContext\";\nimport { convertFormValuesToObject } from \"../util\";\nimport { ScopeForm } from \"./details/ScopeForm\";\nimport { toClientScope } from \"./routes/ClientScope\";\n\nexport default function CreateClientScope() {\n  const { t } = useTranslation(\"client-scopes\");\n  const navigate = useNavigate();\n  const { realm } = useRealm();\n  const { adminClient } = useAdminClient();\n  const { addAlert, addError } = useAlerts();\n\n  const onSubmit = async (formData: ClientScopeDefaultOptionalType) => {\n    const clientScope = convertFormValuesToObject({\n      ...formData,\n      name: formData.name?.trim().replace(/ /g, \"_\"),\n    });\n\n    try {\n      await adminClient.clientScopes.create(clientScope);\n\n      const scope = await adminClient.clientScopes.findOneByName({\n        name: clientScope.name!,\n      });\n\n      if (!scope) {\n        throw new Error(t(\"common:notFound\"));\n      }\n\n      await changeScope(\n        adminClient,\n        { ...clientScope, id: scope.id },\n        clientScope.type\n      );\n\n      addAlert(t(\"createSuccess\", AlertVariant.success));\n\n      navigate(\n        toClientScope({\n          realm,\n          id: scope.id!,\n          tab: \"settings\",\n        })\n      );\n    } catch (error) {\n      addError(\"client-scopes:createError\", error);\n    }\n  };\n\n  return (\n    <>\n      <ViewHeader titleKey=\"client-scopes:createClientScope\" />\n      <PageSection variant=\"light\" className=\"pf-u-p-0\">\n        <PageSection variant=\"light\">\n          <ScopeForm save={onSubmit} />\n        </PageSection>\n      </PageSection>\n    </>\n  );\n}\n"],"names":["CreateClientScope","t","useTranslation","navigate","useNavigate","realm","useRealm","adminClient","useAdminClient","addAlert","addError","useAlerts","_Fragment","_jsx","ViewHeader","PageSection","ScopeForm","formData","clientScope","convertFormValuesToObject","name","trim","replace","clientScopes","create","scope","findOneByName","Error","changeScope","id","type","AlertVariant","success","toClientScope","tab","error","onSubmit"],"mappings":"gqBAgBA,SAAwBA,GAAoB,CACpC,KAAA,CAAEC,EAAAA,CAAAA,EAAMC,EAAe,eAAe,EACtCC,EAAWC,IACX,CAAEC,MAAAA,GAAUC,EAAU,EACtB,CAAEC,YAAAA,GAAgBC,EAAgB,EAClC,CAAEC,SAAAA,EAAUC,SAAAA,GAAaC,EAAW,EAuC1C,SACEC,EAAA,CAAA,SAAA,CACEC,EAACC,EAAU,CAAC,SAAS,iCAAA,CAAoC,EACzDD,EAACE,EAAW,CAAC,QAAQ,QAAQ,UAAU,WAAU,WAC9CA,EAAW,CAAC,QAAQ,QAAO,WACzBC,EAAS,CAAC,KA1CF,MAAOC,GAA6C,CACnE,MAAMC,EAAcC,EAA0B,CAC5C,GAAGF,EACHG,KAAMH,EAASG,MAAMC,KAAOC,EAAAA,QAAQ,KAAM,GAAG,CAAA,CAC9C,EAEG,GAAA,CACIf,MAAAA,EAAYgB,aAAaC,OAAON,CAAW,EAEjD,MAAMO,EAAQ,MAAMlB,EAAYgB,aAAaG,cAAc,CACzDN,KAAMF,EAAYE,IAAAA,CACnB,EAED,GAAI,CAACK,EACH,MAAM,IAAIE,MAAM1B,EAAE,iBAAiB,CAAC,EAGtC,MAAM2B,EACJrB,EACA,CAAE,GAAGW,EAAaW,GAAIJ,EAAMI,EAAAA,EAC5BX,EAAYY,IAAI,EAGlBrB,EAASR,EAAE,gBAAiB8B,EAAaC,OAAO,CAAC,EAEjD7B,EACE8B,EAAc,CACZ5B,MAAAA,EACAwB,GAAIJ,EAAMI,GACVK,IAAK,UACN,CAAA,CAAC,QAEGC,GACPzB,EAAS,4BAA6ByB,CAAK,CAC7C,CAAA,CAQuBC,CAAS,CAAA,CAAG,CAAA,CAEnB,CAAA,CAAA,CACb,CAEP"}