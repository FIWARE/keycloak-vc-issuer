import{u as y,ax as C,az as v,l as x,r as A,aA as w,h as i,F as S,j as e,P as T,q as l,b3 as j,bN as k,aC as I,b5 as V,b6 as E,aD as P,aX as K,bM as O}from"./index.2ecf13ca.js";import{u as z,F as H}from"./index.esm.68aaf060.js";import{F as L}from"./FormAccess.7ed5d8eb.js";import{F as N}from"./FileUploadForm.e2de83e5.js";import{K as U}from"./KeycloakTextInput.97e36976.js";import{V as $}from"./ViewHeader.67577dd4.js";import{C as D,a as G}from"./ClientDescription.b8d8147e.js";import{L as R}from"./CodeEditor.0b7c4c70.js";import{a as X,A as q}from"./FormGroup.24d2e56a.js";import"./copy-icon.06155c15.js";import"./HelpItem.49be9c4e.js";import"./GridItem.a22d8cac.js";import"./FileUpload.005327fa.js";import"./Modal.2c72168d.js";import"./Text.441b2f8e.js";import"./Checkbox.56efba4a.js";import"./check.51c67984.js";import"./KeycloakTextArea.2947a089.js";import"./EmptyStateBody.25bf6e38.js";import"./EmptyStateSecondaryActions.3ed74a6a.js";const B=a=>a.match(/(<.[^(><.)]+>)/g);function ht(){const{t:a}=y("clients"),m=C(),{adminClient:o}=v(),{realm:s}=x(),n=z(),{register:p,handleSubmit:d,setValue:u}=n,[h,f]=A.exports.useState({}),{addAlert:g,addError:c}=w(),b=async r=>{try{const t=await F(r);I(t,u),f(t)}catch(t){c("clients:importParseError",t)}};async function F(r){if(!B(r))return JSON.parse(r);const t=await fetch(`${V(o.baseUrl)}admin/realms/${s}/client-description-converter`,{method:"POST",body:r,headers:E(await o.getAccessToken())});if(!t.ok)throw new Error(`Server responded with invalid status: ${t.statusText}`);return t.json()}return i(S,{children:[e($,{titleKey:"clients:importClient",subKey:"clients:clientsExplain"}),e(T,{variant:"light",children:e(L,{isHorizontal:!0,onSubmit:d(async r=>{try{const t=await o.clients.create({...h,...P({...r,attributes:r.attributes||{}})});g(a("clientImportSuccess"),K.success),m(O({realm:s,clientId:t.id,tab:"settings"}))}catch(t){c("clients:clientImportError",t)}}),role:"manage-clients",children:i(H,{...n,children:[e(N,{id:"realm-file",language:R.json,extension:".json,.xml",helpText:"common-help:helpFileUploadClient",onChange:b}),e(D,{hasConfigureAccess:!0}),e(X,{label:a("common:type"),fieldId:"kc-type",children:e(U,{id:"kc-type",isReadOnly:!0,...p("protocol")})}),e(G,{unWrap:!0}),i(q,{children:[e(l,{variant:"primary",type:"submit",children:a("common:save")}),e(l,{variant:"link",component:r=>e(j,{...r,to:k({realm:s})}),children:a("common:cancel")})]})]})})})]})}export{ht as default};
//# sourceMappingURL=ImportForm.76247606.js.map
