import{l as J,u as M,az as W,aA as X,r as c,ad as Q,aX as P,h as F,F as A,j as t,b1 as Y,P as Z,q as _,b3 as k,bJ as $,am as ee,al as te,ao as oe,bE as L,bG as ne}from"./index.7cbfb18a.js";import{V as ae}from"./ViewHeader.083cd951.js";import{K as se}from"./KeycloakDataTable.ae870e97.js";import{u as re}from"./ConfirmDialog.4dc691c5.js";import{u as ce,m as le}from"./useLocaleSort.b8a659bb.js";import{A as i,r as ie,C as R,d as pe,c as me}from"./ClientScopeTypes.f384adfd.js";import{S as de,a as Se,C as ue,n as ye,t as he,p as fe}from"./SearchFilter.3c7ebce8.js";import{g as ge}from"./utils.988d95db.js";import{c as h}from"./HelpItem.719382e8.js";import{ag as B}from"./Td.1e0c90e7.js";import"./Text.28ece842.js";import"./ListEmptyState.fef0510e.js";import"./TableToolbar.51ae2a5f.js";import"./FormGroup.60c77f60.js";import"./EmptyStateSecondaryActions.511adeb0.js";import"./EmptyStateBody.1533f3a6.js";import"./plus-circle-icon.aa8a939a.js";import"./Modal.11970fe7.js";import"./Select.fbe867d5.js";import"./check.51c67984.js";import"./star-icon.a6efdd26.js";import"./filter-icon.a9b0a5f3.js";import"./grip-vertical-icon.7e109111.js";import"./Checkbox.7d63c785.js";function He(){const{realm:f}=J(),{t:n}=M("client-scopes"),{adminClient:a}=W(),{addAlert:g,addError:b}=X(),[E,C]=c.exports.useState(!1),[l,p]=c.exports.useState([]),[s,w]=c.exports.useState("name"),[T,m]=c.exports.useState(i.none),[K,d]=c.exports.useState("all"),N=ce(),[D,O]=c.exports.useState(0),r=()=>{p([]),O(D+1)},V=async(e,o,S)=>{const U=await a.clientScopes.listDefaultClientScopes(),q=await a.clientScopes.listDefaultOptionalClientScopes(),z=await a.clientScopes.find(),G=s==="name"?ye(S):s==="type"?he(T):fe(K),H=z.map(u=>({...u,type:U.find(y=>y.name===u.name)?R.default:q.find(y=>y.name===u.name)?R.optional:i.none})).filter(G);return N(H,le("name")).slice(e,Number(e)+Number(o))},[x,v]=re({titleKey:n("deleteClientScope",{count:l.length,name:l[0]?.name}),messageKey:"client-scopes:deleteConfirm",continueButtonLabel:"common:delete",continueButtonVariant:Q.danger,onConfirm:async()=>{try{for(const e of l){try{await ie(a,e)}catch(o){console.warn("could not remove scope",o.response?.data?.errorMessage||o)}await a.clientScopes.del({id:e.id})}g(n("deletedSuccess"),P.success),r()}catch(e){b("client-scopes:deleteError",e)}}}),I=e=>t(pe,{clientScope:e,type:e.type,all:!0,onSelect:async o=>{try{await me(a,e,o),g(n("clientScopeSuccess"),P.success),r()}catch(S){b("client-scopes:clientScopeError",S)}}}),j=({id:e,name:o})=>t(k,{to:ne({realm:f,id:e,tab:"settings"}),children:o},e);return F(A,{children:[t(v,{}),t(ae,{titleKey:"clientScopes",subKey:"client-scopes:clientScopeExplain",helpUrl:Y.clientScopesUrl}),t(Z,{variant:"light",className:"pf-u-p-0",children:t(se,{loader:V,ariaLabelKey:"client-scopes:clientScopeList",searchPlaceholderKey:s==="name"?"client-scopes:searchFor":void 0,isSearching:s!=="name",searchTypeComponent:t(de,{searchType:s,onSelect:e=>w(e),withProtocol:!0}),isPaginated:!0,onSelect:e=>p([...e]),canSelectAll:!0,toolbarItem:F(A,{children:[t(Se,{searchType:s,type:T,onSelect:e=>{w(e),d("all"),m(i.none),r()},onType:e=>{m(e),d("all"),r()},protocol:K,onProtocol:e=>{d(e),m(i.none),r()}}),t(h,{children:t(_,{component:e=>t(k,{...e,to:$({realm:f})}),children:n("createClientScope")})}),t(h,{children:t(ue,{selectedRows:l,refresh:r})}),t(h,{children:t(ee,{toggle:t(te,{onToggle:C}),isOpen:E,isPlain:!0,dropdownItems:[t(oe,{component:"button",isDisabled:l.length===0,onClick:()=>{x(),C(!1)},children:n("common:delete")},"action")]})})]}),actions:[{title:n("common:delete"),onRowClick:e=>{p([e]),x()}}],columns:[{name:"name",cellRenderer:j},{name:"type",displayKey:"client-scopes:assignedType",cellRenderer:I},{name:"protocol",displayKey:"client-scopes:protocol",cellRenderer:e=>ge(n,e.protocol??"openid-connect"),transforms:[B(15)]},{name:"attributes['gui.order']",displayKey:"client-scopes:displayOrder",cellFormatters:[L()],transforms:[B(15)]},{name:"description",cellFormatters:[L()]}]},D)})]})}export{He as default};
//# sourceMappingURL=ClientScopesSection.ef29647e.js.map
