import{u as g,h as o,j as e,bP as I,aX as k,az as y,l as S,aA as V,ax as F,r as N,F as D,bN as p,P as H,q as h,b3 as L}from"./index.7cbfb18a.js";import{u as M,C as v}from"./index.esm.1e7ace95.js";import{b as P,F as j}from"./FormAccess.3a7ea209.js";import{V as w}from"./ViewHeader.083cd951.js";import{H as b}from"./HelpItem.719382e8.js";import{T as z}from"./TimeSelector.3864b0c1.js";import{M as E,a as G}from"./Modal.11970fe7.js";import{F as K,a as l,A as O}from"./FormGroup.60c77f60.js";import{N as R}from"./NumberInput.619d2bbb.js";import"./copy-icon.dbf95270.js";import"./GridItem.63e5e367.js";import"./Text.28ece842.js";import"./Select.fbe867d5.js";import"./check.51c67984.js";import"./star-icon.a6efdd26.js";import"./plus-icon.f70ae4c8.js";const q=({token:t,toggleDialog:r})=>{const{t:n}=g("clients");return o(E,{title:n("initialAccessTokenDetails"),isOpen:!0,onClose:r,variant:G.medium,children:[e(I,{title:n("copyInitialAccessToken"),isInline:!0,variant:k.warning}),e(K,{className:"pf-u-mt-md",children:e(l,{label:n("initialAccessToken"),fieldId:"initialAccessToken",children:e(P,{id:"initialAccessToken",isReadOnly:!0,children:t})})})]})};function se(){const{t}=g("clients"),{handleSubmit:r,control:n,formState:{isValid:A,errors:c}}=M({mode:"onChange"}),{adminClient:x}=y(),{realm:s}=S(),{addAlert:C,addError:f}=V(),T=F(),[m,u]=N.exports.useState("");return o(D,{children:[m&&e(q,{token:m,toggleDialog:()=>{u(""),C(t("tokenSaveSuccess"),k.success),T(p({realm:s,tab:"initial-access-token"}))}}),e(w,{titleKey:"clients:createToken",subKey:"clients-help:createToken"}),e(H,{variant:"light",children:o(j,{isHorizontal:!0,role:"create-client",onSubmit:r(async a=>{try{const i=await x.realms.createClientsInitialAccess({realm:s},a);u(i.token)}catch(i){f("clients:tokenSaveError",i)}}),children:[e(l,{label:t("expiration"),fieldId:"expiration",labelIcon:e(b,{helpText:"clients-help:expiration",fieldLabelId:"clients:expiration"}),helperTextInvalid:t("expirationValueNotValid"),validated:c.expiration?"error":"default",children:e(v,{name:"expiration",defaultValue:86400,control:n,rules:{min:1},render:({field:a})=>e(z,{"data-testid":"expiration",value:a.value,onChange:a.onChange,min:1,validated:c.expiration?"error":"default"})})}),e(l,{label:t("count"),fieldId:"count",labelIcon:e(b,{helpText:"clients-help:count",fieldLabelId:"clients:count"}),children:e(v,{name:"count",defaultValue:1,control:n,render:({field:a})=>e(R,{"data-testid":"count",inputName:"count",inputAriaLabel:t("count"),min:1,value:a.value,onPlus:()=>a.onChange(a.value+1),onMinus:()=>a.onChange(a.value-1),onChange:i=>{const d=Number(i.target.value);a.onChange(d<1?1:d)}})})}),o(O,{children:[e(h,{variant:"primary",type:"submit","data-testid":"save",isDisabled:!A,children:t("common:save")}),e(h,{"data-testid":"cancel",variant:"link",component:a=>e(L,{...a,to:p({realm:s,tab:"initial-access-token"})}),children:t("common:cancel")})]})]})})]})}export{se as default};
//# sourceMappingURL=CreateInitialAccessToken.79a10f1f.js.map
