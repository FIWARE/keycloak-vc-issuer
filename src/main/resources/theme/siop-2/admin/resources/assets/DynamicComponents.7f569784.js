import{a as y,C as T}from"./index.esm.1e7ace95.js";import{H as g}from"./HelpItem.719382e8.js";import{u as C,j as t,aB as E,r as S,h as x,F as P,af as K,q as k,ac as V,a$ as D,b0 as F,bz as _}from"./index.7cbfb18a.js";import{a as I}from"./FormGroup.60c77f60.js";import{C as q}from"./ClientSelect.2d31aa2e.js";import{F as H}from"./FileUpload.c211f5c1.js";import{G as J}from"./GroupPickerDialog.174f65c8.js";import{C as U,c as A,S as G,b as R,a as j}from"./Select.fbe867d5.js";import{A as z,a as W}from"./ActionListItem.65cb5d9a.js";import{F as M,a as $}from"./FlexItem.ae9c1d3c.js";import{M as Q}from"./minus-circle-icon.c093f419.js";import{P as X}from"./plus-circle-icon.aa8a939a.js";import{M as Y}from"./MultiLineInput.091fd21a.js";import{P as Z}from"./PasswordInput.aa539188.js";import{u as ee}from"./useToggle.461e82f2.js";import{A as te,S as oe}from"./AddRoleMappingModal.c8e6830c.js";import{C as ae,L as ne}from"./CodeEditor.5b99e2f5.js";import{K as le}from"./KeycloakTextInput.9afb01cd.js";import{K as re}from"./KeycloakTextArea.d98120cb.js";const se=({name:e,label:o,helpText:s,isDisabled:a=!1})=>{const{t:r}=C("dynamic"),{control:n}=y();return t(I,{hasNoPaddingTop:!0,label:r(o),fieldId:e,labelIcon:t(g,{helpText:r(s),fieldLabelId:`dynamic:${o}`}),children:t(T,{name:f(e),"data-testid":e,defaultValue:!1,control:n,render:({field:l})=>t(E,{id:e,isDisabled:a,label:r("common:on"),labelOff:r("common:off"),isChecked:l.value==="true"||l.value===!0||l.value[0]==="true",onChange:i=>l.onChange(""+i),"data-testid":e,"aria-label":r(o)})})})},ie=e=>t(q,{...e,name:f(e.name),namespace:"dynamic"}),ce=({name:e,label:o,helpText:s,defaultValue:a,isDisabled:r=!1})=>{const{t:n}=C("dynamic"),{control:l}=y(),[i,h]=S.exports.useState(""),[u,d]=S.exports.useState(!1);return t(I,{label:n(o),labelIcon:t(g,{helpText:n(s),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:t(T,{name:f(e),control:l,defaultValue:a||"",render:({field:c})=>t(H,{id:e,value:c.value,type:"text",filename:i,isDisabled:r,onFileInputChange:(v,b)=>h(b.name),onReadStarted:()=>d(!0),onReadFinished:()=>d(!1),onClearClick:()=>{c.onChange(""),h("")},isLoading:u,allowEditingUploadedText:!1,onChange:(v,b)=>{c.onChange(v),h(b)}})})})},de=({name:e,label:o,helpText:s})=>{const{t:a}=C("dynamic"),[r,n]=S.exports.useState(!1),[l,i]=S.exports.useState(),{control:h}=y();return t(T,{name:f(e),defaultValue:"",control:h,render:({field:u})=>x(P,{children:[r&&t(J,{type:"selectOne",text:{title:"dynamic:selectGroup",ok:"common:select"},onConfirm:d=>{u.onChange(d?.[0].path),i(d),n(!1)},onClose:()=>n(!1),filterGroups:l}),t(I,{label:a(o),labelIcon:t(g,{helpText:a(s),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:x(K,{children:[t(U,{children:u.value&&t(A,{onClick:()=>u.onChange(void 0),children:u.value})}),t(k,{id:"kc-join-groups-button",onClick:()=>n(!r),variant:"secondary","data-testid":"join-groups-button",children:a("selectGroup")})]})})]})})},ue=({name:e,label:o,helpText:s,defaultValue:a,options:r,isDisabled:n=!1})=>{const{t:l}=C("dynamic"),{control:i}=y(),[h,u]=S.exports.useState(!1);return t(I,{label:l(o),labelIcon:t(g,{helpText:l(s),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:t(T,{name:f(e),"data-testid":e,defaultValue:a||"",control:i,render:({field:d})=>t(G,{toggleId:e,isDisabled:n,onToggle:c=>u(c),onSelect:(c,v)=>{d.onChange(v),u(!1)},selections:d.value,variant:R.single,"aria-label":l(o),isOpen:h,children:r?.map(c=>t(j,{selected:c===d.value,value:c},c))})})})},N=()=>Math.floor(Math.random()*100),pe=({name:e,label:o,helpText:s})=>{const{t:a}=C("dynamic"),{getValues:r,setValue:n,register:l}=y(),[i,h]=S.exports.useState([]),u=f(e);S.exports.useEffect(()=>{l(u);const p=JSON.parse(r(u)||"[]");p.length||p.push({key:"",value:""}),h(p.map(m=>({...m,id:N()})))},[l,r]);const d=(p=i)=>{n(u,JSON.stringify(p.map(({id:m,...L})=>L)))},c=(p,m)=>{b(p,{...i[p],key:m})},v=(p,m)=>{b(p,{...i[p],value:m})},b=(p,m)=>h([...i.slice(0,p),m,...i.slice(p+1)]),w=p=>{const m=[...i.slice(0,p),...i.slice(p+1)];h(m),d(m)};return x(I,{label:a(o),labelIcon:t(g,{helpText:a(s),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:[x(M,{direction:{default:"column"},children:[x(M,{children:[t($,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t("strong",{children:a("common:key")})}),t($,{grow:{default:"grow"},children:t("strong",{children:a("common:value")})})]}),i.map((p,m)=>x(M,{"data-testid":"row",children:[t($,{grow:{default:"grow"},children:t(V,{name:`${u}[${m}].key`,placeholder:a("common:keyPlaceholder"),"aria-label":a("key"),defaultValue:p.key,"data-testid":`${u}[${m}].key`,onChange:L=>c(m,L),onBlur:()=>d()})}),t($,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t(V,{name:`${u}[${m}].value`,placeholder:a("common:valuePlaceholder"),"aria-label":a("common:value"),defaultValue:p.value,"data-testid":`${u}[${m}].value`,onChange:L=>v(m,L),onBlur:()=>d()})}),t($,{children:t(k,{variant:"link",title:a("common:removeAttribute"),isDisabled:i.length===1,onClick:()=>w(m),"data-testid":`${u}[${m}].remove`,children:t(Q,{})})})]},p.id))]}),t(z,{children:t(W,{children:t(k,{"data-testid":`${u}-add-row`,className:"pf-u-px-0 pf-u-mt-sm",variant:"link",icon:t(X,{}),onClick:()=>h([...i,{key:"",value:"",id:N()}]),children:a("common:addAttribute")})})})]})},me=({name:e,label:o,helpText:s,defaultValue:a,options:r,isDisabled:n=!1})=>{const{t:l}=C("dynamic"),{control:i}=y(),[h,u]=S.exports.useState(!1);return t(I,{label:l(o),labelIcon:t(g,{helpText:l(s),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:t(T,{name:f(e),control:i,defaultValue:a?[a]:[],render:({field:d})=>t(G,{toggleId:e,"data-testid":e,isDisabled:n,chipGroupProps:{numChips:3,expandedText:l("common:hide"),collapsedText:l("common:showRemaining")},variant:R.typeaheadMulti,typeAheadAriaLabel:"Select",onToggle:c=>u(c),selections:d.value,onSelect:(c,v)=>{const b=v.toString();d.value.includes(b)?d.onChange(d.value.filter(w=>w!==b)):d.onChange([...d.value,b])},onClear:c=>{c.stopPropagation(),d.onChange([])},isOpen:h,"aria-label":l(o),children:r?.map(c=>t(j,{value:c},c))})})})},he=({name:e,label:o,defaultValue:s,helpText:a,isDisabled:r=!1})=>{const{t:n}=C("dynamic"),l=f(e);return t(I,{label:n(o),labelIcon:t(g,{helpText:n(a),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:t(Y,{name:l,isDisabled:r,defaultValue:[s],addButtonLabel:n("addMultivaluedLabel",{fieldLabel:n(o).toLowerCase()})})})},fe=({name:e,label:o,helpText:s,defaultValue:a,isDisabled:r=!1})=>{const{t:n}=C("dynamic"),{register:l}=y();return t(I,{label:n(o),labelIcon:t(g,{helpText:n(s),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:t(Z,{id:e,"data-testid":e,isDisabled:r,defaultValue:a?.toString(),...l(f(e))})})},O=e=>e?.includes(".")?e.split("."):["",e||""],ge=e=>e.client?.clientId?`${e.client.clientId}.${e.role.name}`:e.role.name,Ce=({name:e,label:o,helpText:s,defaultValue:a,isDisabled:r=!1})=>{const{t:n}=C("dynamic"),[l,i]=ee(),{control:h,formState:{errors:u}}=y(),d=f(e);return t(I,{label:n(o),labelIcon:t(g,{helpText:n(s),fieldLabelId:`dynamic:${o}`}),validated:u[d]?"error":"default",helperTextInvalid:n("common:required"),fieldId:e,children:t(T,{name:d,defaultValue:a||"",control:h,render:({field:c})=>x(D,{children:[l&&t(te,{id:"id",type:"roles",name:e,onAssign:v=>c.onChange(ge(v[0])),onClose:i,isRadio:!0}),c.value!==""&&t(F,{children:t(A,{textMaxWidth:"500px",onClick:()=>c.onChange(""),children:t(oe,{role:{name:O(c.value)[1]},client:{clientId:O(c.value)[0]}})})}),t(F,{children:t(k,{onClick:i,variant:"secondary","data-testid":"add-roles",disabled:r,children:n("selectRole.label")})})]})})})},Ie=({name:e,label:o,helpText:s,defaultValue:a,isDisabled:r=!1})=>{const{t:n}=C("dynamic"),{control:l}=y();return t(I,{label:n(o),labelIcon:t(g,{helpText:t("span",{style:{whiteSpace:"pre-wrap"},children:s}),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:t(T,{name:f(e),defaultValue:a,control:l,render:({field:i})=>t(ae,{id:e,"data-testid":e,isReadOnly:r,type:"text",onChange:i.onChange,code:i.value,height:"600px",language:ne.javascript})})})},ye=({name:e,label:o,helpText:s,defaultValue:a,isDisabled:r=!1})=>{const{t:n}=C("dynamic"),{register:l}=y();return t(I,{label:n(o),labelIcon:t(g,{helpText:n(s),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:t(le,{id:e,"data-testid":e,isDisabled:r,defaultValue:a?.toString(),...l(f(e))})})},ve=({name:e,label:o,helpText:s,defaultValue:a,isDisabled:r=!1})=>{const{t:n}=C("dynamic"),{register:l}=y();return t(I,{label:n(o),labelIcon:t(g,{helpText:n(s),fieldLabelId:`dynamic:${o}`}),fieldId:e,children:t(re,{id:e,"data-testid":e,isDisabled:r,defaultValue:a?.toString(),...l(f(e))})})},B={String:ye,Text:ve,boolean:se,List:ue,Role:Ce,Script:Ie,Map:pe,Group:de,ClientList:ie,MultivaluedList:me,MultivaluedString:he,File:ce,Password:fe},be=e=>e in B,Ke=({properties:e,...o})=>t(P,{children:e.map(s=>{const a=s.type;if(be(a)){const r=B[a];return t(r,{...s,...o},s.name)}else console.warn(`There is no editor registered for ${a}`)})}),f=e=>_(`config.${e}`);export{Ke as D};
//# sourceMappingURL=DynamicComponents.7f569784.js.map
