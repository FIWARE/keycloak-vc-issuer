import{u as F,ax as T,az as U,aA as z,r as k,aZ as q,h as d,F as C,j as e,c6 as m,ao as V,P as H,aw as n,q as p,ad as L,b3 as j,aX as E}from"./index.2ecf13ca.js";import{u as K}from"./index.esm.68aaf060.js";import{F as P}from"./FormAccess.7ed5d8eb.js";import{H as u}from"./HelpItem.49be9c4e.js";import{K as h}from"./KeycloakTextInput.97e36976.js";import{V as B}from"./ViewHeader.67577dd4.js";import{u as G}from"./useParams.921239aa.js";import{u as R}from"./useToggle.97c716af.js";import{D as O}from"./DeleteScopeDialog.199825f2.js";import{a as f,A as X}from"./FormGroup.24d2e56a.js";import"./copy-icon.06155c15.js";import"./GridItem.a22d8cac.js";import"./Text.441b2f8e.js";import"./ConfirmDialog.b43fd344.js";import"./Modal.2c72168d.js";function se(){const{t}=F("clients"),{id:i,scopeId:o,realm:s}=G(),I=T(),{adminClient:l}=U(),{addAlert:y,addError:A}=z(),[N,b]=R(),[r,g]=k.exports.useState(),{register:c,reset:v,handleSubmit:w,formState:{errors:S}}=K({mode:"onChange"});q(async()=>{if(o){const a=await l.clients.getAuthorizationScope({id:i,scopeId:o});if(!a)throw new Error(t("common:notFound"));return a}},a=>{g(a),v({...a})},[]);const x=async a=>{try{o?(await l.clients.updateAuthorizationScope({id:i,scopeId:o},a),g(a)):(await l.clients.createAuthorizationScope({id:i},{name:a.name,displayName:a.displayName,iconUri:a.iconUri}),I(m({realm:s,clientId:i,tab:"scopes"}))),y(t((o?"update":"create")+"ScopeSuccess"),E.success)}catch(D){A("clients:scopeSaveError",D)}};return d(C,{children:[e(O,{clientId:i,open:N,toggleDialog:b,selectedScope:r,refresh:()=>I(m({realm:s,clientId:i,tab:"scopes"}))}),e(B,{titleKey:o?r?.name:t("clients:createAuthorizationScope"),dropdownItems:o?[e(V,{"data-testid":"delete-resource",onClick:()=>b(),children:t("common:delete")},"delete")]:void 0}),e(H,{variant:"light",children:d(P,{isHorizontal:!0,role:"view-clients",onSubmit:w(x),children:[e(f,{label:t("common:name"),fieldId:"name",labelIcon:e(u,{helpText:"clients-help:scopeName",fieldLabelId:"name"}),helperTextInvalid:t("common:required"),validated:S.name?n.error:n.default,isRequired:!0,children:e(h,{id:"name",validated:S.name?n.error:n.default,isRequired:!0,...c("name",{required:!0})})}),e(f,{label:t("displayName"),fieldId:"displayName",labelIcon:e(u,{helpText:"clients-help:scopeDisplayName",fieldLabelId:"displayName"}),children:e(h,{id:"displayName",...c("displayName")})}),e(f,{label:t("iconUri"),fieldId:"iconUri",labelIcon:e(u,{helpText:"clients-help:iconUri",fieldLabelId:"clients:iconUri"}),children:e(h,{id:"iconUri",...c("iconUri")})}),e(X,{children:d("div",{className:"pf-u-mt-md",children:[e(p,{variant:L.primary,type:"submit","data-testid":"save",children:t("common:save")}),r?e(p,{variant:"link","data-testid":"revert",onClick:()=>v({...r}),children:t("common:revert")}):e(p,{variant:"link","data-testid":"cancel",component:a=>e(j,{...a,to:m({realm:s,clientId:i,tab:"scopes"})}),children:t("common:cancel")})]})})]})})]})}export{se as default};
//# sourceMappingURL=ScopeDetails.7995694d.js.map
