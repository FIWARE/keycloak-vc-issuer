import{u as y,ax as C,az as v,l as x,r as A,aA as w,h as i,F as S,j as e,P as T,q as l,b3 as j,bN as k,aC as I,b5 as V,b6 as E,aD as P,aX as K,bM as O}from"./index.7cbfb18a.js";import{u as z,F as H}from"./index.esm.1e7ace95.js";import{F as L}from"./FormAccess.3a7ea209.js";import{F as N}from"./FileUploadForm.ebfa6eb7.js";import{K as U}from"./KeycloakTextInput.9afb01cd.js";import{V as $}from"./ViewHeader.083cd951.js";import{C as D,a as G}from"./ClientDescription.51f3666b.js";import{L as R}from"./CodeEditor.5b99e2f5.js";import{a as X,A as q}from"./FormGroup.60c77f60.js";import"./copy-icon.dbf95270.js";import"./HelpItem.719382e8.js";import"./GridItem.63e5e367.js";import"./FileUpload.c211f5c1.js";import"./Modal.11970fe7.js";import"./Text.28ece842.js";import"./Checkbox.7d63c785.js";import"./check.51c67984.js";import"./KeycloakTextArea.d98120cb.js";import"./EmptyStateBody.1533f3a6.js";import"./EmptyStateSecondaryActions.511adeb0.js";const B=a=>a.match(/(<.[^(><.)]+>)/g);function ht(){const{t:a}=y("clients"),m=C(),{adminClient:o}=v(),{realm:s}=x(),n=z(),{register:p,handleSubmit:d,setValue:u}=n,[h,f]=A.exports.useState({}),{addAlert:g,addError:c}=w(),b=async r=>{try{const t=await F(r);I(t,u),f(t)}catch(t){c("clients:importParseError",t)}};async function F(r){if(!B(r))return JSON.parse(r);const t=await fetch(`${V(o.baseUrl)}admin/realms/${s}/client-description-converter`,{method:"POST",body:r,headers:E(await o.getAccessToken())});if(!t.ok)throw new Error(`Server responded with invalid status: ${t.statusText}`);return t.json()}return i(S,{children:[e($,{titleKey:"clients:importClient",subKey:"clients:clientsExplain"}),e(T,{variant:"light",children:e(L,{isHorizontal:!0,onSubmit:d(async r=>{try{const t=await o.clients.create({...h,...P({...r,attributes:r.attributes||{}})});g(a("clientImportSuccess"),K.success),m(O({realm:s,clientId:t.id,tab:"settings"}))}catch(t){c("clients:clientImportError",t)}}),role:"manage-clients",children:i(H,{...n,children:[e(N,{id:"realm-file",language:R.json,extension:".json,.xml",helpText:"common-help:helpFileUploadClient",onChange:b}),e(D,{hasConfigureAccess:!0}),e(X,{label:a("common:type"),fieldId:"kc-type",children:e(U,{id:"kc-type",isReadOnly:!0,...p("protocol")})}),e(G,{unWrap:!0}),i(q,{children:[e(l,{variant:"primary",type:"submit",children:a("common:save")}),e(l,{variant:"link",component:r=>e(j,{...r,to:k({realm:s})}),children:a("common:cancel")})]})]})})})]})}export{ht as default};
//# sourceMappingURL=ImportForm.032a6d17.js.map
