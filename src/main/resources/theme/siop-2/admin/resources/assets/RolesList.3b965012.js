import{u as k,ax as E,az as I,aA as B,l as N,r as R,aZ as T,ad as j,aX as y,j as a,K as v,h as n,F as g,q as w,b3 as i,bD as P,bE as h,c8 as V}from"./index.2ecf13ca.js";import{u as H}from"./ConfirmDialog.b43fd344.js";import{H as $}from"./HelpItem.49be9c4e.js";import{L as q}from"./ListEmptyState.94d606ed.js";import{K as z}from"./KeycloakDataTable.5c9a6c7c.js";const Q=({loader:D,paginated:K=!0,parentRoleId:m,messageBundle:c="roles",toCreate:d,toDetail:L,isReadOnly:s})=>{const{t}=k(c),b=E(),{adminClient:r}=I(),{addAlert:u,addError:C}=B(),{realm:p}=N(),[l,x]=R.exports.useState(),[o,f]=R.exports.useState();T(()=>r.realms.findOne({realm:p}),e=>{x(e)},[]);const F=e=>e.name!==l?.defaultRole?.name?a(i,{to:L(e.id),children:e.name}):n(g,{children:[n(i,{to:V({realm:p,tab:"user-registration"}),children:[e.name," "]}),a($,{helpText:`${c}:defaultRole`,fieldLabelId:"defaultRole"})]}),[S,A]=H({titleKey:"roles:roleDeleteConfirm",messageKey:t("roles:roleDeleteConfirmDialog",{selectedRoleName:o?o.name:""}),continueButtonLabel:"common:delete",continueButtonVariant:j.danger,onConfirm:async()=>{try{m?await r.roles.delCompositeRoles({id:m},[o]):await r.roles.delById({id:o.id}),f(void 0),u(t("roleDeletedSuccess"),y.success)}catch(e){C("roles:roleDeleteError",e)}}});return l?n(g,{children:[a(A,{}),a(z,{loader:D,ariaLabelKey:"roles:roleList",searchPlaceholderKey:"roles:searchFor",isPaginated:K,toolbarItem:!s&&a(w,{"data-testid":"create-role",component:e=>a(i,{...e,to:d}),children:t("createRole")}),actions:s?[]:[{title:t("common:delete"),onRowClick:e=>{f(e),e.name===l.defaultRole.name?u(t("defaultRoleDeleteError"),y.danger):S()}}],columns:[{name:"name",displayKey:"roles:roleName",cellRenderer:F},{name:"composite",displayKey:"roles:composite",cellFormatters:[P(),h()]},{name:"description",displayKey:"common:description",cellFormatters:[h()]}],emptyState:a(q,{hasIcon:!0,message:t("noRoles"),instructions:s?"":t("noRolesInstructions"),primaryActionText:s?"":t("createRole"),onPrimaryAction:()=>b(d)})},o?o.id:"roleList")]}):a(v,{})};export{Q as R};
//# sourceMappingURL=RolesList.3b965012.js.map
