import{r as l,_ as f,j as o,p,h as M,z as j}from"./index.2ecf13ca.js";import{s as i}from"./data-list.f7ff2ea7.js";import{G as P}from"./grip-vertical-icon.6efe1939.js";const h={dataList:"pf-c-data-list",dataListCell:"pf-c-data-list__cell",dataListExpandableContent:"pf-c-data-list__expandable-content",dataListItemContent:"pf-c-data-list__item-content",modifiers:{icon:"pf-m-icon",alignRight:"pf-m-align-right",noFill:"pf-m-no-fill",flex_2:"pf-m-flex-2",flex_3:"pf-m-flex-3",flex_4:"pf-m-flex-4",flex_5:"pf-m-flex-5",gridNone:"pf-m-grid-none",gridSm:"pf-m-grid-sm",gridMd:"pf-m-grid-md",gridLg:"pf-m-grid-lg",gridXl:"pf-m-grid-xl",grid_2xl:"pf-m-grid-2xl"}},V={none:h.modifiers.gridNone,always:"pf-m-grid",sm:h.modifiers.gridSm,md:h.modifiers.gridMd,lg:h.modifiers.gridLg,xl:h.modifiers.gridXl,"2xl":h.modifiers.grid_2xl};var A;(function(s){s.nowrap="nowrap",s.truncate="truncate",s.breakWord="breakWord"})(A||(A={}));const E=l.exports.createContext({isSelectable:!1}),K=(s,a,e)=>{const t=s.indexOf(a);if(t===e)return s;const r=s.splice(t,1);return s.splice(e,0,r[0]),s};class B extends l.exports.Component{constructor(a){super(a),this.dragFinished=!1,this.html5DragDrop=!1,this.arrayCopy=l.exports.Children.toArray(this.props.children),this.ref=l.exports.createRef(),this.state={tempItemOrder:[],draggedItemId:null,draggingToItemIndex:null,dragging:!1},this.getIndex=e=>Array.from(this.ref.current.children).findIndex(t=>t.id===e),this.move=e=>{const t=this.ref.current,r=Array.from(t.children);if(!r.map(n=>n.id).every((n,d)=>n===e[d])){for(;t.firstChild;)t.removeChild(t.lastChild);e.forEach(n=>{t.appendChild(r.find(d=>d.id===n))})}},this.dragStart0=e=>{const{onDragStart:t}=this.props,r=e.id;e.classList.add(i.modifiers.ghostRow),e.setAttribute("aria-pressed","true"),this.setState({draggedItemId:r,dragging:!0}),t&&t(r)},this.dragStart=e=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",e.currentTarget.id),this.dragStart0(e.currentTarget)},this.onDragCancel=()=>{this.move(this.props.itemOrder),Array.from(this.ref.current.children).forEach(e=>{e.classList.remove(i.modifiers.ghostRow),e.classList.remove(i.modifiers.dragOver),e.setAttribute("aria-pressed","false")}),this.setState({draggedItemId:null,draggingToItemIndex:null,dragging:!1}),this.props.onDragCancel&&this.props.onDragCancel()},this.dragLeave=e=>{this.isValidDrop(e)||(this.move(this.props.itemOrder),this.setState({draggingToItemIndex:null}))},this.dragEnd0=e=>{e.classList.remove(i.modifiers.ghostRow),e.classList.remove(i.modifiers.dragOver),e.setAttribute("aria-pressed","false"),this.setState({draggedItemId:null,draggingToItemIndex:null,dragging:!1})},this.dragEnd=e=>{this.dragEnd0(e.target)},this.isValidDrop=e=>{const t=this.ref.current.getBoundingClientRect();return e.clientX>t.x&&e.clientX<t.x+t.width&&e.clientY>t.y&&e.clientY<t.y+t.height},this.drop=e=>{this.isValidDrop(e)?this.props.onDragFinish(this.state.tempItemOrder):this.onDragCancel()},this.dragOver0=e=>{const t=Array.from(this.ref.current.children).findIndex(r=>r.id===e);if(t!==this.state.draggingToItemIndex){const r=K([...this.props.itemOrder],this.state.draggedItemId,t);this.move(r),this.setState({draggingToItemIndex:t,tempItemOrder:r})}},this.dragOver=e=>{e.preventDefault();const t=e.target.closest("li");if(!t||!this.ref.current.contains(t)||t.id===this.state.draggedItemId)return null;this.dragOver0(t.id)},this.handleDragButtonKeys=e=>{const{dragging:t}=this.state;if(![" ","Escape","Enter","ArrowUp","ArrowDown"].includes(e.key)||!this.html5DragDrop){t&&e.preventDefault();return}e.preventDefault();const r=e.target.closest("li");if(e.key===" "||e.key==="Enter"&&!t)this.dragStart0(r);else if(t){if(e.key==="Escape"||e.key==="Enter")this.setState({dragging:!1}),this.dragFinished=!0,e.key==="Enter"?(this.dragEnd0(r),this.props.onDragFinish(this.state.tempItemOrder)):this.onDragCancel();else if(e.key==="ArrowUp"){const n=r.previousSibling;n&&(this.dragOver0(n.id),r.querySelector(`.${i.dataListItemDraggableButton}`).focus())}else if(e.key==="ArrowDown"){const n=r.nextSibling;n&&(this.dragOver0(n.id),r.querySelector(`.${i.dataListItemDraggableButton}`).focus())}}},this.html5DragDrop=Boolean(a.onDragFinish||a.onDragStart||a.onDragMove||a.onDragCancel),this.html5DragDrop&&console.warn("DataList's onDrag API is deprecated. Use DragDrop instead.")}componentDidUpdate(a){this.dragFinished&&(this.dragFinished=!1,this.setState({tempItemOrder:[...this.props.itemOrder],draggedItemId:null,dragging:!1})),a.itemOrder!==this.props.itemOrder&&this.move(this.props.itemOrder)}render(){const a=this.props,{className:e,children:t,onSelectDataListItem:r,selectedDataListItemId:n,isCompact:d,wrapModifier:g,onDragStart:u,onDragMove:D,onDragCancel:b,onDragFinish:y,gridBreakpoint:I,itemOrder:k,selectableRow:C}=a,x=f(a,["className","children","onSelectDataListItem","selectedDataListItemId","isCompact","wrapModifier","onDragStart","onDragMove","onDragCancel","onDragFinish","gridBreakpoint","itemOrder","selectableRow"]),{dragging:w}=this.state,N=r!==void 0,O=S=>{r(S)},L=this.html5DragDrop&&{onDragOver:this.dragOver,onDrop:this.dragOver,onDragLeave:this.dragLeave};return o(E.Provider,{value:{isSelectable:N,selectedDataListItemId:n,updateSelectedDataListItem:O,selectableRow:C,isDraggable:this.html5DragDrop,dragStart:this.dragStart,dragEnd:this.dragEnd,drop:this.drop,dragKeyHandler:this.handleDragButtonKeys},children:o("ul",{...Object.assign({className:p(i.dataList,d&&i.modifiers.compact,V[I],g&&i.modifiers[g],w&&i.modifiers.dragOver,e),style:x.style},x,L,{ref:this.ref}),children:t})})}}B.displayName="DataList";B.defaultProps={children:null,className:"",selectedDataListItemId:"",isCompact:!1,gridBreakpoint:"md",wrapModifier:null};const G=s=>{var{children:a=null,className:e="",width:t=1,isFilled:r=!0,alignRight:n=!1,isIcon:d=!1,wrapModifier:g=null}=s,u=f(s,["children","className","width","isFilled","alignRight","isIcon","wrapModifier"]);return o("div",{...Object.assign({className:p(i.dataListCell,t>1&&i.modifiers[`flex_${t}`],!r&&i.modifiers.noFill,n&&i.modifiers.alignRight,d&&i.modifiers.icon,e,g&&i.modifiers[g])},u),children:a})};G.displayName="DataListCell";const R=s=>{var{className:a="",isDisabled:e=!1}=s,t=f(s,["className","isDisabled"]);return o(E.Consumer,{children:({dragKeyHandler:r})=>o("button",{...Object.assign({className:p(i.dataListItemDraggableButton,e&&i.modifiers.disabled,a),onKeyDown:r,type:"button",disabled:e},t),children:o("span",{className:p(i.dataListItemDraggableIcon),children:o(P,{})})})})};R.displayName="DataListDragButton";function _(s){if(!l.exports.isValidElement(s))return null;if(s.type===R)return s;if(s.props.children)for(const a of l.exports.Children.toArray(s.props.children)){const e=_(a);if(e)return e}return null}class F extends l.exports.Component{render(){const a=this.props,{children:e,isExpanded:t,className:r,id:n,"aria-labelledby":d,selectableInputAriaLabel:g}=a,u=f(a,["children","isExpanded","className","id","aria-labelledby","selectableInputAriaLabel"]);return o(E.Consumer,{children:({isSelectable:D,selectedDataListItemId:b,updateSelectedDataListItem:y,selectableRow:I,isDraggable:k,dragStart:C,dragEnd:x,drop:w})=>{const N=c=>{let m=c.target;for(;c.currentTarget!==m;){if("onclick"in m&&m.onclick||m.parentNode.classList.contains(i.dataListItemAction)||m.parentNode.classList.contains(i.dataListItemControl))return;m=m.parentNode}y(n)},O=c=>{c.key===j.Enter&&y(n)},L=_(e),S=k&&{draggable:L?!L.props.isDisabled:!0,onDrop:w,onDragEnd:x,onDragStart:C},v=b===n,T=g?{"aria-label":g}:{"aria-labelledby":d};return M("li",{...Object.assign({id:n,className:p(i.dataListItem,t&&i.modifiers.expanded,D&&i.modifiers.selectable,b&&v&&i.modifiers.selected,r),"aria-labelledby":d},D&&{tabIndex:0,onClick:N,onKeyDown:O},D&&v&&{"aria-selected":!0},u,S),children:[I&&o("input",{...Object.assign({className:"pf-screen-reader",type:"radio",checked:v,onChange:c=>I.onChange(n,c),tabIndex:-1},T)}),l.exports.Children.map(e,c=>l.exports.isValidElement(c)&&l.exports.cloneElement(c,{rowid:d}))]})}})}}F.displayName="DataListItem";F.defaultProps={isExpanded:!1,className:"",id:"",children:null,"aria-labelledby":""};const U=s=>{var{className:a="",dataListCells:e,rowid:t=""}=s,r=f(s,["className","dataListCells","rowid"]);return o("div",{...Object.assign({className:p(i.dataListItemContent,a)},r),children:e})};U.displayName="DataListItemCells";const X=s=>{var{children:a,className:e="",rowid:t="",wrapModifier:r=null}=s,n=f(s,["children","className","rowid","wrapModifier"]);return o("div",{...Object.assign({className:p(i.dataListItemRow,e,r&&i.modifiers[r])},n),children:l.exports.Children.map(a,d=>l.exports.isValidElement(d)&&l.exports.cloneElement(d,{rowid:t}))})};X.displayName="DataListItemRow";export{F as D,X as a,R as b,U as c,G as d,B as e};
//# sourceMappingURL=DataListItemRow.7402b99a.js.map
